<!DOCTYPE html>
<html>
<head>
<meta charset=UTF-8>
<title>Packaged Web Apps (Widgets) - Packaging and XML Configuration (Second Edition)</title>
<style type="text/css">
/*<![CDATA[*/

  body {
	font-size: 1em;
	counter-reset: assertion;
}
span {
	border: 1px dotted #C3C;
}
dfn.external {
	font-weight: normal;
	font-style: italic;
}
pre.idl {
	border:solid thin;
	background:#eee;
	color:#000;
	padding:0.5em
}
pre.idl :link, pre.idl :visited {
	color:inherit;
	background:transparent
}
dfn {
	font-style:normal;
	font-weight:bolder;
}
em.ct, em.ct-samp {
	text-transform:uppercase;
	font-style:normal;
	font-weight:normal;
}
.issue {
	padding:1em;
	border: 1px solid red;
	background:#FFC;
}
.example {
	border-left: double;
	background-color: #fafafa;
}
.note {
	margin-left: 2em;
	border: 2px solid #CFF6D9;
	padding: .5em;
	padding-top: 0px;
	padding-bottom: 1em;
	color: #444;
	background-color: #E2FFF0;
	font-size: 0.8em;
}
dd > dl {
	margin:0px;
	padding:0px
}
code {
	font-size: 1.1em;
	text-decoration: none;
	color: #002108;
}
a:link code, a:visited code, a > code {
	color:green;
	text-decoration: none;
	border-bottom: 0;
}
.dir_listing li {
	list-style-type:none;
	font-family: Tahoma, Arial, Helvetica, sans-serif;
}
span span {
	background-color: yellow;
}
li.folder {
	list-style-image:url(images/expanded_folder.png)
}
.authorguide {
	border: 1px solid #67BBB5;
	background:#E8EBFC;
	padding: 1em;
	font-size: .9em;
	color: #003;
}
.authorguide strong {
	padding: .2em;
	color: #003;
	border: none;
	position:relative;
	display: block;
	width: 200px;
	left: -1.5em;
	top: -1.5em;
	background: #C6D8E6;
	text-align: center;
}
span.notetitle {
	padding: .2em;
	color:#066;
	border: none;
	position:relative;
	display: block;
	width: 40px;
	left: -1.5em;
	top: -.7em;
	background: #F2FFF1;
	padding-left: .2em;
	text-align: center;
}
var {
	font-family: "Lucida Console", Monaco, monospace;
}
li.folder li {
	list-style-image: none;
}
.dir_listing .comment {
	border: none;
	font-family:"Courier New", Courier, monospace;
	color: #669933;
}
.dir_listing img {
	vertical-align: middle;
}
.redNote {
	color: red;
}
dl.procedure dt {
	font-weight: normal;
}
.editorialNote {
	padding: 5px;
	background-color: #F3B9B7;
	border: 3px dashed #FFEEB8;
	color: #444;
	font-size:0.8em;
}
li>ol {
	list-style-type:upper-alpha;
}
.toc li>ol {
	list-style: none !important;
}
p[id]:after {
	font-size: .8em;
	content: " {" attr(id) "}";
}
.example p {
	margin-top: 1em;
}
td, th {
	border: 1px solid black;
}

/*
 @media screen and (view-mode:minimized) {
 body, .head {
 margin: 0px !important;
 padding: 10px !important;
 background-position: 0px -20px !important;
 text-shadow: #EEE 2px 2px 2px;
}
 .body, .copyright, .head dl, hr {
 display: none;
}
 .head {
 text-align: center;
 padding-top: 10px;
}
 .head h1, .head p {
 margin: 0px;
 padding: 0px;
 background-color: transparent;
}
 .head h2 {
 text-align: center;
 font-size: 1em;
 background-color: transparent;
 margin-left: 20px !important;
}
}
*/

/*]]>*/
</style>
<link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS]" />
</head>
<body>
<div class="head">
  <p><a href="http://www.w3.org/"><img alt="W3C" src="http://www.w3.org/Icons/w3c_home"
    height="48" width="72" /></a></p>
  <!--end-logo-->
  <h1 class="head">Packaged Web Apps (Widgets) -  Packaging and XML Configuration (Second Edition)</h1>
  <h2 class="no-num no-toc">[LONGSTATUS] [DATE: 01 Jan 1901]</h2>
  <dl>
    <dt>This version:</dt>
    <dd class="publish"><a href="[VERSION]">[VERSION]</a>
    <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/widgets/">http://www.w3.org/TR/widgets/</a></dd>
    <dt>Previous version:</dt>
    <dd><a href="http://www.w3.org/TR/2011/REC-widgets-20110927/">http://www.w3.org/TR/2011/REC-widgets-20110927/</a></dd>
    <dt>Latest  editor's draft:</dt>
    <dd><a href=
      "http://dev.w3.org/2006/waf/widgets/">http://dev.w3.org/2006/waf/widgets/</a></dd>
    <dt>Test suite:</dt>
    <dd><a href=
      "http://dev.w3.org/2006/waf/widgets/test-suite/">http://dev.w3.org/2006/waf/widgets/test-suite/</a></dd>
    <dt>Implementation report:</dt>
    <dd><a href=
      "http://dev.w3.org/2006/waf/widgets/imp-report/">http://dev.w3.org/2006/waf/widgets/imp-report/</a></dd>
    <dt>Differences history:</dt>
    <dd><a
     href="http://www.w3.org/2007/10/htmldiff?doc1=http%3A//www.w3.org/TR/widgets/&amp;doc2=http%3A//www.w3.org/TR/2010/WD-widgets-20101005/">Differences</a> between the <a
     href="http://www.w3.org/TR/2010/WD-widgets-20101005/">last published
      draft</a> and this document.</dd>
    <dd><a
     href="http://www.w3.org/2007/10/htmldiff?doc1=http%3A//www.w3.org/TR/widgets/&amp;doc2=http%3A//dev.w3.org/2006/waf/widgets/">Differences</a> between <a href="http://dev.w3.org/2006/waf/widgets/">latest editor's
      draft</a> and <a href="http://www.w3.org/TR/widgets/">latest
      version</a>.</dd>
    <!--dt>This version:</dt>
    <dd><a href=
      "http://www.w3.org/TR/[YEAR]/WD-widgets-[CDATE]/">http://www.w3.org/TR/[YEAR]/WD-widgets-[CDATE]/</a></dd>
    <dt>Latest version: </dt>
    <dd><a href="http://www.w3.org/TR/widgets/">http://www.w3.org/TR/widgets/</a></dd>
    <dt>Previous version:</dt>
    <dd><a href="http://www.w3.org/TR/2010/WD-widgets-20101005/">http://www.w3.org/TR/2010/WD-widgets-20101005/</a></dd-->
    <dt>Editor:</dt>
    <dd><a href="http://datadriven.com.au/">Marcos C&aacute;ceres</a>, W3C Invited Expert</dd>
  </dl>
  <p>Please refer to the <a href="http://dev.w3.org/2006/waf/widgets/errata.html"><strong>errata</strong></a> for this document, which  includes some normative corrections.</p>
  <p>See also <a href="http://www.w3.org/2003/03/Translations/byTechnology?technology=widgets"> <strong>translations</strong></a>.</p>
  <p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © [YEAR] <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
</div>
<hr />
<div class="body">
  <h2 class="no-num no-toc">Abstract</h2>
  <p>This specification updates the <cite>Widget Packaging and XML Configuration</cite>, and addresses some <a href="http://dev.w3.org/2006/waf/widgets/errata.html">errata</a> found in the original recommendation. It also updates the name of the specification, to be more <em>in vogue</em> with industry trends towards the naming of this class of application.</p>
  <p>This specification standardizes a packaging format and metadata for a  class of software
    known commonly as <em>packaged apps</em> or <em>widgets</em>. Unlike traditional user interface widgets (e.g., buttons, input boxes, toolbars, etc.), widgets as specified in this document are full-fledged client-side applications that are authored
    using technologies such as HTML and then packaged for distribution. Examples range from
    simple clocks, stock tickers, news casters, games and weather forecasters, to complex
    applications that pull data from multiple sources to be &quot;mashed-up&quot; and presented to a
    user in some interesting and useful way.</p>
  <p>The
    specification relies on PKWare's Zip specification as the archive format, XML as a
    configuration document format, and a series of steps that runtimes follow when
    processing and verifying various aspects of a package. The packaging format acts as a
    container for files used by a widget. The configuration document is an XML vocabulary
    that declares metadata and configuration parameters for a widget. The steps for
    processing a widget package describe the expected behavior and means of error handling
    for runtimes while processing the packaging format, configuration document, and other
    relevant files. </p>
  <p>This specification is part of the <span>Widgets family of specifications</span>,
    which together standardize widgets as a whole.</p>
  <h2 class="no-num no-toc" id="sotd">Status of this Document </h2>
  <p><em>This section describes the status of this document at the time of its
  publication. Other documents may supersede this document. A list of current W3C
  publications and the latest revision of this technical report can be found in the
  <a href="http://www.w3.org/TR/">W3C technical reports index</a> at
  http://www.w3.org/TR/.</em>  </p>
  <p>This is the [DATE: 01 Jan 1901] Recommendation of the <cite>Widget Packaging and XML Configuration</cite> specification. This document is produced by the <a href="http://www.w3.org/2008/webapps/">Web
    Applications WG</a>, part of the <a href="http://www.w3.org/2006/rwc/Activity">Rich Web
      Client Activity</a> in the W3C <a href="http://www.w3.org/Interaction/">Interaction
  Domain</a>.  </p>
  <p>This document has been reviewed by W3C Members, by software developers, and by other W3C groups and interested parties, and is endorsed by the Director as a W3C Recommendation. It is a stable document and may be used as reference material or cited from another document. W3C's role in making the Recommendation is to draw attention to the specification and to promote its widespread deployment. This enhances the functionality and interoperability of the Web.</p>
  <p>The public is encouraged to send comments to the WebApps Working Group's public mailing list <a href="mailto:public-webapps@w3.org">public-webapps@w3.org</a> (<a href="http://lists.w3.org/Archives/Public/public-webapps/">archive</a>).  </p>
  <p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
    Policy</a>. W3C maintains a <a rel="disclosure" href="http://www.w3.org/2004/01/pp-impl/42538/status">public list of any patent disclosures</a> made in connection with the
    deliverables of the group; that page also includes instructions for disclosing a
    patent. An individual who has actual knowledge of a patent which the individual
    believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
      Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
  W3C Patent Policy</a>.</p>
  <h2 class="no-num no-toc" id="toc">Table of Contents</h2>
  <!--toc-->
  <h2>Introduction</h2>
  <p><em>This section is non-normative.</em></p>
  <p><em>Widgets</em> are full-fledged client-side applications that are authored using
    Web standards such as <span>[HTML]</span> and packaged for distribution. They are typically downloaded and
    installed on a client machine or device where they run as stand-alone applications, but
    they can also be embedded into Web pages and run in a Web browser. Examples range from
    simple clocks, stock tickers, news casters, games and weather forecasters, to complex
    applications that pull data from multiple sources to be &quot;mashed-up&quot; and presented to a
    user in some interesting and useful way (see <span>[Widgets-Landscape]</span> for more
    information).</p>
  <p>This specification is intended to specify a part of the Web platform closely related to <span>[HTML]</span>. </p>
  <h3>Design Goals and Requirements</h3>
  <p><em>This section is non-normative.</em></p>
  <p>The design goals and requirements for this specification are documented in the<cite> <span>[Widgets-Requirements]</span></cite> document. </p>
  <p>This document addresses
    the 25 requirements relating to &quot;<a href="http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#widget-package-packaging">Packaging</a>&quot; and &quot;<a href="http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#configuration-document">Configuration Document</a>&quot; of the 30 April 2009 Working Draft of the <cite>Widgets Requirements</cite> Document: </p>
  <ol>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#packaging-format">Packaging
      Format</a>: see <span>packaging format</span>.</li>
    <li><a href="http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#media-type">Media
      Type</a>: see the <span>valid widget media type</span>.</li>
    <li><a href="http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#file-extension">File
      Extension</a>: see <span>widget file extension</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#internal-abstract-structure">Internal
      Abstract Structure</a>: see <span>Zip archive</span> and <span>widget
      package</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#reserved-resource-names">Reserved
      Resource Names</a>: see <span>reserved file names table</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#addressing-scheme">Addressing
      Scheme</a>: see <span>valid path</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#multilingual-file-names">Multilingual
      File Names</a>: see <span>Zip relative path</span>, particularly in respect to <span title="supported">support</span> for <span>[UTF-8]</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#localization-guidelines">Localization
      Guidelines</a>: see <span>element-based localization</span>, <span>folder-based
      localization</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#automatic-localization">Automatic
      Localization</a>: see <span>element-based localization</span>, <span>folder-based
      localization</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#device-independent-delivery">Device
      Independent Delivery</a>: all aspects of this document where developed with this
      requirement in mind.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#data-compression">Data
      Compression</a>: see the <span>valid compression methods</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#derive-the-media-type-of-resources"> Derive the Media Type of Resources</a>: see the <span>rule for identifying the media type of a
      file</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#format-and-schema">Format and
      Schema</a>: see <span>configuration document</span>, <span>table of configuration
      defaults</span>, and the <span>[Widgets-Relax NG Schema]</span> for the configuration
      document.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#widget-metadata">Widget
      Metadata</a>: see <span>configuration document</span> (particularly the
      elements).</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#authorship-metadata">Authorship
      Metadata:</a> see the <code title="author element">author</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#copyright-notice-and-license-metadata"> Copyright Notice and License Metadata</a>: see the <code title=
    "license element">license</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#visual-rendering-dimensions">Visual
      Rendering Dimensions</a>: see the <code title="widget element">widget</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#declarative-bootstrap">Declarative
      Bootstrap</a> see the <code title="content element">content</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#automated-bootstrap">Automated
      Bootstrap</a> see the <span>default start file</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#iconic-representations">Iconic
      Representations</a>: see the <code title="icon element">icon</code> element, <span>default icons table</span> and <span title="custom icon">custom icons
      table</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#configuration-parameters">Configuration
      Parameters</a>: the <code title="param element">param</code> element (used in
      conjunction with the <code title="feature element">feature</code> element).</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#author-defined-start-up-values-preferences"> Author-defined Start-up Values (Preferences)</a>: see the <code title=
    "preference element">preference</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#feature-access-declarations">Feature
      Access Declarations</a>: see the <code title="feature element">feature</code> element.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#configuration-document-independence"> Configuration Document Independence</a>: see <span>configuration
      document</span>.</li>
    <li><a href=
    "http://www.w3.org/TR/2009/WD-widgets-reqs-20090430/#preferred-display-mode">Preferred
      Display Mode</a>: see the <code>viewmodes</code> attribute of the <code title=
    "widget element">widget</code> element.</li>
  </ol>
  <h3>How This Document is Organized</h3>
  <p><em>This section is non-normative.</em></p>
  <p>This document is organized into two halves, but not
    explicitly marked as such. The first half defines the various aspects of what
    constitutes the <span>packaging format</span>, the <span>configuration document</span>,
    and <span>reserved</span> files, such as <span title="default icon">default
    icons</span> and <span title="locale folder">locale folders</span>. Where possible, the first
    half avoids describing aspects related to processing, which are described in detail in
    the second half of the document.</p>
  <p>The second half, which starts with the section titled &quot;<span>Steps for Processing a
    widget package</span>&quot;, defines the steps required to process a widget package as well
    as the expected behavior of a user agent as it processes the <span>packaging format</span>, the
    configuration document, and attempts to find localized content. The second half of this
    document also deals with error handling in the event that a user agent encounters <span>unsupported</span> or missing files, or <abbr title=
  "Document Object Model">DOM</abbr> nodes that are <span>in error</span> in the
    configuration document. Wherever processing is relevant, sections in the first half of
    the document link to sections in the second half of the document.</p>
  <h3>Typographic Conventions</h3>
  <p><em>This section is non-normative.</em></p>
  <p>This section defines the <dfn>typographical conventions</dfn> used by this
    specification. Some text in this specification is non-normative. Non-normative text includes:</p>
  <ul>
    <li>sections marked with the text <q><em>This section is non-normative</em></q>,</li>
    <li>authoring guidelines,</li>
    <li>examples,</li>
    <li>and notes.</li>
  </ul>
  <p>Everything else in this specification is normative.</p>
  <p>Defined terms appear as this <dfn id="sample-defined-term">sample defined
    term</dfn>. Such terms are referenced as <span>sample defined term</span>, providing a
    link back to the term definition.</p>
  <p>Words that denote a conformance clause or testable assertion use keywords from <span>[RFC2119]</span>: <em class="ct-samp">must</em>, <em class="ct-samp">must not</em>, <em class="ct-samp">should</em>, <em class="ct-samp">recommended</em>, <em class="ct-samp">may</em> and <em class="ct-samp">optional</em>. The keywords <dfn title=""><em class="ct-samp">must</em></dfn>, <dfn title=""><em class="ct-samp">must not</em></dfn>, <dfn title=""><em class="ct-samp">should</em></dfn>, <dfn title=""><em class="ct-samp">recommended</em></dfn>, <dfn title=""><em class="ct-samp">may</em></dfn> and <dfn title=""><em class=
  "ct-samp">optional</em></dfn> in this specification are to be interpreted as described in <span>[RFC2119]</span>.</p>
  <p>Variables are formatted specially, e.g. <var>variable</var>. Code is also specially
    formatted, such as <code>code</code>.</p>
  <p>Words in <dfn class="external">italics</dfn> denote a formal definition given in an
    external specification.</p>
  <p class="example">This is an example. Examples are used to explain concepts or
    demonstrate how to use a feature. Examples are non-normative.</p>
  <p class="note"><span class="notetitle">Note:</span> This is a note, it usually
    contains useful supplementary information in a non-normative form.</p>
  <p class=" authorguide"><strong>Authoring Guidelines:</strong> This is an Authoring
    Guideline. Its purpose is to provide authors with best-practice authoring techniques.
    Authoring guidelines are non-normative.</p>
  <h3>The Widget Family of Specifications</h3>
  <p><em>This section is non-normative.</em></p>
  <p>This specification is part of the <dfn>Widgets family of specifications</dfn>,
    which together standardize widgets as a whole. The <a href="http://www.w3.org/2008/webapps/wiki/WidgetSpecs">list of specifications</a> that make up the Widgets  Family of Specifications can be found on the Working Group's wiki. </p>
  <h2>Conformance</h2>
  <p>There is only one class of  product that can claim conformance to this
    specification: a <span>user agent</span>.</p>
  <p class="note"> <span class="notetitle">Note:</span> Implementers can partially check their level of conformance to this specification by successfully passing the test cases of the <span>[P&amp;C-Test-Suite]</span>. Note, however, that passing all the tests in the test suite does not imply complete conformance to this specification; It only implies that the implementation conforms to aspects tested by the test suite (the test suite does not provide tests for any optional conformance clauses).</p>
  <h2>Definitions</h2>
  <p>The following terms are used throughout this specification so they are gathered here for the readers convenience. The following list of terms is not exhaustive; other terms are defined throughout this specification.</p>
  <p><dfn>Arbitrary</dfn> means that a character, or text string, or <code>file-name</code>, or <code>folder-name</code> is not <span>reserved</span> for
    the purpose of this specification.</p>
  <p>An <dfn>author</dfn> is a person who created a <span>widget package</span> or an
    authoring tool that generated a <span>widget package</span>.</p>
  <p><dfn>Initialization</dfn> means a user agent procedurally stepping through the <span>steps for processing a widget
    package</span>.</p>
  <p>A <dfn class="external">language tag</dfn> is a text string that matches the production of a <code>Language-Tag</code> defined in the <span>[BCP47]</span> specifications (see the <a href=
        "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
    Registry</a> for an authoritative list of possible values, see also the <a href="http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements">Maintenance Agency for ISO 3166 country codes</a>). </p>
  <p>A <dfn class="external">media type</dfn> is defined in the <span>[MIME]</span> specification.</p>
  <p><dfn>Reserved</dfn> means that a character, or text string, or <code>file-name</code>, or <code>folder-name</code> has a specified purpose and
    semantics in this specification or in some other specification or system. The intended
    purpose for any reserved thing is given when the term is used.</p>
  <p><dfn>Supported</dfn> means that a user agent implements a mentioned specification,
    or conformance clause, or is able to process or otherwise render mentioned <span>media
    type</span>.</p>
  <p><dfn>Unsupported</dfn> means the user agent does not implement a mentioned
    specification, or <span>feature</span>, or is unable to render or otherwise process a
    mentioned <span>media type</span>.</p>
  <p>A <dfn class="external">widget</dfn> is defined by the <span>[Widgets-Landscape]</span> as <q>an
    end-user's conceptualization of an interactive single purpose application for
    displaying and/or updating local data or data on the Web, packaged in a way to allow a
    single download and installation on a user's machine, mobile phone, or Internet-enabled
    device</q>. Because widgets are packaged, they can be shared by users without relying
    on <span>[HTTP]</span>. </p>
  <h3>Character Definitions</h3>
  <p>This section groups common sets of <span>[Unicode]</span> code points into definitions for the purpose processing in this
    specification. </p>
  <p>The <dfn title="space characters">space characters</dfn>  are code points marked in the <span>[Unicode]</span> specification with the property "White_Space", including, but not limited to the following list (see <span>[Unicode]</span> for the authoritive list):</p>
  <ul>
    <li>U+0020 SPACE,</li>
    <li>U+0009 CHARACTER TABULATION (tab),</li>
    <li>U+000A LINE FEED (LF),</li>
    <li>U+000B LINE TABULATION,</li>
    <li>U+000C FORM FEED (FF),</li>
    <li>U+000D CARRIAGE RETURN (CR).</li>
    <li>U+0085 NEL (control character next line)</li>
    <li>U+00A0 NBSP (NO-BREAK SPACE)</li>
    <li>U+1680 OGHAM SPACE MARK</li>
    <li>U+180E MONGOLIAN VOWEL SEPARATOR</li>
    <li>U+2000-U+200A (different sorts of spaces)</li>
    <li>U+2028 LS (LINE SEPARATOR)</li>
    <li>U+2029 PS (PARAGRAPH SEPARATOR)</li>
    <li>U+202F NNBSP (NARROW NO-BREAK SPACE)</li>
    <li>U+205F MMSP (MEDIUM MATHEMATICAL SPACE)</li>
    <li>U+3000 IDEOGRAPHIC SPACE</li>
  </ul>
  <p>The <dfn>Zip forbidden
    characters</dfn> are code points:</p>
  <ul>
    <li>U+0000 NUL-U+001F INFORMATION SEPARATOR 1,</li>
    <li>U+007F DELETE,</li>
    <li>U+003C LESS-THAN SIGN,</li>
    <li>U+003E GREATER-THAN SIGN,</li>
    <li>U+003A COLON,</li>
    <li>U+0022 QUOTATION MARK,</li>
    <li>U+002F SOLIDUS,</li>
    <li>U+005C REVERSE SOLIDUS,</li>
    <li>U+007C VERTICAL LINE,</li>
    <li>U+003F QUESTION MARK,</li>
    <li>U+002A ASTERISK,</li>
    <li>U+005E CIRCUMFLEX ACCENT,</li>
    <li>U+0060 GRAVE ACCENT,</li>
    <li>U+007B LEFT CURLY BRACKET,</li>
    <li>U+007D RIGHT CURLY BRACKET,</li>
    <li>U+0021 EXCLAMATION MARK.</li>
  </ul>
  <h2>User Agents</h2>
  <p>A <dfn>user agent</dfn> is an implementation of this specification that also <span title="supported">supports</span> <span>[XML]</span>, <span>[XMLNS]</span>, <span>[UTF-8]</span>, <span>[Unicode]</span>, <span>[DOMCore]</span>, <span>[SNIFF]</span>, and <span>[ZIP]</span> (see <span>optional aspects of the Zip specification</span>). </p>
  <p>In addition to <span title="widget package">widget packages</span>, a <span class="product-ua">user agent</span> <em class="ct">may</em> <span title="supported">support</span> other legacy and proprietary application packaging formats. </p>
  <p>It is <em class="ct">optional</em> for a <span class="product-ua">user
    agent</span> to <span title="supported">support</span> the <span>optional  aspects of the Zip specification</span>.</p>
  <p class="note"><span class="notetitle">Note:</span> The user agent described in this
    specification does not necessarily denote a &quot;<dfn>widget user agent</dfn>&quot; at large:
    that is, a user agent that implements all the specifications, and dependencies, defined
    in the <span>Widgets Family of Specifications</span>. The user agent described is this
    specification is only concerned with how to processes <span title="zip archive">Zip
    archives</span> and <span title="configuration document">configuration
    documents</span>.</p>
  <h3>Optional Aspects of the Zip Specification</h3>
  <p>The <dfn>optional aspects of the Zip specification</dfn> are as follows. These  aspects represent general features defined in the <span>[ZIP]</span> specification that this specification does not make use of: </p>
  <ul>
    <li>
      <p>Compression or  decompression algorithms other than <span>[Deflate]</span> and <span>Stored</span>.</p>
    </li>
    <li>
      <p>Zip64 extensions.</p>
    </li>
    <li>
      <p> Digital signature methods.</p>
    </li>
    <li>
      <p> Decryption methods.</p>
    </li>
    <li>
      <p> Patented aspects.</p>
    </li>
  </ul>
  <h2>Zip Archive</h2>
  <p> The <dfn>Zip archive</dfn> file format,  defined in the <span>[ZIP]</span> specification, is the <dfn>packaging format</dfn> for <span title="widget package">widget packages</span>.</p>
  <p>A <dfn>file entry</dfn> is the data held by a <dfn class="external">local file
    header</dfn>, <dfn class="external">file data</dfn>, and (optional) <dfn class=
    "external">data descriptor</dfn>, as defined in the <span>[ZIP]</span> specification,
    for each physical file or folder contained in a <span>Zip archive</span>.</p>
  <p>A <dfn>potential Zip archive</dfn> is a data object claiming to be a <span>Zip archive</span>,
    that has not been <span title="rule for verifying a zip archive">verified</span> to be a <span>valid Zip archive</span>.</p>
  <p>A <dfn>valid Zip archive</dfn> is a  data object that the user agent has verified as conforming to the production of a <dfn class="external">.Zip file</dfn> as defined by
    the <cite>Zip File Format Specification</cite> <span>[ZIP]</span> and <span title="step 2">meets the requirements of this specification</span> (See <span>Step 2</span>).</p>
  <p>The <dfn id="magic-numbers-for-a-zip-archive">magic numbers for a Zip
    archive</dfn> is the byte sequence: <code>50 4B 03 04</code>.</p>
  <h3>Compression Methods</h3>
  <p>A <dfn>compression method</dfn> is the compression algorithm or storage method
    that was used to encode the file data of a <span>file entry</span> when the zip archive was created by the author. The compression method
    that  encoded the <var>file data</var> of a <span>file entry</span> is
    identified by the numeric value derived from the <dfn><var>compression method
    field</var></dfn> defined in the <span>[ZIP]</span> specification.</p>
  <p>The <dfn>valid compression methods</dfn>, as indicated by the <var>compression
    method field</var>, for a <span>file entry</span> are:</p>
  <dl>
    <dt><code>8</code></dt>
    <dd>Data is compressed using <span>[Deflate]</span>.</dd>
    <dt><code>0</code></dt>
    <dd>Data is <dfn class="external">Stored</dfn> (no compression), as defined in the <span>[ZIP]</span> specification.</dd>
  </dl>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> To ensure
    interoperability, compress <span title="file entry">file entries</span> in <span title="zip archive">Zip archives</span> with <span>[Deflate]</span> or <span>Stored</span> (no compression); other compression methods can result in in the
    Zip archive being treated as an <span>invalid widget package</span>. Of the valid compression methods, <span>[Deflate]</span> is the preferred compression method.</p>
  <h3>Version of Zip Needed to Extract a File Entry</h3>
  <p>The <dfn class="external"><var>version needed to extract</var></dfn> is the 2-byte
    sequence in the <var>local file header</var> of a <span>file entry</span> that
    indicates the minimum supported version of the <span>[ZIP]</span> specification
    needed to extract the <span>file data</span>.</p>
  <p>The <dfn>valid versions needed to extract</dfn> values are as follows. Each value
    is assigned one or more meanings by the <span>[ZIP]</span> specification:</p>
  <dl>
    <dt>1.0</dt>
    <dd>
      <p>Default value specified in the <span>[ZIP]</span> specification.</p>
    </dd>
    <dt>2.0</dt>
    <dd>
      <p>The file data is compressed using <span>[Deflate]</span>, or the file data is a folder, or the file has been encrypted using traditional PKWARE encryption.</p>
    </dd>
  </dl>
  <p class="note"><span class="notetitle">Note:</span> If the Zip archive has been
    encrypted using traditional PKWARE encryption, then the user agent will treat the Zip
    archive as an <span>invalid widget package</span> in <span>Step 2</span>.</p>
  <h3>Zip Relative Paths</h3>
  <p>A <dfn>Zip relative path</dfn> is the variable-length string derived from the <dfn class="external"><var>file name field</var></dfn> of the <var>local file
    header</var> of a <span>file entry</span>.</p>
  <p class="note"><span class="notetitle">Note:</span> A Zip relative path is said to
    be relative as it stores the string that represents file and folder names relative to
    where the Zip archive was created on a file system (e.g. <samp>images/bg.png</samp>),
    as opposed to storing an absolute path (e.g. <samp>c:\images\bg.png</samp>). The
    value of a Zip relative path will generally resemble the string value of a name of
    the file or folder(s) on the device on which the Zip archive was created, but with
    the exception of the path delimiter being a U+002F SOLIDUS &quot;/&quot; character. Note also
    that a Zip relative path is not a URI reference; Zip relative paths need to be
    converted to URI references before they can be used in context that make use of
    URIs. </p>
  <p>A <dfn>valid Zip relative path</dfn> is one that matches the production of <code>Zip-rel-path</code> in the following <span>[ABNF]</span>:</p>
  <pre>
<code><dfn>Zip-rel-path</dfn>   = [locale-folder] *folder-name file-name /
                 [locale-folder] 1*folder-name
<dfn>locale-folder</dfn>  = %x6C %x6F %x63 %x61 %x6C %x65 %x73
                 &quot;/&quot; lang-tag &quot;/&quot;
<dfn>folder-name</dfn>    = file-name &quot;/&quot;
<dfn>file-name</dfn>      = 1*allowed-char
<dfn>allowed-char</dfn>   = safe-char / zip-UTF8-char
<dfn>zip-UTF8-char</dfn>  = UTF8-2 / UTF8-3 / UTF8-4
<dfn>safe-char</dfn>      = ALPHA  / DIGIT / SP  / &quot;$&quot; / &quot;%&quot; / 
                 &quot;'&quot;    / &quot;-&quot;   / &quot;_&quot; / &quot;@&quot; / &quot;~&quot; /
                 &quot;(&quot;    / &quot;)&quot;   / &quot;&amp;&quot; / &quot;+&quot; / &quot;,&quot; /
                 &quot;=&quot;    / &quot;[&quot;   / &quot;]&quot; / &quot;.&quot;
<dfn>UTF8-2</dfn>         = %xC2-DF UTF8-tail
<dfn>UTF8-3</dfn>         = %xE0 %xA0-BF UTF8-tail / %xE1-EC 2( UTF8-tail ) /
                 %xED %x80-9F UTF8-tail / %xEE-EF 2( UTF8-tail )
<dfn>UTF8-4</dfn>         = %xF0 %x90-BF 2( UTF8-tail ) / %xF1-F3 3( UTF8-tail ) /
                 %xF4 %x80-8F 2( UTF8-tail )
<dfn>UTF8-tail</dfn>      = %x80-BF
<dfn>lang-tag</dfn>       = primary-subtag *( &quot;-&quot; subtag )<br /><dfn>primary-subtag</dfn> = 1*8low-alpha<br /><dfn>subtag </dfn>        = 1*8(alphanum)
<dfn>alphanum</dfn>       = low-alpha  / DIGIT<br /><dfn>low-alpha </dfn>     = %x61-7a
</code></pre>
  <p><dfn class="external"><code>ALPHA</code></dfn>, <dfn class=
    "external"><code>DIGIT</code></dfn>, and <dfn class="external"><code>SP</code></dfn> are defined in the <span>[ABNF]</span> specification (but essentially represent
    alphanumerical characters and the U+0020 SPACE code point respectively).</p>
  <h3>Interoperability Considerations</h3>
  <p><em>This section is non-normative.</em></p>
  <p>Some issues can arise with regards to character encodings of file names, the length of zip relative paths, and the use of certain strings as file names. This sections is intended to help authors avoid potential interoperability issues. </p>
  <div class="authorguide"><strong>Authoring Guideline</strong>
    <h4 class="no-toc">Paths Lengths</h4>
    <p><em>This section is non-normative.</em></p>
    <p>Authors need to be aware that having
      excessively long path names (e.g. over 120 characters) can also result in
      interoperability issues on some operating systems. This is because some operating systems have restrictions on how long a path length can be, so authors should try to keep the lengths of  paths at less than 250 bytes. In addition, Unicode code points may
      require more than one byte to encode a character, which can result in a path whose
      length is less than 250 characters but whose size is greater than 250 bytes! </p>
    <h4 class="no-toc">Character sets</h4>
    <p><em>This section is non-normative.</em></p>
    <p>Authors need to be aware that, at the time of publication, there are
      interoperability issues with regards to using characters outside the <code>safe-chars</code> range for file or folder names in a Zip archive when using
      Zipping tools bundled with operating systems. The interoperability issues have
      arisen from non-conforming implementations of the <span>[ZIP]</span> specification
      across operating systems: very few, if any, correctly support encoding file names
      in Unicode.</p>
    <p>In the case where the Zip relative path is encoded using <span>[UTF-8]</span>, the <span class="external">language encoding flag (EFS)</span> needs to be set.</p>
    <p>If an author chooses to use the <code>utf8-chars</code>, they need to thoroughly
      test their widgets on various platforms prior to distribution; otherwise it is
      suggested that authors restrict file and folder names to the <code>safe-chars</code> (characters in the US-ASCII range).</p>
    <h4 class="no-toc">File Names</h4>
    <p><em>This section is non-normative.</em></p>
    <p> Authors need to avoid using the <span>Zip forbidden
      characters</span> when naming the files used by a widget. These characters are reserved to
      maintain interoperability across various file systems and with <span>[URI]</span>s.</p>
    <p>Authors need to avoid using the following words as either a <span><code>folder</code></span> or
      a <span><code>file-name</code></span> in a <span>Zip relative path</span> as they
      are reserved by some operating systems (case-insensitive): CON, PRN, AUX, NUL,
      COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5,
      LPT6, LPT7, LPT8, LPT9, CLOCKS$. For example, the following names are ok:
      &quot;CON-tact.txt&quot;, &quot;printer.lpt1&quot;, &quot;DCOM1.pdf&quot;. However, &quot;com3.txt&quot; &quot;Lpt1&quot;, &quot;CoM9.gif&quot;
      
      would not be.</p>
    <p>In addition,  authors need to avoid having a &quot;.&quot; U+002E FULL STOP as the last character of a
      file or folder name as some operating systems will remove the character when the
      file is extracted from the Zip archive onto the device. Furthermore, avoid having
      the space character (<span>SP</span>) at the start or end of a file name; and take
      caution when using the &quot;+&quot; U+002B PLUS SIGN, as it might cause issues on some
      operating systems.</p>
  </div>
  <h2>Widget Packages</h2>
  <p>A <dfn>widget package</dfn> is  a <span>valid Zip
    archive</span> that contains the following:</p>
  <ul>
    <li>
      <p>One or more <span title="start file">start files</span>,  located at  the <span>root of the widget package</span> and/or at the root of <span title=
    "locale folder">locale folders</span> or referenced by a <code title="content element">content</code> element's <code title=
    "content src">src</code> attribute.</p>
    </li>
    <li>
      <p>One <span>configuration document</span>,
        located at the <span>root of the widget package</span>.</p>
    </li>
    <li>
      <p>Zero or more <span title="default icon">icons</span>, either located at the <span>root of the widget package</span> and/or at the root of <span title=
    "locale folder">locale folders</span> or referenced by the <code title=
    "icon element">icon</code> element's <code title="icon src">src</code> attribute.</p>
    </li>
    <li>
      <p>Zero or more <span>arbitrary</span> <span title="file">files</span> located
        either at the <span>root of the widget package</span> and/or in <span>arbitrary</span> <span title="folder">folders</span> or in <span title=
    "locale folder">locale folders</span>.</p>
    </li>
    <li>
      <p>Zero or more <span title="digital signature">digital signatures</span> located at
        the <span>root of the widget package.</span></p>
    </li>
  </ul>
  <p class="note"><span class="notetitle">Note:</span> See <span>step 1</span> - Acquire
    a Potential Zip Archive for instructions on how to process a widget package.</p>
  <h3>Invalid Widget Package</h3>
  <p>During the <span>steps for
    processing a widget package</span>, certain error conditions can result in a <span>Zip archive</span> being treated as an <span>invalid widget package</span>. An <dfn>invalid Widget package</dfn> is a condition whereby a Zip archive, or a file
    within the Zip archive, is deemed to be corrupt beyond recovery or is non-conforming
    to, or <span>unsupported</span> by, this specification in such a way that it would
    not be possible for the user agent to continue processing.</p>
  <h3>Files and Folders</h3>
  <p>The <dfn>root of the widget package</dfn> is the top-most path level of the <span>Zip archive</span>. The root of the widget package contains <span title=
  "file">files</span> and <span title="folder">folders</span>, some of which are <span>reserved</span> (see <span>reserved file names table</span>).</p>
  <p>A <dfn>file</dfn> is the decompressed physical representation of a <span>file
    entry</span> (i.e., a file extracted into its physical form as it was prior to being
    added to the <span>Zip archive</span>).</p>
  <p>A <dfn>folder</dfn> is a <span>file entry</span> whose <var>file name field</var> matches the production of <span><code>folder-name</code></span> in a <span>valid Zip relative path</span> (the last character of the <var>file name
    field</var> is a U+002F SOLIDUS) and whose <var>version needed to extract</var> is
    2.0.</p>
  <p>A <dfn>processable file</dfn> is a <span>file</span> that:</p>
  <ul>
    <li>
      <p>Exists within the <span>widget package</span>.</p>
    </li>
    <li>
      <p>When the <span>rule for verifying a file entry</span> is applied to the file, it
        returns <code>true</code>.</p>
    </li>
    <li>
      <p>Is of a <span>media type</span> <span>supported</span> by the user agent,
        determined applying the <span>rule for identifying the media type of a file</span> to the file in question. </p>
    </li>
  </ul>
  <h3>Reserved File and Folder Names</h3>
  <p>The <span>reserved file names table</span>, below, contains a list of file names
    that are <span>reserved</span> for some purpose by this specification. The first column
    of the reserved file names table contains a case-sensitive list of file names.
    The second column of the table denotes the purpose for which the file name is <span>reserved</span>.</p>
  <table >
    <caption>
    <dfn>Reserved File Names Table</dfn>
    </caption>
    <thead>
      <tr>
        <th>file name</th>
        <th>Type</th>
        <th>reserved for purpose</th>
      </tr>
      <tr>
        <td>config.xml</td>
        <td><span>file</span></td>
        <td><span>Configuration document</span></td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>icon.png</td>
        <td><span>file</span></td>
        <td><span>Default icon</span></td>
      </tr>
      <tr>
        <td>icon.gif</td>
        <td><span>file</span></td>
        <td><span>Default icon</span></td>
      </tr>
      <tr>
        <td>icon.jpg</td>
        <td><span>file</span></td>
        <td><span>Default icon</span></td>
      </tr>
      <tr>
        <td>icon.ico</td>
        <td><span>file</span></td>
        <td><span>Default icon</span></td>
      </tr>
      <tr>
        <td>icon.svg</td>
        <td><span>file</span></td>
        <td><span>Default icon</span></td>
      </tr>
      <tr>
        <td>index.html</td>
        <td><span>file</span></td>
        <td><span>Default start file</span></td>
      </tr>
      <tr>
        <td>index.htm</td>
        <td><span>file</span></td>
        <td><span>Default start file</span></td>
      </tr>
      <tr>
        <td>index.svg</td>
        <td><span>file</span></td>
        <td><span>Default start file</span></td>
      </tr>
      <tr>
        <td>index.xhtml</td>
        <td><span>file</span></td>
        <td><span>Default start file</span></td>
      </tr>
      <tr>
        <td>index.xht</td>
        <td><span>file</span></td>
        <td><span>Default start file</span></td>
      </tr>
      <tr>
        <td>locales</td>
        <td><span>folder</span></td>
        <td><span>Container for localized content</span></td>
      </tr>
    </tbody>
  </table>
  <p>Files named using the <a href=
  "http://www.w3.org/TR/widgets-digsig/#naming-convention-for-a-distributor-signature">naming
    convention for distributor signature</a> and the <a href=
  "http://www.w3.org/TR/widgets-digsig/#naming-convention-for-an-author-signature">naming
    convention for an author signature</a>, as defined in the <span>[Widgets-DigSig]</span> specification, are also reserved in this specification.</p>
  <div class="authorguide">
    <p><strong>Authoring Guideline:</strong> Authors are strongly encourage to package all
      files, except the reserved files and the  container for localized
      content, within a single subdirectory named, for instance, after the
      widget. This is to avoid unzipping several files into the end-user's
      current working directory. Future versions of this specification may
      include rules for locating index.html and config.xml within such
      directories.</p>
    <div class="example">
      <p>For example, best-practice for packaging a widget would look something
        like this:</p>
      <ul class="dir_listing">
        <li class="widget_icon"> <img alt="widget file: " height="16"
      src="images/widget.png" width="16" /> boat.wgt
          <ul>
            <li class="doc_icon"><img alt="file: " height="16"
        src="images/text.png" width="16" /> index.html</li>
            <li class="doc_icon"><img alt="configuration
        document: " height="16" src="images/config.png" width="16" /> config.xml</li>
            <li class="folder"><img alt="folder: " height="16"
        src="images/folder.png" width="16" />boat/
              <ul>
                <li class="folder"><img alt="folder: " height="16" src="images/folder.png"
      width="16" /> scripts/
                  <ul>
                    <li><img alt="script: " height="16" src="images/script.png"
        width="16" /> engine.js</li>
                  </ul>
                </li>
                <li class="folder"><img alt="folder: " height="16" src="images/folder.png"
          width="16" /> images/
                  <ul>
                    <li><img alt="icon: " height="16" src="images/image.png" width="16" /> header.png</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="folder"><img alt="folder: " height="16"
      src="images/folder.png" width="16" /> locales/
              <ul>
                <li class="folder"><img alt="folder: " height="16"
        src="images/folder.png" width="16" /> en-gb/
                  <ul>
                    <li><img alt="folder: " height="16" src="images/folder.png"
          width="16" /> boat/
                      <ul>
                        <li class="folder"><img alt="folder: " height="16" src="images/folder.png"
            width="16" />images/
                          <ul>
                            <li><img alt="icon: " height="16" src="images/image.png"
              width="16" /> hearder.png</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <h3>Digital Signatures</h3>
  <p>A <span>widget package</span> contains a <dfn>digital signature</dfn>, and hence is <dfn>digitally signed</dfn>, if the widget package contains one or more <span title=
  "file">files</span> that conform to the <span>[Widgets-DigSig]</span> specification. </p>
  <h3>Start Files</h3>
  <p>A <dfn>start file</dfn> designates a <span>file</span> from the widget package to be
    loaded by the user agent when it instantiates the widget. This specification defines
    two kinds of start file: <span>custom start file</span> and <span>default start
    file</span>.</p>
  <h4>Custom Start File</h4>
  <p>A <dfn>custom start file</dfn> is a <span>processable file</span> inside the <span>widget package</span> identified by a <code title="content element">content</code> element's <code title=
  "content src">src</code> attribute.</p>
  <h4>Default Start Files</h4>
  <p>A <dfn>default start file</dfn> is a <span>reserved</span> <span>start file</span> at the <span>root of the widget package</span> or  at the root of a <span>locale folder</span> whose file name case-sensitively matches a file name given in the file name
    column of the <span>default start files table</span>, and whose <span>media type</span> matches the <span>media type</span> given in the media type column of the table.</p>
  <p>It is <em class="ct">optional</em> for a <span class="product-ua">user agent</span> to <span title=
  "supported">support</span> the <span title="media type">media types</span> listed in
    the <span>default start files table</span>.</p>
  <p id="ta-RRZxvvTFHx">If a user agent encounters a <span>file</span> matching a file name given in the
    file name column of the <span>default start files table</span> in an <span>arbitrary</span> <span>folder</span>, then <span class="product-ua">user agent</span> <em class="ct">must</em> treat that file as an <span>arbitrary</span> file.</p>
  <p class="example">For example,
    &quot;<code>foo/bar/index.html</code>&quot; would be treated as an <span>arbitrary</span> <span>file</span>.</p>
  <table>
    <caption>
    <dfn>Default Start Files Table</dfn>
    </caption>
    <tr>
      <th scope="col">file name</th>
      <th scope="col">media type</th>
    </tr>
    <tr>
      <td>index.htm</td>
      <td>text/html</td>
    </tr>
    <tr>
      <td>index.html</td>
      <td>text/html</td>
    </tr>
    <tr>
      <td>index.svg</td>
      <td>image/svg+xml</td>
    </tr>
    <tr>
      <td>index.xhtml</td>
      <td>application/xhtml+xml</td>
    </tr>
    <tr>
      <td>index.xht</td>
      <td>application/xhtml+xml</td>
    </tr>
  </table>
  <p class="note"><span class="notetitle">Note:</span> See <span>Step 8</span> for
    instructions on finding a <span>default start file</span>.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> Always include at least
    one <span>start file</span> in a widget package.</p>
  <h3>Icons</h3>
  <p>An <dfn>icon</dfn> is a <span>file</span> that is used
    to represent the widget in various application contexts (e.g. the icon that the user
    activates to instantiate a widget, or an icon in a dock or task bar or some other visual
    context). The icon is intended to help users of visual browsers to recognize the widget
    at a glance. There are two kinds of icons defined by this specification, <span title="custom
      icon">custom
    icons</span> and <span title="default icon">default icons</span>.</p>
  <h4>Custom Icons</h4>
  <p>A <dfn>custom icon</dfn> is an <span>icon</span> explicitly declared by an author via an <code title="icon element">icon</code> element in a <span>configuration document</span>. A <span>custom icon</span> can be  located at the <span>root of the widget
    package</span>, or at the root of a <span>locale folder</span>, or in an <span>arbitrary</span> <span>folder</span>.</p>
  <h4>Default Icons</h4>
  <p>A <dfn>default icon</dfn> is a <span>reserved</span> <span>icon</span>, either at the <span>root of the widget package</span> or at the root of a <span>locale
    folder</span>, whose file
    name case-sensitively and exactly matches a file name given in the file name column of
    the <span>default icons table</span>.</p>
  <table>
    <caption>
    <dfn>Default Icons Table</dfn>
    </caption>
    <tr>
      <th scope="col">file name</th>
      <th scope="col">media type</th>
    </tr>
    <tr>
      <td>icon.svg</td>
      <td>image/svg+xml</td>
    </tr>
    <tr>
      <td>icon.ico</td>
      <td>image/vnd.microsoft.icon</td>
    </tr>
    <tr>
      <td>icon.png</td>
      <td>image/png</td>
    </tr>
    <tr>
      <td>icon.gif</td>
      <td>image/gif</td>
    </tr>
    <tr>
      <td>icon.jpg</td>
      <td>image/jpeg</td>
    </tr>
  </table>
  <p>It is <em class="ct">optional</em> for a <span>user agent</span> to <span title="supported">support</span> the <span title="media type">media types</span> listed in the <span>default icons table</span>.</p>
  <h3>Media Type</h3>
  <p>The <dfn>valid widget media type</dfn> is the string <code>application/widget</code>.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> If the protocol over
    which the <span>widget package</span> is transferred <span title=
    "supported">supports</span> the [MIME] specification (e.g. <span>[HTTP]</span>), then make sure that the widget
    is labeled with an <code>application/widget</code> media type. Failure to correctly
    label a <span>widget package</span> can result in the widget package being treated as an <span>invalid widget package</span>.</p>
  <h3>File Extension</h3>
  <div>
    <p>A <dfn>widget file extension</dfn> is the text string that case-insensitively
      matches the string &quot;<code>.wgt</code>&quot;  (e.g. <code>.wgt</code>, <code>.WGt</code>, <code>.WgT</code>, etc. are all valid). </p>
    <p class="example">For example in <code>widget.WGT</code>, the <code>&quot;.WGT</code>&quot; component is the file extension. </p>
    <p class="authorguide"><strong>Authoring Guidelines:</strong> If it is anticipated
      that the widget will be distributed by means lacking MIME support, then include the
      widget file extension. The widget file extension is not necessary if the widget
      package is labeled as a <code>application/widget</code> when served over HTTP. The <span>widget file extension</span> is required for widget packages on systems where it is customary for file names to include a file extension that symbolizes (or is associated with) a <span>media
      type</span>.</p>
  </div>
  <h2>Configuration Document</h2>
  <p>A <dfn>configuration document</dfn> is an <span>[XML]</span> document that has a <code title="widget element">widget</code> element at its root that is in the <span>widget namespace</span>. A widget package has exactly
    one configuration document located at the <span>root
    of the widget package</span>.</p>
  <p class="note"><span class="notetitle">Note:</span> Please see <span>Step 7</span> for
    details of how the elements of the <span>configuration document</span> are processed by
    a user agent.</p>
  <p>A <dfn>valid configuration document file name</dfn> is the string <code>config.xml</code>. </p>
  <p id="ta-dxzVDWpaWg">A <span class="product-ua">user agent</span> <em class="ct">must</em> treat any <span>file</span> in an <span>arbitrary</span> <span>folder</span> or <span title="locale folder">locale folders</span> that uses the
    
    file name <code>config.xml</code> as an <span>arbitrary</span> file.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> Be sure to always include
    a <span>configuration document</span> at the <span>root of the widget package</span> and that the <code>config.xml</code> file name is in lowercase form. To ensure interoperability, encode the <span>configuration document</span> as <span>[UTF-8]</span>.</p>
  <h3>Example Configuration Document</h3>
  <p>The following is an example of a typical <span>configuration document</span>:</p>
  <div class="example">
    <pre>
<code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;widget xmlns       = &quot;http://www.w3.org/ns/widgets&quot;
        id          = &quot;http://example.org/exampleWidget&quot;
        version     = &quot;2.0 Beta&quot;
        height      = &quot;200&quot;
        width       = &quot;200&quot;
        viewmodes   = &quot;fullscreen&quot;&gt;
 
  &lt;name short=&quot;Example 2.0&quot;&gt;
    The example Widget!
  &lt;/name&gt;

  &lt;feature name=&quot;http://example.com/camera&quot;&gt;
    &lt;param name=&quot;autofocus&quot; value=&quot;true&quot;/&gt;

  &lt;/feature&gt;

  &lt;preference name     = &quot;apikey&quot;
              value    = &quot;ea31ad3a23fd2f&quot;
              readonly = &quot;true&quot; /&gt;

  &lt;description&gt;
    A sample widget to demonstrate some of the possibilities.
  &lt;/description&gt;

  &lt;author href  = &quot;http://foo-bar.example.org/&quot;
          email = &quot;foo-bar@example.org&quot;&gt;Foo Bar Corp&lt;/author&gt;

  &lt;icon src=&quot;icons/example.png&quot;/&gt;
  &lt;icon src=&quot;icons/boo.png&quot;/&gt;
  &lt;content src=&quot;myWidget.html&quot;/&gt;

  &lt;license&gt;
Example license (based on MIT License)
Copyright (c) 2008 The Foo Bar Corp.
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
INSULT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  &lt;/license&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <p class="note"><span class="notetitle">Note:</span> Implementers are encouraged to
    expose relevant information provided by the <span>configuration document</span> to the
    user. Having &quot;visual metadata&quot; encourages authors to make full use of the configuration
    document format. See <span>Step 7</span> for instructions on how to process a
    configuration document.</p>
  <div  class="authorguide">
    <p><strong>Authoring Guidelines:</strong> The only mandatory element in a configuration document  is the <code title="widget element">widget</code> element. All other elements and their respective attributes are optional. The following example shows the smallest possible configuration document that a  user agent will be able to process. The reason to include this sole element is to explicitly inform a user agent or conformance checker that this zip file  attempts to conform to this specification. </p>
    <div class="example">
      <pre><code>

&lt;!-- example of the smallest possible conforming configuration document --&gt;
&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;/&gt;</code></pre>
    </div>
  </div>
  <h3>Namespace</h3>
  <p>The <dfn>widget namespace</dfn> URI for a <span>configuration document</span> is <code>http://www.w3.org/ns/widgets</code> <span>[XMLNS]</span>.</p>
  <p>No provision is made for an explicit version number in this specification. If a future version of this specification requires explicit versioning of the document format, a different namespace will be used.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> Be sure to declare
    the widget namespace as part of the <code title="widget element">widget</code> element. If the namespace is absent, then the widget will be treated by the user agent as an <span>invalid widget package</span>.</p>
  <h3>Proprietary Extensions</h3>
  <p><em>This section is non-normative</em>.</p>
  <p> Implementers or authors intending to extend the <span>configuration document</span> format with
    their own <span>[XML]</span> elements and attributes (or those defined in other
    specifications) can do so by using a separate <span>[XMLNS]</span> namespace. This specification does not define a model for processing <span>[XML]</span> elements outside the <span>widget namespace</span> (they are simply <span title="ignore">ignored</span> during processing).</p>
  <div class="example">
    <p>Example of extending the <span>configuration document</span> format:</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;
   <strong>xmlns:ex=&quot;http://example.org/&quot;</strong>&gt;
       &lt;icon src=&quot;idle.png&quot; <strong> ex:role=&quot;inactive&quot;/&gt;

       </strong>&lt;icon src=&quot;big.png&quot; <strong>ex:role=&quot;big&quot;</strong>/&gt;
       <strong>&lt;ex:datasource&gt;{'a':'b','c':'d'}&lt;/ex:datasource&gt;</strong>

       &lt;content src=&quot;widget.html&quot;/&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <h3>Types of Attributes</h3>
  <p>This section defines the different <dfn>attribute types</dfn> used in the <span>configuration document</span> and what constitutes valid values for those
    attribute types. </p>
  <p>An attribute is <dfn>invalid</dfn> if its value does not conform to its said <span title="attribute types">attribute type</span>; that is, if the value of the
    attribute is <span>in error</span> given the processing rules for that type of
    attribute. </p>
  <dl>
    <dt><dfn>Boolean attribute</dfn></dt>
    <dd>
      <p>A boolean attribute is a <span>keyword attribute</span> that can only be used
        with a valid boolean value. A <dfn>valid boolean value</dfn> is a <span>keyword</span> that
        case-sensitively matches <code>true</code> or <code>false</code>. Unless specified
        otherwise, the default behavior, which is used when the attribute is omitted or has
        a value other than the two allowed values, is <code>false</code>. The way a user
        agent interprets a boolean attribute is defined as part of an attribute's
        definition (see, for example, the <code title="feature element">feature</code> element's <code title="feature required">required</code> attribute). </p>
    </dd>
    <dt><dfn>String attribute</dfn></dt>
    <dd>
      <p>The value of a string attribute is any string that conforms to <span>[XML]</span> as a valid string for an XML attribute. The purpose of this attribute type is to classify strings that are not affected by the <code title="dir">dir</code> attribute, such as the <code title="author email">email</code> attribute (i.e., these attributes will not treated as <span title="Displayable-string attribute">displayable-strings</span> during <span>Step 7</span>). </p>
    </dd>
    <dt><dfn>Displayable-string attribute</dfn></dt>
    <dd>
      <p>An attribute whose primary purpose is to convey human readable information, such as the <code title="name element">name</code> element's <code title="name short">short</code> attribute and the widget element's <code title="widget version">version</code> attribute. </p>
    </dd>
    <dt><dfn>Keyword attribute</dfn></dt>
    <dd>
      <p>A <dfn>keyword</dfn> is a string that is <span>reserved</span> for the purpose
        of this specification. The value of a keyword attribute is a <span>keyword</span> that is one of a finite set specified in the attribute's definition in the case
        given in this specification. </p>
    </dd>
    <dt><dfn>Keyword list attribute</dfn></dt>
    <dd>
      <p>An attribute defined as taking one or more <span title="keyword">keywords</span> as a value, which are separated by <span>space characters</span>. </p>
    </dd>
    <dt><dfn>Media type attribute</dfn></dt>
    <dd>
      <p>An attribute whose value is defined as containing a valid media type. A <dfn>valid media type</dfn> is string that matches the production for <code>valid-MIME-type</code> in the following <span>[ABNF]</span>:</p>
      <pre>

<code><dfn>valid-MIME-type</dfn> = type &quot;/&quot; subtype *(&quot;;&quot; parameter)</code></pre>
      <p>The <dfn class="external" title="mime type-part"><code>type</code></dfn>, <dfn title="mime subtype-part" class="external"><code>subtype</code></dfn>, and <dfn title="mime parameter"
      class="external"><code>parameter</code></dfn> tokens are defined in the <span>[MIME]</span> specification.</p>
    </dd>
    <dt><dfn>Language attribute</dfn></dt>
    <dd>
      <p>An attribute whose value is defined as containing a <dfn>valid language tag</dfn> (see the <a href=
        "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
        Registry</a> for an authoritative list of possible values, see also the <a href="http://www.iso.org/iso/country_codes/iso_3166_code_lists/english_country_names_and_code_elements.htm">Maintenance Agency for ISO 3166 country codes</a>). A valid language tag is a string that conforms to the production of a <code>Language-Tag</code>, as defined in the <span>[BCP47]</span> specification.</p>
    </dd>
    <dt><dfn>Numeric attribute</dfn></dt>
    <dd>
      <p>The value of a numeric attribute is a string containing a valid non-negative
        integer. A <dfn>valid non-negative integer</dfn> is a string that consists of one
        or more code points in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).
        For example, the strings &quot;002&quot;, &quot;323&quot;, &quot;23214&quot;, and so on. </p>
    </dd>
    <dt><dfn>Path attribute</dfn></dt>
    <dd>
      <p>An attribute defined as containing a valid path. A <dfn id="valid-path">valid
        path</dfn> is one that matches the production of a <code>Zip-rel-path</code> or a <code>Zip-abs-path</code>. </p>
    </dd>
    <dd>
      <p class="authorguide"><strong>Authoring Guidelines:</strong> A valid path is not a URI: a valid path represents a
        hierarchical path to a file inside a <span>Zip archive</span>, which exactly matches the value of a <var>file name
        field</var> of a <var>local file header</var> of a <span>file entry</span>.      This means that valid paths need not be URL encoded.</p>
    </dd>
    <dt><dfn>IRI attribute</dfn></dt>
    <dd>
      <p>An attribute defined as containing a valid IRI. A <dfn>valid IRI</dfn> is one
        that matches the <code>IRI</code> token of the <span>[IRI]</span> specification. </p>
    </dd>
    <dd>
      <p class=" authorguide"><strong>Authoring Guidelines:</strong> Because of the risk of confusion between IRIs that would be equivalent if dereferenced, the use of %-escaped characters in feature names is strongly discouraged. </p>
    </dd>
    <dt><dfn>Version attribute</dfn></dt>
    <dd>
      <p>A <span>displayable-string attribute</span> whose value is any arbitrary string value (possibly empty) within the constraints allowed for <span>[XML]</span> attributes. This
        specification does not mandate any specific format, semantics, or special
        processing rule for the format of a <span>version attribute</span>. </p>
    </dd>
    <dd class="authorguide">
      <p><strong>Authoring Guidelines:</strong> For the purpose of this specification, the
        structure of version tags has no semantics; they are just treated as arbitrary
        strings (e.g. '1.0' is not less than '2.0', but is simply different). However,
        for the sake of consistency, one can choose to use the following <span>[ABNF]</span>:</p>
      <pre>
<code><dfn>rec-version-tag</dfn> = 1*DIGIT &quot;.&quot;  1*DIGIT [ &quot;.&quot; 1*DIGIT]<br />                  *[ 1*ALPHA / SP / 1*DIGIT ]</code></pre>
      <dl class="example">
        <dt>Example version tags:</dt>
        <dd>
          <ul>
            <li><code>Version 1.0 Beta</code></li>
            <li><code>1.0 RC1</code></li>
            <li><code>1.0-Build/1580</code></li>
            <li><code>Joey the dog [5.1.2100]</code></li>
          </ul>
        </dd>
        <dt>Example of <code>rec-version-tag:</code></dt>
        <dd>
          <ul>
            <li><code>1.0</code></li>
            <li><code>1.10.1</code> <code>beta1</code></li>
            <li><code>1.02.12 RC1</code></li>
          </ul>
        </dd>
      </dl>
    </dd>
  </dl>
  <h3>Global Attributes</h3>
  <p>This section describes the behavior and expected usage of other relevant attributes
    that are part of the <span>[XML]</span> specification and this specification. In this specification, these attributes are referred to as <dfn>global attributes</dfn> because  they can be used on any element in a <span>configuration document</span>. </p>
  <p>Although <span>global attributes</span> can be used on any element in this specification, they sometimes have no effect on the element on which they are used. For example, applying <code>dir</code> attribute on an <code title="icon element">icon</code> element will have no effect on the <code title="icon element">icon</code> elements or any of its attributes. What effect specifying a global attribute has on an elements is determined by <span>Step 7</span> of this specification.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> Although it is optional for an author to use any global attributes, their usage is recommended when appropriate (e.g., when  declaring the language will help with legibility and when directional information will assist the user agent render text correctly). </p>
  <h4>The <dfn><code>xml:lang</code></dfn> Attribute</h4>
  <p>A <span>language  attribute</span> that specifies, through a <span>language
    tag</span>, the language of the contents and attribute values of XML elements (see the <a href=
        "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
    Registry</a>). The <span>[XML]</span> specification specifies the <code>xml:lang</code> attribute and its influence on  child nodes. </p>
  <div class="authorguide">
    <p><strong>Authoring Guidelines:</strong> Although <span>[BCP47]</span> recommends that language tags be casefolded in a particular way for presentation, case has no meaning in a language tag. As a reminder to authors that   user-agents map all language tags to lowercase, all examples in this document use lowercase. See also <span>folder-based localization</span>, which also requires authors to use  language tags in lowercase form as the names of folders.</p>
    <p>Avoid subtags from the <a href=
        "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
      Registry</a> marked as deprecated, grandfathered, or redundant. The intended
      purpose of the <code>xml:lang</code> attribute is to declare the primary language
      of an element, its attributes, and its descendant nodes; as such, it has no implication with regards to the directionality of the text in the user agent. To specify the directionality of text, see the <code>dir</code> attribute. </p>
  </div>
  <h4>The <dfn><code>dir</code></dfn> Attribute</h4>
  <p>A <span>keyword attribute</span> used  to specify   the directionality in which human-readable text is to be represented by a user agent (e.g., the text content of the <code title="name element">name</code> element, the <code title="description element">description</code> element, and the <code title="license element">license</code> element).   The directionality set by the <code>dir</code> attribute applies to the text content and  any <span title="displayable-string attribute">displayable string</span> attributes of  the element where it is used, and to  child elements in its content unless overridden with another instance of <code>dir</code> (i.e., in this specification, the <code>dir</code> attribute only affects the <code title="name short">short</code> attribute of the <code title="name element">name</code> element and to the <code title="widget version">version</code> attribute of the <code title="widget element">widget</code> element). </p>
  <p>The possible value of a <code>dir</code> attribute is one of the <dfn>valid directional  indicators</dfn>:</p>
  <dl>
    <dt><code><dfn>ltr</dfn></code></dt>
    <dd>
      <p>Left-to-right text.  Request that the Unicode <span>[BIDI]</span> algorithm treat characters within an element  as embedded left-to-right.</p>
    </dd>
    <dt><code><dfn>rtl</dfn></code></dt>
    <dd>
      <p>Right-to-left text.  Request that the Unicode <span>[BIDI]</span> algorithm treat characters within an element  as embedded right-to-left.</p>
    </dd>
    <dt><code><dfn>lro</dfn></code></dt>
    <dd>
      <p> Left-to-right override. Forces the Unicode <span>[BIDI]</span> algorithm to treat characters within an element as strong left-to-right characters.</p>
    </dd>
    <dt><code><dfn>rlo</dfn></code></dt>
    <dd>
      <p>Right-to-left override. Forces the Unicode <span>[BIDI]</span> algorithm to treat characters within an element as strong right-to-left characters.</p>
    </dd>
  </dl>
  <p class="note"><span class="notetitle">Note:</span>For security reasons, implementations intending to display <abbr title="Internationalized Resource Identifiers">IRIs</abbr> and <abbr title="Internationalized domain name">IDNA</abbr> addresses found in the configuration document are strongly encouraged to follow the security advice given in <span>[UTR36]</span>. This could include, for example,  behaving as if the <code>dir</code> attribute had no effect on any <span title="IRI attribute">IRI attributes</span>, <span title="path attribute">path attributes</span>, and the <code title="author element">author</code> element's <code title="author email">email</code> attribute.</p>
  <p>The base direction of a <code>dir</code> attribute is either set explicitly by the nearest parent element that uses the <code>dir</code> attribute; or, in the absence of such an attribute, the base direction is inherited from the <dfn>default direction of the document</dfn>, which is left-to-right (&quot;<code>ltr</code>&quot;). </p>
  <h4>Examples of Usage</h4>
  <div class="example">
    <p>The following  example demonstrates the <code>dir</code> attribute being  applied globally to a <span>configuration document</span>. </p>
    <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot; dir=&quot;rtl&quot; xml:lang=&quot;fa&quot;&gt;
&lt;name short=&quot;آب و هوا&quot;&gt;&#x200E;
آب و هوا برنامه&lt;/name&gt;
   &lt;description&gt; 
<span dir="rtl">این نرم افزار به شما اجازه می دهد تا برای دیدن آب و هوا در منطقه محلی تان.</span>
   &lt;/description&gt;
&lt;/widget&gt;</code></pre>
    <p>The following example shows the <code>dir</code> attribute applied to <span>localized content</span>. </p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;

   &lt;name short=&quot;Weather&quot;&gt;
    Weather Application
   &lt;/name&gt;

   &lt;name short=&quot;<span dir="rtl">آب و هوا</span>&quot; xml:lang=&quot;fa&quot; dir=&quot;rtl&quot;&gt; 
<span dir="rtl">    آب و هوا برنامه
   </span>&lt;/name&gt;

&lt;/widget&gt;</code></pre>
    <p>The following example shows the <code>dir</code> attribute used with mixed language content: </p>
    <pre>
<code>
&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  &lt;name short=&quot;Weather&quot;&gt;
   Weather! a totally awesome application!
  &lt;/name&gt;

  &lt;name short=&quot;آب و هوا&quot; xml:lang=&quot;fa&quot; dir=&quot;rtl&quot;&gt;
  &lt;span dir=&quot;ltr&quot; xml:lang=&quot;en&quot;&gt;Weather!&lt;/span&gt; برنامه واقعا بزرگ
  &lt;/name&gt;

&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="widget element"><code>widget</code></dfn> Element and its Attributes</h3>
  <p>The <code title="widget element">widget</code> element serves as a container for the
    other elements of the <span>configuration document</span>.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd> The <code title="widget element">widget</code> element is the root element of a <span>configuration document</span>. </dd>
    <dt>Occurrences:</dt>
    <dd> Exactly one, at the root element of the <span>[XML]</span> document. </dd>
    <dt>Expected children (in any order):</dt>
    <dd><code title="name element">name</code>: zero or more (<span>one element is
      allowed per language</span>).</dd>
    <dd><code title="description element">description</code>: zero or more (<span>one
      element is allowed per language</span>).</dd>
    <dd><code title="author element">author</code>: zero or one.</dd>
    <dd><code title="license element">license</code>: zero or more (<span>one element is
      allowed per language</span>).</dd>
    <dd><code title="icon element">icon</code>: zero or more.</dd>
    <dd><code title="content element">content</code>: zero or one.</dd>
    <dd><code title="feature element">feature</code>: zero or more.</dd>
    <dd><code title="preference element">preference</code>: zero or more.</dd>
    <dt>Localizable via xml:lang:</dt>
    <dd> No. Inheritance of the value of this attribute by <code title="author element">author</code>, <code title="preference element">preference</code>, <code title="icon element">icon</code>, and <code title="content element">content</code> will have no effect during processing in <span>Step 7</span>.</dd>
    <dt>Attributes:</dt>
    <dd> <span title="global attributes">Global attributes</span>, <code title="widget id">id</code>, <code title="widget version">version</code>, <code title="widget height">height</code>, <code title="widget width">width</code>, <code title="widget viewmodes">viewmodes</code>. </dd>
  </dl>
  <h4>The <code><dfn title="widget id">id</dfn></code> Attribute</h4>
  <p>An <span>IRI attribute</span> that denotes an identifier for the widget. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget id">id</code> attribute with a <code title="widget element">widget</code> element.</p>
  <h4>The <code><dfn title="widget-element version">version</dfn></code> Attribute</h4>
  <p>A <span>version attribute</span> that specifies the version of the widget. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget-element version">version</code> attribute with a <code title="widget element">widget</code> element.</p>
  <h4>The <code><dfn title="widget-element height">height</dfn></code> Attribute</h4>
  <p>A <span title="valid non-negative integer">numeric attribute</span> greater than <code>0</code> that indicates the preferred <span>viewport</span> height of the
    instantiated <span>custom start file</span> in <a href=
    "http://www.w3.org/TR/2008/REC-CSS2-20080411/syndata.html#length-units">CSS pixels</a> <span>[CSS]</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget-element height">height</code> attribute with a <code title="widget element">widget</code> element.</p>
  <h4>The <code><dfn title="widget-element width">width</dfn></code> Attribute</h4>
  <p>A <span title="valid non-negative integer">numeric attribute</span> greater than <code>0</code> that indicates the preferred <span>viewport</span> width of the
    instantiated <span>custom start file</span> in <a href=
    "http://www.w3.org/TR/2008/REC-CSS2-20080411/syndata.html#length-units">CSS pixels</a> <span>[CSS]</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget-element width">width</code> attribute with a <code title="widget element">widget</code> element. </p>
  <h4>The <code><dfn title="widget viewmodes">viewmodes</dfn></code> Attribute</h4>
  <p>A <span>keyword list attribute</span> that denotes  the author's
    preferred view mode, followed by the next most preferred view mode and so forth. When the attribute is missing, or is left empty, it implies that the author expects the user agent to select an appropriate viewmode for the widget.</p>
  <p>The concept of a <dfn class="external">viewport</dfn> is defined in <span>[CSS]</span>, but is essentially a window or other viewing area on the screen (see section <a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visuren.html#q2">9.1.1 The viewport</a> of <span>[CSS]</span>). The concept of a <dfn class="external">view mode</dfn> is defined in the <span>[View-Modes]</span> specification.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget viewmodes">viewmodes</code> attribute with a <code title="widget element">widget</code> element.</p>
  <h4>The <code title="widget defaultlocale"><dfn title="widget defaultlocale">defaultlocale</dfn></code> attribute</h4>
  <p>A <span>language  attribute</span> that specifies, through a <span>language
    tag</span>, the author's preferred locale for the widget. Its intended use is to provide a fallback in case the user agent cannot match any of the widget's <span>localized content</span> to the <var>user agent locales</var> list or in case the author has not provided any unlocalized content. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="widget id">defaultlocale</code> attribute with a <code title="widget element">widget</code> element. </p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>The following example shows how the <code title="widget element">widget</code> element can be used.</p>
    <pre>
<code><strong>&lt;widget xmlns     = &quot;http://www.w3.org/ns/widgets&quot;
    id        = &quot;http://example.org/exampleWidget&quot;
    version   = &quot;2.0 Beta&quot;
    height    = &quot;200&quot;
    width     = &quot;200&quot;
    viewmodes = &quot;windowed floating&quot;/</strong><strong title="">&gt;</strong></code></pre>
  </div>
  <h4>Example of Usage of the <code title="widget defaultlocale">defaultlocale</code> attribute </h4>
  <div class="example">
    <p>The following example shows how the <code title="widget element">widget</code> element's <code title="widget defaultlocale">defaultlocale</code> attribute can be used: </p>
    <pre>
&lt;widget xmlns = &quot;http://www.w3.org/ns/widgets&quot;
        <strong>defaultlocale</strong> = &quot;en-us&quot;&gt;

<code>   &lt;name short=&quot;Weather&quot; xml:lang=&quot;en-us&quot;&gt;
    The Ultimate Weather Widget
   &lt;/name&gt;

   &lt;name short=&quot;Boletim&quot; xml:lang=&quot;pt&quot;&gt;
    Boletim Metereol&oacute;gico
   &lt;/name&gt;</code>

&lt;/widget&gt;</pre>
  </div>
  <h3>The <dfn title="name element"><code>name</code></dfn> Element and its Attributes</h3>
  <p>The <code title="name element">name</code> element represents the full
    human-readable name for a <span>widget</span> that is used, for example, in an
    application menu or in other contexts.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>In a <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Any.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more (<span>one element is allowed per language</span>).</dd>
    <dt>Expected children:</dt>
    <dd><code title="span element">span</code>: zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>Yes.</dd>
    <dd>
      <p class="authorguide"><strong>Authoring Guidelines:</strong> The value of the <code>xml:lang</code> attribute needs to be unique for any subsequent element of this type.</p>
    </dd>
    <dt>Attributes:</dt>
    <dd> <span title="global attributes">Global attributes</span>, <code title="name short">short</code>.</dd>
  </dl>
  <h4>The <dfn title="name short"><code title="name short">short</code></dfn> Attribute</h4>
  <p>A <span>displayable-string attribute</span> intended to represent a condensed name for a widget (e.g., a name that could be used in context were only limited space is available, such as underneath an icon). </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="name short">short</code> attribute with an <code title="name element">name</code> element.</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>The following example shows the usage of the <code title=
    "name element">name</code> element.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;

   <strong>&lt;name short=&quot;Weather&quot;&gt;
    The Ultimate Weather Widget
   &lt;/name&gt;

   &lt;name short=&quot;Boletim&quot; xml:lang=&quot;pt&quot;&gt;
    Boletim Metereol&oacute;gico
   &lt;/name&gt;</strong>

&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="description element"><code>description</code></dfn> Element and its Attributes</h3>
  <p>The <code title="description element">description</code> element represents a
    human-readable description of the widget.</p>
  <!-- metadata element -->
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>In a <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Any.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more (<span>one element is allowed per language</span>).</dd>
    <dt>Expected children:</dt>
    <dd><code title="span element">span</code>: zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>Yes.</dd>
    <dd>
      <p class="authorguide"><strong>Authoring Guidelines:</strong> The value of the <code>xml:lang</code> attribute needs to be unique for any subsequent element of this type. If two or more elements with the same xml:lang attribute value are encountered, the user agent will <span>ignore</span> all but the matching first element. See <span>Step 7</span> for more details. </p>
    </dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>.</dd>
  </dl>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>An example usage of the description element.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  &lt;name&gt;Dahut Chaser&lt;/name&gt;
  <strong>&lt;description&gt;
Combining the latest weather info with your GPS position,
this widget alerts you of any significant dahut activity in your
area. When a big one walks by, the widget plots the best route on a map based
on the dahut's trajectory so you can chase it! With support for
built-in cameras, you can quickly upload all the Alpine action to
your blog or to the insane dahut chaser web site! Awesome!
  &lt;/description&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="author element"><code title="">author</code></dfn> Element and its Attributes</h3>
  <p>An <code title="author element">author</code> element represents people or an organization attributed with
    the creation of the widget.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Any.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or one.</dd>
    <dt>Expected children:</dt>
    <dd><code title="span element">span</code>: zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No. Only the first instance of this element in <a href=
    "http://www.w3.org/TR/xpath/#dt-document-order">document order</a> will be used,
      regardless of the value of <code>xml:lang</code> (if any).</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="author-element href">href</code>, <code title="author email">email</code>.</dd>
  </dl>
  <h4>The <code><dfn title="author-element href">href</dfn></code> Attribute</h4>
  <p>An <span>IRI attribute</span> whose value represents an IRI that the author
    associates with himself or herself (e.g., a homepage, a profile on a social network,
    etc.). </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="author-element href">href</code> attribute with an <code title="author element">author</code> element.</p>
  <h4>The <code><dfn title="author email">email</dfn></code> Attribute</h4>
  <p>A <span>string attribute</span> that represents an email address associated with the author. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="author email">email</code> attribute with an <code title="author element">author</code> element.</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>The following example shows the expected usage of the <code title="author element">author</code> element.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
    &lt;name&gt;Caf&eacute; Finder&lt;/name&gt;
    <strong>&lt;author href  = &quot;http://dahut.example.org/developers/&quot;
            email = &quot;cafefinder@example.org&quot;&gt;
      Mr. Jo and Julia Bacalhau
    &lt;/author&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="license element"><code>license</code></dfn> Element and its Attributes</h3>
  <p>The <code title="license element">license</code> element represents a <dfn>software
    license</dfn>, which includes, for example, a usage agreement, redistribution
    statement, and/or a copyright license terms under which the content of the widget
    package is provided.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Any.</dd>
    <dt>Expected children:</dt>
    <dd><code title="span element">span</code>: zero or more.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more (<span>one element is allowed per language</span>).</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>Yes.</dd>
    <dd>
      <p class="authorguide"><strong>Authoring Guidelines:</strong> The value of the <code>xml:lang</code> attribute needs to be unique for any subsequent element of this type. The content of localized <code title="license element">license</code> elements shouldn't be used to present different versions of a license, just translations of the same license.</p>
    </dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="license href">href</code>. </dd>
  </dl>
  <h4>The <dfn title="license href"><code>href</code></dfn> Attribute</h4>
  <p>A <span>valid IRI</span> or a <span>valid path</span> that points to a
    representation of a software and/or content license. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="license href">href</code> attribute with a <code title="license element">license</code> element.</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example shows the expected usage of the <code title=
    "license element">license</code> element's <code title="license href">href</code> attribute.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  <strong>&lt;license href=&quot;http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231&quot;&gt;
Distributed under the W3C Software License.
  &lt;/license&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <div class="example">
    <p>This example shows the expected usage of the <code title=
    "license element">license</code> element when the <code title="license href">href</code> attribute is
      omitted.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  <strong>&lt;license&gt;
	... 
 </strong> <strong> 3.3.1 Widgets can use any APIs or libraries, prescribed by anyone.
   Widgets a are a free and open Web technology, so can be produced for free 
   and sold anywhere. Widgets can be written in JavaScript 
   so can run on any conforming engine (without the annoying restrictions of 
   C, C++, or Objective-C). You can even &quot;cross-compile&quot; them, if you want.  
	...  
  &lt;/license&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="icon element"><code>icon</code></dfn> Element and its Attributes</h3>
  <p>The <code title="icon element">icon</code> element represents a <span>custom
    icon</span> for the widget.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Empty.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No. Relies on <span>folder-based localization</span>.</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="icon src">src</code>, <code title="icon width">width</code>, <code title="icon height">height</code>. </dd>
  </dl>
  <h4>The <dfn title="icon src"><code>src</code></dfn> Attribute</h4>
  <p>A <span>path attribute</span> that points to a <span>file</span> inside the
    widget package. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> When an <code title="icon element">icon</code> element is used, it is required for authors to
    use the <code title="icon src">src</code> attribute.</p>
  <h4>The <code><dfn title="icon width">width</dfn></code> Attribute</h4>
  <p>A <span title="valid non-negative integer">numeric attribute</span> greater than <code>0</code> that represents,  in <a href=
    "http://www.w3.org/TR/CSS21/syndata.html#length-units">CSS pixels</a> <span>[CSS]</span>, the author's preferred width for the icon. A user agent <em class="ct">may</em> ignore this value when changing the height icon to fit a rendering context or for accessibility reasons. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="icon width">width</code> attribute of an <code title="icon element">icon</code> element.</p>
  <h4>The <code><dfn title="icon height">height</dfn></code> Attribute</h4>
  <p>A <span title="valid non-negative integer">numeric attribute</span> greater than <code>0</code> that represents,  in <a href=
    "http://www.w3.org/TR/CSS21/syndata.html#length-units">CSS pixels</a> <span>[CSS]</span>, the author's preferred height for the icon. A user agent <em class="ct">may</em> ignore this value when changing the height icon to fit a rendering context or for accessibility reasons. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="icon height">height</code> attribute of an <code title="icon element">icon</code> element.</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example shows the expected usage of the <code title=
    "icon element">icon</code> element. The example declares three icon elements, two of
      which are raster and one of which is an <span>[SVGTiny]</span> file. The raster
      graphics would be used for display contexts smaller than 256x256 pixels. <a href=
    "http://www.w3.org/TR/xpath/#dt-document-order">Document order</a> of the elements is
      irrelevant.</p>
    <pre>

<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  <strong>&lt;icon src=&quot;icons/medium.png&quot;/&gt;
  &lt;icon src=&quot;icons/big.svg&quot; width=&quot;256&quot; height=&quot;256&quot;/&gt;
  &lt;icon src=&quot;icons/tiny.png&quot;/&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="content element"><code>content</code></dfn> Element and its Attributes</h3>
  <p>The <code title="content element">content</code> element is used by an author to
    declare which <span>custom start file</span> the user agent is expected to use when it instantiates the widget.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Empty.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or one.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No. Relies on <span>folder-based localization</span>.</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="content src">src</code>, <code title="content type">type</code>, <code title="content encoding">encoding</code>.</dd>
  </dl>
  <h4>The <code><dfn title="content src">src</dfn></code> Attribute</h4>
  <p>A <span>path attribute</span> that allows an author to point to a <span>file</span> within the <span>widget package</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> When a <code title="content element">content</code> element is used, it is required for authors to
    use the <code title="content src">src</code> attribute.</p>
  <h4>The <dfn title="content type"><code>type</code></dfn> Attribute</h4>
  <p>A <span>media type attribute</span> that indicates the <span>media type</span> of
    the file referenced by the <code>src</code> attribute. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors
    to use the <code title="content type">type</code> attribute with a <code title="content element">content</code> element. When the value is absent, the
    user agent will assume the value <code>text/html</code>. </p>
  <h4>The <dfn title="content encoding"><code>encoding</code></dfn> Attribute</h4>
  <p>A <span>keyword attribute</span> that denotes the character encoding of the file identified by
    the <code title="content src">src</code> attribute. The  value is the &quot;name&quot;
    
    or &quot;alias&quot; of any &quot;Character Set&quot; listed in <span>[IANA-Charsets]</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="content encoding">encoding</code> attribute with a <code title="content element">content</code> element. Where aliases are given by
    the <a href="#iana-charsets">[IANA-Charsets]</a> registry, authors are encouraged to use the value of the
    &quot;preferred MIME name&quot; (if any) from the registry.</p>
  <p>The <dfn>default encoding</dfn> is <span>[UTF-8]</span>, which has the name &quot;<code>UTF-8</code>&quot;  in the <span>[IANA-Charsets]</span> registry. </p>
  <p>Aside from the <span>default encoding</span>, it is <em class="ct">optional</em> for a <span class="product-ua">user
    agent</span> to <span title="supported">support</span> other character encodings. </p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example shows the expected usage of the <code title=
    "content element">content</code> element:</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  <strong>&lt;content src=&quot;myWidget.html&quot;/&gt;</strong>

&lt;/widget&gt;</code></pre>
  </div>
  <div class="example">
    <p>This example shows the <code title="content element">content</code> element being
      used with a <code>encoding</code> attribute to override the default value of the <code>encoding</code> attribute (<code>UTF-8</code>) with the GB2312 character set, which the author has
      used to encode simplified Chinese characters:</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  &lt;name xml:lang=&quot;zh-cn&quot;&gt;古老瓷地图&lt;/name&gt;
  &lt;name&gt;Ancient Chinese Maps&lt;/name&gt;
  <strong>&lt;content src=&quot;china-maps.html&quot; encoding=&quot;GB2312&quot;/&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <div class="example">
    <p>This example shows the <code title="content element">content</code> element being
      used with a <code title="content type">type</code> attribute to instantiate a widget
      created with a proprietary <span>media type</span>:</p>
    <pre>

<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  &lt;name&gt;Location-Based Games Finder&lt;/name&gt;
  <strong>&lt;content src=&quot;lbg-maps.swf&quot; type=&quot;application/x-shockwave-flash&quot;/&gt;</strong>
  &lt;feature name=&quot;http://example.org/api.geolocation&quot;
           required=&quot;false&quot;/&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="feature element"><code>feature</code></dfn> Element and its Attributes</h3>
  <p>A <dfn>feature</dfn> is a URI identifiable runtime component (e.g. an Application Programming
    Interface or video decoder). The act of a an author requesting the availability of a feature through a <code title="feature element">feature</code> element is referred to as a <dfn>feature request</dfn>. The <code title=
  "feature element">feature</code> element serves as a standardized means to request the
    binding of an IRI identifiable runtime component to a widget for use at runtime.
    Using a <code title="feature element">feature</code> element denotes that, at runtime,
    a widget can attempt to access the <span>feature</span> identified by the <code title=
  "feature element">feature</code> element's <code title="feature name">name</code> attribute. How a user agent makes use of <span title="feature">features</span> depends
    on the user agent's security policy, hence activation and authorization requirements
    for features are beyond the scope of this specification. A feature has  zero or more <span title=
  "parameter">parameters</span> associated with it.</p>
  <!--- p>When a <code title="feature element">feature</code> element is nested inside another feature element, it
  denotes a <dfn>fallback relationship</dfn>: if the feature identified by the outermost
  element is unavailable, then the user agent will check for the availability of the
  feature identified by the child's element's <code title="feature name">name</code> attribute.</p -->
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Zero or more <code title="param element">param</code> elements.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No.</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="feature name">name</code>, <code title="feature required">required</code>. </dd>
  </dl>
  <h4>The <dfn title="feature name"><code title="feature name">name</code></dfn> Attribute</h4>
  <p>An <span>IRI attribute</span> that identifies a <span>feature</span> that is needed by the widget at runtime (such as an <abbr title=
    "application programming interface">API</abbr>). </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> When the <code title="feature element">feature</code> element is declared, it is required for authors to use the <code title="feature name">name</code> attribute.</p>
  <h4>The <code><dfn title="feature required">required</dfn></code> Attribute</h4>
  <p>A <span>boolean attribute</span> that indicates whether or not this <span>feature</span> has to be available to the widget at runtime. </p>
  <p>When set to <code>true</code>, the <code title="feature required">required</code> attribute denotes that a <span>feature</span> is absolutely needed by the widget to function correctly, and
    without the availability of this <span>feature</span> the widget serves no useful
    purpose or won't execute properly. </p>
  <p>When set to <code>false</code>, the <code title="feature required">required</code> attribute denotes that a
    widget can function correctly without the <span>feature</span> being <span>supported</span> or otherwise made available by the user agent. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="feature required">required</code> attribute with an <code title="feature element">feature</code> element. However, authors need to be aware that a user agent will behave as if the <code title="feature required">required</code> attribute had been set to <code>true</code> when the <code title="feature required">required</code> attribute is absent, meaning that the named <span>feature</span> needs to be available  at
    runtime or the widget will be treated as an <span>invalid widget package</span>. </p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example demonstrates a widget that would like to use a fictional geo-location <abbr title="application programming interface">API</abbr> feature, but would still
      be able to function if the feature cannot be made available to the widget by the user
      agent.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
   <strong>&lt;feature name     = &quot;http://example.org/api/geolocation&quot;
            required = &quot;false&quot;/&gt; </strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="param element"><code>param</code></dfn> Element and its Attributes</h3>
  <p>The <code title="param element">param</code> element defines a <span>parameter</span> for a <span>feature</span>. A <dfn>parameter</dfn> is a name-value pair that is <span class="associate">associated</span> with the corresponding <span>feature</span> for which the parameter is declared for. A author establishes the relationship between a <span>parameter</span> and feature  by having a <code title="param element">param</code> element as a
    direct child of a <code title="feature element">feature</code> element in <a href=
  "http://www.w3.org/TR/xpath/#dt-document-order">document order</a>.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="feature element">feature</code> element.</dd>
    <dt>Content model:</dt>
    <dd>Empty.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No.</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="param name">name</code>, <code title="param value">value</code>. </dd>
  </dl>
  <h4>The <code><dfn title="param name">name</dfn></code> Attribute</h4>
  <p>A <span>string attribute</span> that denotes the name of this <span>parameter</span>. </p>
  <p class="authorguide"><strong>Authoring Guideline:</strong>When a <code title="param element">param</code> element is declared, it is required for authors to
    use the <code title="param name">name</code> attribute. </p>
  <h4>The <code><dfn title="param value">value</dfn></code> Attribute</h4>
  <p>A <span>string attribute</span> that denotes the value of this <span>parameter</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> When a <code title="param element">param</code> element is used, it is required for authors to
    use the <code title="param value">value</code> attribute.</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example demonstrates a widget that makes use of a fictional geo-location
      feature where by its accuracy is set to &quot;<code>low</code>&quot; via a <code title="param element">param</code> element.</p>
    <pre>

<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
   &lt;feature name=&quot;http://example.org/api/geolocation&quot;&gt;
      <strong>&lt;param name=&quot;accuracy&quot; value=&quot;low&quot;/&gt; </strong>
   &lt;/feature&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <code><dfn title="preference element">preference</dfn></code> Element and its Attributes</h3>
  <p>The <code title="preference element">preference</code> element allows authors to
    declare one or more preferences: a <dfn>preference</dfn> is a persistently stored
    name-value pair that is <span title="associate">associated</span> with the widget the
    first time the widget is initiated.</p>
  <p class="note"><span class="notetitle">Note:</span> A user agent that <span title="supported">supports</span> the <span>[Widgets-APIs]</span> specification will expose any declared <span>preference</span> at runtime  in the manner described
    in the <span>[Widgets-APIs]</span> specification.</p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="widget element">widget</code> element.</dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more.</dd>
    <dt>Expected children:</dt>
    <dd>none.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>No.</dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>, <code title="preference name">name</code>, <code title="preference value">value</code>, <code title="preference readonly">readonly</code>.</dd>
  </dl>
  <h4>The <code><dfn title="preference name">name</dfn></code> Attribute</h4>
  <p>A string that denotes the name of this <span>preference</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> When a <code title="preference element">preference</code> element is used, it is required for authors to
    use the <code title="preference name">name</code> attribute.</p>
  <h4>The <code><dfn title="preference value">value</dfn></code> Attribute</h4>
  <p>A string that denotes the value of this <span>preference</span>. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="preference value">value</code> attribute with a <code title="preference element">preference</code> element.</p>
  <h4>The <code><dfn title="preference readonly">readonly</dfn></code> Attribute</h4>
  <p>A <span>boolean attribute</span> indicating whether this preference can, or cannot, be
    overwritten at runtime (e.g., via an author script). When set to <code>true</code>, it means that the <span>preference</span> cannot be overwritten. When set to <code>false</code>, it means that the <span>preference</span> can be overwritten. </p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> It is optional for authors to use the <code title="readonly">readonly</code> attribute with a <code title="preference element">preference</code> element. If the <code title="readonly">readonly</code> attribute is absent, the user agent will act as if the readonly attribute had been set to <code>false</code> (meaning that the <span>preference</span> can be overwritten at runtime).</p>
  <h4>Example of Usage</h4>
  <div class="example">
    <p>This example shows a widget where two preferences are set. The second <code title="preference element">preference</code> is set as &quot;read only&quot; via the <code>readonly</code> attribute, which means the values of that preference cannot be changed at
      runtime.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
   <strong>&lt;preference name     = &quot;skin&quot;
               value    = &quot;alien&quot;/&gt;

   &lt;!-- The preference below will be protected
        from modification and deletion at runtime --&gt;

   &lt;preference name     = &quot;api-key&quot;
               value    = &quot;f6d3a312f9d742&quot;
               readonly = &quot;true&quot;/&gt;</strong>
&lt;/widget&gt;</code></pre>
  </div>
  <h3>The <dfn title="span element"><code>span</code></dfn> Element and its Attributes</h3>
  <p>The <code title="span element">span</code> element is a wrapper for text content; on its own it serves no useful function. </p>
  <p>It is expected that authors will use the <code title="span element">span</code> element  with the <span>global attributes</span>. When combined with the <code>dir</code> attribute,  the <code title="span element">span</code> element can indicate the textual directionality  of text content. In other words, it allows authors to set the base direction for the Unicode bidirectional algorithm <span>[BIDI]</span>. When combined with the <code>xml:lang</code> attribute, the <code title="span element">span</code> element allows the author to indicate the particular language used for a subset of text content within  another element. </p>
  <dl>
    <dt>Context in which this element is used:</dt>
    <dd>As a child of the <code title="name element">name</code>, <code title="author element">author</code>, <code title="license element">license</code>, and/or <code  title="description element">description</code> element. </dd>
    <dt>Occurrences:</dt>
    <dd>Zero or more.</dd>
    <dt>Expected children:</dt>
    <dd>Any.</dd>
    <dt>Localizable via <code>xml:lang</code>:</dt>
    <dd>
      <p>No, meaning that declaring <code>xml:lang</code> on a <code title="span element">span</code> element within a parent element (e.g., a <code title="name element">name</code> element) will not affect the behavior of <span>element-based localization</span> (see Example of Usage below to see how this works). </p>
    </dd>
    <dd>
      <p class="authorguide"><strong>Authoring Guidelines:</strong> Authors are encouraged to use <code>xml:lang</code> to indicate the language information for text content contained within a <code title="span element">span</code> element. See Example of Usage for more information. </p>
    </dd>
    <dt>Attributes:</dt>
    <dd><span title="global attributes">Global attributes</span>.</dd>
  </dl>
  <h4>Example of Usage</h4>
  <p><em>This section is informative.</em></p>
  <div class="example">
    <p>This example shows the <code title="span element">span</code> elements being used to indicate directionality of text as well as language information. Note that the <code title="name element">name</code> element's <code>xml:lang</code> attribute is set to an empty string to allow it to be used as <span>default content</span> in the process of <span>element-based localization</span>: </p>
    <pre>
<code>&lt;widget
 xmlns=&quot;http://www.w3.org/ns/widgets&quot;
 xml:lang=&quot;he&quot; dir=&quot;rtl&quot;&gt;
 &lt;name xml:lang=&quot;&quot; dir=&quot;ltr&quot;&gt;
  &lt;span xml:lang=&quot;en&quot;&gt;GPS Weather!&lt;/span&gt;
 &lt;/name&gt;
 &lt;description&gt;
  יישומון ה-
  &lt;span dir=&quot;ltr&quot; xml:lang=&quot;en&quot;&gt;GPS Weather!&lt;/span&gt; מאפשר
 לך לבדוק את מזג הא
וויר בכל נקודת GPS ברחבי העולם.
 &lt;/description&gt;

&lt;description xml:lang=&quot;&quot; dir=&quot;ltr&quot;&gt;
   &lt;span xml:lang=&quot;en&quot;&gt;The GPS Weather! widget lets you check
   the weather at any point around the world with GPS.&lt;/span&gt;
&lt;/description&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <h2>Internationalization and localization</h2>
  <p><dfn>Internationalization</dfn>, or i18n, is the design and development of a
    product, application or document content that enables  localization for target
    audiences that vary in culture, region, or language. <dfn>Localization</dfn> refers to
    the adaptation of a product, application or document content to meet the language,
    cultural and other requirements of a specific target market (a &quot;locale&quot;).</p>
  <p class="note"><span class="notetitle">Note:</span> See also the <cite><a href=
  "http://www.w3.org/TR/2004/NOTE-ws-i18n-scenarios-20040730/#locale">Web Services
    Internationalization Usage Scenarios</a></cite> and the <cite><a href=
  "http://www.unicode.org/reports/tr35/#Locale">Unicode Locale Data Markup
    Language</a></cite> for an informative discussion on the term locale.</p>
  <p><dfn>Localized content</dfn> is content an author has explicitly <span title=
  "localization">localized</span>: that is, a <span>widget package</span> that contains
    content localized using <span>folder-based localization</span> or a <span>configuration
    document</span> that contains content localized via <span>element-based
    localization</span>.</p>
  <p><dfn>Default content</dfn> is content included in the <span>widget
    package</span> or in the <span>configuration document</span> that has not been
    explicitly localized or content explicitly indicated by the author to be used as default content via the <code>defaultlocale</code> attribute of the <code title="widget element">widget</code> element. In the case of a <span>widget package</span>, this means content outside the <span>container for localized content</span>. In the case of a <span>configuration document</span>,
    this means any element without an explicitly declared or inherited <code>xml:lang</code> attribute.</p>
  <p>A <dfn>localized file</dfn> is any <span>file</span> that has been placed inside a <span>locale folder</span> (i.e., <span>localized content</span> that makes use of <span>folder-based localization</span>).  A widget
    package contains zero or more localized files. All files and
    folders, except for the <span title="digital signature">digital signatures</span> and
    the <span>configuration document</span>, can be localized via <span>folder-based localization</span>.</p>
  <p class="example">For example, a locale folder &quot;<code>locales/ja/</code>&quot; (Japanese) might contain
    an HTML document translated into Japanese.</p>
  <p class="authorguide"><strong>Authoring Guidelines:</strong> <span title=
  "locale folder">Locale folders</span> need to be placed in the <span>container for
    localized content</span> (a locale folder not in a <span>container for localized
    content</span> will be treated as an <span>arbitrary</span> folder).  In addition, authors making use of localization features provided by this specification should  translate, localize, or alter <span>localized content</span> for a the given locale, and test their widgets thoroughly.</p>
  <h3>Bidirectional  text</h3>
  <p>In conjunction to mandating that user agents support <span>[Unicode]</span>, this specification provides the <code>dir</code> attribute and <code title="span element">span</code> element as a markup-based means of influencing the directionality for bidirectional Unicode text <span>[BIDI]</span>. See the  definitions of the <code>dir</code> attribute and <code title="span element">span</code> element for usage examples. </p>
  <h3>Localization Model</h3>
  <p>This specification provides two means that authors can use to explicitly localize
    the content of a widget:</p>
  <ol>
    <li>
      <p>By placing localized file content in <span title="locale folder">locale
        folders</span>, a process referred to as <span>folder-based localization</span>.</p>
    </li>
    <li>
      <p>By explicitly marking XML elements in the <span>configuration document</span> as
        localized, a process referred to as <span>element-based localization</span>.</p>
    </li>
  </ol>
  <p>Both forms of localization are described below. Folder-based and element-based
    localization rely on the user agent to match the language ranges held by the <var>user
    agent locales</var> to the appropriate locale folders and/or localized XML elements in
    the widget's <span>configuration document</span>.</p>
  <h3>Folder-based localization</h3>
  <p>This specification defines the concept of <dfn>folder-based localization</dfn>,
    which is the process whereby an author places <span title="file">files</span> inside <span title="folder">folders</span> that are named in a manner that conforms to a <code>language-range</code> ABNF rule of this specification. That
    is, by naming folders in lower-case using values derived from the <a href=
  "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
    Registry</a> such as &quot;<code>en-us</code>&quot;, &quot;<code>en-gb</code>&quot;, and so on, but
    avoiding subtags marked as <dfn class="external">deprecated</dfn>, <dfn class=
  "external">grandfathered</dfn>, or <dfn class="external">redundant</dfn> in the <a href="http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
    Registry</a>. These <span title="locale folder">locale folders</span> are then placed
    inside the <span>container for localized content</span>.</p>
  <p class="authorguide"><strong>Authoring Guidelines</strong> Although BCP 47 recommends a particular case-folding convention, the use of upper or lowercase letters has no meaning in a language tag. Because folders inside a widget package are treated by the user-agent in a case-sensitive manner, the names of the folders inside a 'locale' folder must be all lowercase. All language tags are mapped to lowercase for matching purposes (although they can appear in any form in the configuration file or elsewhere).</p>
  <p>The <dfn>container for localized content</dfn> is a <span>reserved</span> <span>folder</span> at the <span>root of the widget package</span> whose <code>folder-name</code> case-sensitively matches the string '<code>locales</code>'. A
    container for localized content contains zero or more <span title="locale folder">locale folders</span>.</p>
  <p>A <dfn>locale folder</dfn> is a <span>folder</span> whose <var>file name field</var> matches the production of <code>locale-folder</code> and is a direct descendant of the <span>container for localized content</span> (e.g., &quot;<code>/locales/en-us</code>&quot;,
    &quot;<code>/locales/fr</code>&quot;, etc). A <span>locale folder</span> contains zero or more <span>arbitrary</span> folders and/or files.</p>
  <div class="authorguide">
    <p><strong>Authoring Guidelines</strong> Authors need to avoid region, script or
      other subtags except where they add useful distinguishing information to a <span>locale folder</span>. In addition, avoid including empty <span title=
    "locale folder">locale folders</span> in a <span>widget package</span> (unless there
      is a good reason to include them).</p>
    <div class="example">
      <p>An example of a widget that uses folder-based localization:</p>
      <pre>
<code>widget.wgt
 locales/zh-hans-cn/a.gif
 locales/zh-hans-cn/f.gif
 locales/zh-hans/a.gif
 locales/zh-hans/b.gif
 locales/zh/a.gif
 locales/zh/b.gif
 locales/zh/c.gif
 a.gif
 b.gif
 c.gif
 d.gif
 index.html
 config.xml</code></pre>
    </div>
    <p>Authors can further facilitate the localization process by grouping <span title=
    "file">files</span> into <span>folder</span> hierarchies made up of matching subtags,
      as is shown in the example.</p>
    <p>Assuming the widget's locale is &quot;zh-hans-cn&quot;, a reference to:</p>
    <ul>
      <li>a.gif would resolve to locales/zh-hans-cn/a.gif</li>
      <li> b.gif would resolve to locales/zh-hans/b.gif</li>
      <li> c.gif would resolve to locales/zh/c.gif</li>
      <li> d.gif would resolve to d.gif, as it is not associated with any
        locales and is hence available to all locales.</li>
    </ul>
    <p>This works at all sub-levels, so long as the parent subtag matches the child
      subtags. So, for example, the &quot;<code>cn</code>&quot; region can make use of the localized
      files in the &quot;zh-hans&quot; folder level, the &quot;zh&quot; folder level, and the unlocalized files
      at the <span>root of the widget package</span>. The user agent always prioritizes
      files in sub-folders over files in locale folders closer to the <span>root of the
      widget package</span>. Conversely, if the widget's locale were &quot;<code>en-us</code>&quot;,
      references to a.gif, b.gif, c.gif and d.gif would all resolve to the files in the
      root of the widget package.</p>
    <p>Note also that the user agent treats any <span>file</span> or <span>folder</span> outside the container for localized content as <span>default content</span>.</p>
  </div>
  <h3>Element-Based Localization</h3>
  <p>This specification defines the concept of <dfn>element-based localization</dfn>,
    which allows authors to use the <code>xml:lang</code> attribute to explicitly indicate
    that an <span>[XML]</span> element in the <span>configuration document</span> has been <span title=
  "localization">localized</span>.</p>
  <div class="example">
    <p>The following is an example of element-based localization:</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
   &lt;name short=&quot;Weather&quot;&gt;
   The Ultimate Weather Widget
   &lt;/name&gt;

   &lt;name short=&quot;Boletim&quot; xml:lang=&quot;pt&quot;&gt;
    Boletim Metereol&oacute;gico
   &lt;/name&gt;
&lt;/widget&gt;</code></pre>
  </div>
  <p>Some of the elements in the widgets namespace are defined to be <dfn>localizable via xml:lang</dfn> as part of the element's definition (with either &quot;yes&quot; or &quot;no&quot;). See, for example, the <code title="name element">name</code> element. When &quot;yes&quot;, it means  that an author can utilize xml:lang to achieve <span>element-based localization</span> either directly or indirectly through the inheritance of the value of <code>xml:lang</code>. How element-based localization is handled is specified in detail in <span>Step 7</span>. </p>
  <p class="note"><span class="notetitle">Note:</span> The xml:lang attribute can be used on any element in order to indicate which language is used in the content and attribute values of that element. As specified in the XML Specification, its value is inherited, such that if an element has an xml:lang attribute, all of its descendants are considered to be in that language as well, unless they specify their own <code>xml:lang</code> attribute. Note that an element can indicate that it is in no specific language by setting <code>xml:lang</code> to the empty string, irrespective of whether any of its ancestors has an xml:lang attribute.</p>
  <div class="example">
    <p>For example, if an author uses the <code>xml:lang</code> attribute on the <code title="widget element">widget</code> element, then all child elements inherit
      the value xml:lang. This means that the first <code title="name element">name</code> element below behaves as <code>xml:lang=&quot;en&quot;</code> had been explicitly used.
      However, in the second <code title="name element">name</code> element, the
      declaration of <code>xml:lang=&quot;pt&quot;</code> overrides <code>xml:lang=&quot;en&quot;</code> inherited from the <code title="widget element">widget</code> element. Finally, the last name element overrides xml:lang with an empty string, so that element will be treated by the user agent as <span>default content</span>.</p>
    <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;
 xml:lang=&quot;en&quot;&gt;

   &lt;name short=&quot;I'm in english, though not explicitly marked as such!&quot;&gt;
    <strong>Behaves as if xml:lang=&quot;en&quot;</strong>
   &lt;/name&gt;

   &lt;name xml:lang=&quot;pt&quot;&gt;
    <strong>The declaration of xml:lang=&quot;pt&quot; overrides
    xml:lang=&quot;en&quot; inherited from the widget element. </strong>
   &lt;/name&gt;
   
   &lt;name xml:lang=&quot;&quot;&gt;
    <strong>The user agent will treat this as unlocalized content.</strong> 
   &lt;/name&gt;

&lt;/widget&gt;</code></pre>
  </div>
  <p>If an element is marked as being localizable via <code>xml:lang</code> with &quot;yes&quot;,
    the specification  indicates that only <dfn>one element is allowed per language</dfn>:</p>
  <p>One element is allowed per language means that only one element of a type is
    allowed to be used per language (e.g., although many <code title="name element">name</code> elements can be present in a <span>configuration document</span>, only one <code title=
      "name element">name</code> element will be selected by the user agent for the English language). During
    processing (<span>Step 7</span>), the user agent will only
    match the first element, in <a href=
      "http://www.w3.org/TR/xpath/#dt-document-order">document order</a>, that matches a
    language range in the <var>user agent locales</var> and <span>ignore</span> any
    subsequent repetitions of the element that contain a matching <code>xml:lang</code> value (even if that element's content is different).</p>
  <div class="example">
    <p>For example, assume the <var>user agent locales</var> only contains the
      following language range: &quot;<code>en-us</code>&quot; (English as used in the United
      States). As only one instance of the <code title=
      "description element">description</code> element is allowed per language, in the
      following code the user agent would match the first <code title=
      "description element">description</code> element but would <span>ignore</span> the
      second and third <code title="description element">description</code> elements.</p>
    <pre><code>
&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;

   &lt;description xml:lang=&quot;en&quot;&gt;
      <strong>This element would be used.</strong>
   &lt;/description&gt;

   &lt;description xml:lang=&quot;en&quot;&gt;
      <strong>This element would be ignored because there is already
      a description element that uses xml:lang=&quot;en&quot;.</strong>
   &lt;/description&gt;

   &lt;description&gt;
      <strong>This element is unlocalized, and would be used if the user agent's
      locale does not match any localized description elements.</strong>
   &lt;/description&gt;

	 &lt;description xml:lang=&quot;&quot;&gt;
<strong>		This element would be ignored because there is already an unlocalized 
      description element! Using xml:lang=&quot;&quot; makes this element behave as if
      it is unlocalized.</strong>
	 &lt;/description&gt;

&lt;/widget&gt;</code></pre>
    <p>However, if the <var>user agent locales</var> only contained &quot;<code>*</code>&quot;,
      or did not match any of the localized <code title=
      "description element">description</code> elements, then the user agent would match
      the third <code title="description element">description</code> element above.</p>
  </div>
  <p>In the case whereby the author does not use an <code>xml:lang</code> attribute,
    and no element of a particular type with <code>xml:lang</code> matches the <var>user agent locales</var>, the user agent will use the
    first element that is <span>default content</span>, in <a href=
      "http://www.w3.org/TR/xpath/#dt-document-order">document order</a>, that matches the
    element type being sought.</p>
  <div class="example">
    <p>For example, now assume that the <var>user agent locales</var> only contains the
      following language range: &quot;<code>jp</code>&quot; (Japanese). As only one instance of the <code title="description element">description</code> element is allowed per
      language, in the following code the user will agent <span>ignore</span> the first
      two <code title="description element">description</code> elements, but would match
      the third (unlocalized) <code title="description element">description</code> element.</p>
    <pre>
<code>
&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;

   &lt;description xml:lang=&quot;en&quot;&gt;
       <strong>This element would be ignored.</strong>
   &lt;/description&gt;

   &lt;description xml:lang=&quot;en&quot;&gt;
      <strong>This element would be ignored.</strong>
   &lt;/description&gt;

   &lt;description&gt;
      <strong>In this case, this unlocalized element would be used.</strong>
   &lt;/description&gt;

&lt;/widget&gt;</code>
  </pre>
  </div>
  <h3>Localization Examples</h3>
  <p><em>This section is non-normative.</em></p>
  <p>This section presents three examples of how widgets can be localized. Each example
    is intended to showcase how the localization algorithm is intended to work.</p>
  <h4>Simple Example</h4>
  <div class="example">
    <p class="no-toc no-num">This example shows a widget that displays the days of the
      week based on the language ranges held by the <var>user agent locales</var>. If the
      user agent is unable to match a language range to any <span>locale folder</span>, the
      widget displays <code>/index.html</code> at the <span>root of the widget
      package</span>.</p>
    <div class="code_sniplet c1">
      <p><img src="images/config.png" alt="config: " width="16" height=
      "16" />config.xml</p>
      <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
&lt;name&gt;What day is it?&lt;/name&gt;
&lt;description&gt;
 This widget highlights the current day
 of the week.
&lt;/description&gt;
&lt;/widget&gt; </code></pre>
      <hr />
      <p><img src="images/text.png" alt="file: " width="16" height=
      "16" />locale/es/index.html</p>
      <pre>
<code>&lt;!doctype html&gt;
&lt;title&gt;&iquest;Qu&eacute; d&iacute;a es?&lt;/title&gt;
&lt;script src=&quot;scripts/dayfinder.js&quot;&gt;&lt;/script&gt;
&lt;body&gt;
&lt;p&gt;Hoy es: lunes, martes, mi&eacute;rcoles,
   jueves, viernes, s&aacute;bado,
   domingo
</code></pre>
    </div>
    <ul class="dir_listing">
      <li class="widget_icon"> <img src="images/widget.png" alt="widget file: " width="16" height="16" /> weekdays.wgt
        <ul>
          <li class="doc_icon"><img src="images/text.png" alt="file: " width="16" height=
          "16" /> index.html <span class="comment">/*English*/</span></li>
          <li class="doc_icon"><img src="images/config.png" alt=
          "configuration document: " width="16" height="16" /> config.xml</li>
          <li class="doc_icon"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> scripts
            <ul>
              <li><img src="images/script.png" alt="script: " width="16" height="16" /> dayfinder.js</li>
            </ul>
          </li>
          <li class="config_icon"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> locales
            <ul>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> fr/
                <ul>
                  <li class="doc_icon"><img src="images/text.png" alt="file: " width="16"
                  height="16" /> index.html <span class="comment">/*French*/</span></li>
                </ul>
              </li>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> es/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> index.html <span class="comment">/*Spanish*/</span></li>
                </ul>
              </li>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> pt/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> index.html <span class="comment">/*Portuguese*/</span></li>
                </ul>
                <img src="images/folder.png" alt="folder: " width="16" height=
                "16" /> fi/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> index.html <span class="comment">/*Finnish*/</span></li>
                </ul>
              </li>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> it/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> index.html <span class="comment">/*Italian*/</span></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <h4>Complex Example</h4>
  <div class="example">
    <p>The following is an example of a localized widget with multiple localized <span title="icon">icons</span>, <span title="start file">start files</span> and <span title="configuration document">configuration documents</span>. Some relevant
      things to note from the example:</p>
    <ul>
      <li>The Spanish version (<code>locales/es/</code>) has its own localized
        icon.</li>
      <li>The Spanish (<code>locales/es</code>) and English (<code>locales/en/</code>)
        versions of the widget use the un-localized script in <code>/scripts/engine.js</code> folder.</li>
      <li>On the other hand, the English-Australia (<code>en-au</code>) version uses a
        localized script (<code>en-au/scripts/engine.js</code>).</li>
    </ul>
    <div class="code_sniplet c1">
      <p><img src="images/config.png" alt="config: " width="16" height=
      "16" />/config.xml</p>
      <pre>
<code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
  &lt;name xml:lang=&quot;ko&quot;&gt;웃기는 고양이&lt;/name&gt;
  &lt;content src=&quot;cats.html&quot;/&gt;
&lt;/widget&gt; </code></pre>
      <hr />
      <p><img src="images/text.png" alt="file: " width="16" height=
      "16" />/locales/en-au/cats.html</p>
      <pre>
<code>&lt;!doctype html&gt;
&lt;title&gt;G'day! LOL Cats!&lt;/title&gt;
&lt;script src=&quot;scripts/engine.js&quot;&gt;
...</code></pre>
      <hr />
      <p><img src="images/text.png" alt="file: " width="16" height=
      "16" />/locales/es/cats.html</p>
      <pre>
<code>&lt;!doctype html&gt;
&lt;title&gt;Gatos Graciosos!&lt;/title&gt;
&lt;script src=&quot;scripts/engine.js&quot;&gt;
...</code></pre>
    </div>
    <ul class="dir_listing">
      <li class="widget_icon"> <img src="images/widget.png" alt="widget file: " width="16" height="16" /> LOLcats.wgt
        <ul>
          <li class="doc_icon"><img src="images/text.png" alt="file: " width="16" height=
          "16" /> cats.html <span class="comment">/*written in Korean*/</span></li>
          <li class="config_icon"><img src="images/config.png" alt=
          "configuration document: " width="16" height="16" /> config.xml</li>
          <li class="doc_icon"><img src="images/image.png" alt="icon: " width="16"
          height="16" /> icon.png <span  title="" class="comment">/*default icon*/</span></li>
          <li class="doc_icon"><img src="images/signature.png" alt="Digital Signature: "
          width="16" height="16" /> signature.xml <span class="comment">/*not
            localizable*/</span></li>
          <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> scripts/
            <ul>
              <li><img src="images/script.png" alt="script: " width="16" height="16" /> engine.js <span class="comment">/*default functionality*/</span></li>
            </ul>
          </li>
          <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> locales/ <span title="" class="comment">/*container for localized content*/</span>
            <ul>
              <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> en-au/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> cats.html</li>
                  <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> scripts/
                    <ul>
                      <li><img src="images/script.png" alt="script: " width="16" height=
                      "16" /> engine.js <span class="comment">/*custom localized
                        functionality*/</span></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> en/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> cats.html <span class="comment">/*international english
                    version*/</span></li>
                </ul>
              </li>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> es/
                <ul>
                  <li><img src="images/text.png" alt="file: " width="16" height="16" /> cats.html <span class="comment">/*Spanish version*/</span></li>
                  <li><img src="images/image.png" alt="icon: " width="16" height="16" /> icon.png <span class="comment">/*localized icon*/</span></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <h4>Fallback Behavior Example</h4>
  <div class="example">
    <p>This specification allows authors to place files and folders they don't wish to
      localize at the root of the widget package. At runtime, if the user agent fails to
      find a file in a <span>locale folder</span>, it will always search at the root of the
      widget package for that missing file. The purpose of this 'fallback' model is to
      reduce the number of <span title="file">files</span> that need to be created in order
      to <span title="localization">localize</span> a <span>widget package</span>.</p>
    <p>The example below demonstrates how a user agent attempts to locate a file that is
      absent in a localized scenario. Assume the user agent's locale is '<code>en-gb</code>' and the zip relative path being sought is &quot;<code>images/mast.png</code>&quot;:</p>
    <ol>
      <li>
        <p>Firstly, the user agent will search for a folder that matches the user agent's
          locale as closely as possible for the desired file. In this case, the user
          agent would attempt to locate the relative path <code>'images/mast.png</code>' in '<code>/locales/en-gb/</code>', but would fail. </p>
      </li>
      <li>
        <p>Secondly, if the file is absent, the user agent will search for the absent file in any
          other sub-folder that is in the language range of the current locale folder. So the next place the user agent would look is in the
          '<code>en/</code>' folder, where it would match the zip relative path '<code>images/mast.png</code>'.</p>
      </li>
      <li>
        <p>Lastly, if the above fails, the user agent will search for the absent file at the root
          of the widget package. So, if the user agent's locale did not find the zip relative path in one of the locale folders, then '<code>images/mast.png</code>' file at the root of the widget would be matched and this <span>default content</span> would be used.</p>
      </li>
    </ol>
    <p>Now consider the for various Chinese variants: '<code>zh-hans-cn</code>',
      '<code>zh-hans</code>', and '<code>zh</code>' below. In this case, to find the
      '<code>flag.png</code>' file for Mainland Chinese in simplified script
      '<code>zh-hans-cn</code>', the user agent would first look in
      '<code>zh-hans-cn</code>', followed by '<code>zh-hans</code>', then in
      '<code>zh</code>' where the file is located.</p>
    <p>To find the '<code>mast.png</code>' file, the user agent would look in
      '<code>zh-hans-cn</code>', followed by '<code>zh-hans</code>', followed
      '<code>zh</code>', and finally at the root of the widget package where the absent
      file is actually located.</p>
    <div class="code_sniplet c1">
      <p><img src="images/text.png" alt="file: " width="16" height="16" />/index.html</p>
      <pre>

<code>&lt;!doctype html&gt;
&lt;title&gt;Patriotic Boat&lt;/title&gt;
&lt;script src=&quot;scripts/engine.js&quot;&gt;
&lt;/script&gt;
&lt;body&gt;
  &lt;img src=&quot;flag.png&quot;&gt;
  &lt;img src=&quot;mast.png&quot;&gt;</code></pre>
    </div>
    <ul class="dir_listing">
      <li class="widget_icon"> <img src="images/widget.png" alt="widget file: " width="16" height="16" /> boat.wgt
        <ul>
          <li class="doc_icon"><img src="images/text.png" alt="file: " width="16" height=
          "16" /> index.html</li>
          <li class="doc_icon"><span class="config_icon"><img src="images/config.png" alt=
          "configuration document: " width="16" height="16" /> config.xml</span></li>
          <li class="config_icon"><img src="images/image.png" alt="icon: " width="16"
          height="16" /> flag.png</li>
          <li class="folder"><span class="folder"><img src="images/folder.png" alt="folder: " width="16" height="16" /></span>images/
            <ul>
              <li><img src="images/image.png" alt="icon: " width="16"
          height="16" /> mast.png</li>
            </ul>
          </li>
          <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> scripts/
            <ul>
              <li><img src="images/script.png" alt="script: " width="16" height="16" /> engine.js</li>
            </ul>
          </li>
          <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> locales/
            <ul>
              <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> en-gb/
                <ul>
                  <li class="folder"><img src="images/folder.png" alt="folder: " width="16" height="16" /> images
                    <ul>
                      <li><img src="images/image.png" alt="icon: " width="16" height="16" /> flag.png</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li class="folder"> <img src="images/folder.png" alt="folder: " width="16" height="16" /> en/
                <ul>
                  <li><img src="images/folder.png" alt="folder: " width="16" height="16" /> images
                    <ul>
                      <li><img src="images/image.png" alt="icon: " width="16" height="16" /> mast.png</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><img src="images/folder.png" alt="folder: " width="16" height="16" /> zh-hans-cn/</li>
              <li><img src="images/folder.png" alt="folder: " width="16" height="16" /> zh-hans/</li>
              <li> <img src="images/folder.png" alt="folder: " width="16" height="16" /> zh/
                <ul>
                  <li><img src="images/image.png" alt="icon: " width="16" height="16" /> flag.png</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <h2>Steps for Processing a Widget Package</h2>
  <p>The <dfn>steps for processing a widget package</dfn> involves nine steps that a <span>user agent</span> follows in sequential order, responding
    accordingly if any of the steps result in an error or if the specification asks for the
    user agent to skip a step. The procedures for what to do when an error is encountered
    are described as part of each step; however, there are times when it will not be
    possible for the user agent to recover from an error and it will be forced to treat the
    widget as an <span>invalid widget package</span>.</p>
  <p>In the event that a user agent encounters an <span>invalid widget package</span> during the <span>steps for processing a widget package</span>, a <span class="product-ua">user agent</span> <em class="ct">must</em> abort all processing of the <span>steps for processing a
    widget package</span>.</p>
  <p class="note"><span class="notetitle">Note:</span>A user agent can optimize <span>steps for processing a widget package</span> and associated <span>processing rules</span> , or  perform the steps in a different order,
    but the end result needs to be indistinguishable from the result that
    would be obtained by following the specification.</p>
  <h3>Processing Rules</h3>
  <p>This section defines various <dfn>processing rules</dfn>, which are algorithms used  during the <span>steps for processing a widget package</span>. </p>
  <p>These algorithm makes use of a few special concepts defined below:</p>
  <dl>
    <dt><dfn>Text node</dfn></dt>
    <dd>
      <p>Any <code>Text</code> node, including <code>CDATASection</code> nodes (any <code>Node</code> with node type <code>TEXT_NODE</code> or <code>CDATA_SECTION_NODE</code>) as defined in the <span>[DOMCore]</span> specification. For example, the worlds &quot;hello world!&quot; in the following <code title="name element">name</code> element: <code>&lt;name&gt;hello world!&lt;/name&gt;</code>.</p>
    </dd>
    <dt><dfn>Localizable string</dfn> </dt>
    <dd>
      <p>A data structure containing a sequence of one or more strings, each having some
        associated directional information and language information (if any). The purpose of an localizable string is to assist user agent in
        correctly applying the Unicode <span>[BIDI]</span> algorithm when displaying text. </p>
    </dd>
    <dd class="example">
      <p>For
        example, the string &quot;Internationalization <span dir="rtl">نشاط التدويل!</span> Activity.&quot; The string contains both Arabic and English that mixes left-to-right text, right-to-left
        text, and a directionality-neutral punctuation mark that could not be correctly displayed 
        without directional information. </p>
    </dd>
    <dt><code><dfn>null</dfn></code></dt>
    <dd>
      <p>A special symbol to indicate that a value has no data. For example, &quot;let <var>x</var> be <code>null</code>&quot; or &quot;if <var>y</var> is empty, then return <code>null</code>&quot;.</p>
    </dd>
  </dl>
  <p class="note"><span class="notetitle">Note:</span> Note: Although languages such as ECMA Script and Java support <code>null</code> as a 
    native value type, there are some programming languages that have no 
    notion of <code>null</code> or where null is problematic (e.g. C++). Implementations 
    in these languages need to substitute a language-specific value or symbol 
    which is functionally equivalent to <code>null</code>, or if no equivalent exists, to 
    have no value at all. For example, the value 0 may represent <code>null</code> for 
    the height of a widget, since the height of a widget is defined as a 
    non-negative integer greater than 0. In such a case, 0 could be treated 
    as if it were <code>null</code>. </p>
  <h4>Rule for Verifying a Zip Archive</h4>
  <p>The <dfn>rule for verifying a zip archive</dfn> is described in this
    section. The algorithm returns either true or an error.</p>
  <p>This specification does not provide the technical
    details of how to actually perform the checks, for which implementers need to refer to the <span>[ZIP]</span> specification.</p>
  <ol>
    <li>
      <p>If the <span>Zip archive</span> is <dfn class="external">split into multiple
        files</dfn> or spans <dfn class="external">multiple volumes</dfn>, as defined in
        the <span>[ZIP]</span> specification, then return an error and terminate this algorithm.</p>
    </li>
    <li>
      <p>If the <span>Zip archive</span> is encrypted, as defined in <span>[Zip]</span>, return an error
        and terminate this algorithm.</p>
    </li>
    <li>Otherwise, return true. </li>
  </ol>
  <h4>Rule for Extracting File Data from a File Entry</h4>
  <p>The <dfn>rule for extracting file data from a file entry</dfn> is as follows:</p>
  <ol>
    <li>
      <p>Let <var>path</var> be the <span>zip relative path</span> that identifies the <span>file entry</span> being sought. </p>
    </li>
    <li>
      <p>Let <var>file entry</var> be the file entry identified by the <var>path</var>. </p>
    </li>
    <li>
      <p>Let <var>file</var> be the result of decompressing (or extracting) the <var>file data</var> from <var>file entry</var> using <span>[Zip]</span>.</p>
    </li>
    <li>
      <p>Return <var>file</var>.</p>
    </li>
  </ol>
  <p class="note"><span class="notetitle">Note:</span> For efficiency, a user agent can
    extract specific <span title="file">files</span> as they are needed for processing
    rather than extracting all the <span title="file">files</span> at once. As a security
    precaution, implementations are discouraged from extracting <span title=
  "file entry">file entries</span> from un-trusted widgets directly onto the file system.
    Instead, implementations could use, for example, a virtual file system or mapping to
    access files inside a <span>widget package</span>.</p>
  <h4>Rule for Finding a File Within a Widget Package</h4>
  <p>The <dfn>rule for finding a file within a widget package</dfn> is given in the
    following algorithm. The algorithm returns either a <span>processable file</span>, <code>null</code>, or an error. </p>
  <p>For
    the sake of comparison and matching, it is <em class="ct">recommended</em> that a <span class="product-ua">user agent</span> treat all <span title="zip relative path">Zip relative paths</span> as <span>[UTF-8]</span>. </p>
  <p class="note"><span class="notetitle">Note:</span> This specification does not define
    how links in documents other than the <span>configuration document</span> are to be
    dereferenced. For handling links in other documents, such as (X)HTML, CSS, SVG, etc.,
    please refer to the <span>[Widgets-URI]</span> specification.</p>
  <ol>
    <li>
      <p>Let <var>path</var> be the  path to the <span>file
        entry</span> being sought by the user agent.</p>
    </li>
    <li>
      <p>If <var>path</var> is not a valid path, return an error and terminate this algorithm. </p>
    </li>
    <li>
      <p>If the <var>path</var> starts with a U+002F SOLIDUS (e.g.,
        &quot;<code>/style/master.css</code>&quot;),  then remove the first U+002F SOLIDUS from <var>path.</var></p>
    </li>
    <li>
      <p>Let <var>path-components</var> be the result of splitting <var>path</var> at
        each occurrence of a U+002F SOLIDUS character, removing that U+002F SOLIDUS
        character in the process.</p>
    </li>
    <li>
      <p> if the first item in <var>path-components</var> case-sensitively matches the string
        &quot;<code>locales</code>&quot;, then:</p>
      <ol>
        <li>
          <p>If the <var>path-components</var> does not contain a second item, then return <code>null</code>.</p>
        </li>
        <li>
          <p>If the second item in <var>path-components</var> is not a valid <code>language-range</code>, then return <code>null</code> and terminate this
            algorithm.</p>
        </li>
        <li>
          <p>Otherwise, continue.</p>
        </li>
      </ol>
    </li>
    <li>
      <p>For each <var>lang-range</var> in the <var>user agent locales</var>:</p>
      <ol>
        <li>
          <p>Let <var>path</var> be the concatenation of the string
            &quot;<code>locales/</code>&quot;, the <var>lang-range</var>, a U+002F SOLIDUS character,
            and the <var>path</var> (e.g., <code>locales/en-us/cats.png</code>, where
            &quot;<code>en-us</code>&quot; is the <var>lang-range</var> and &quot;<code>cats.png</code>&quot;
            
            is the <var>path</var>).</p>
        </li>
        <li>
          <p>If <var>path</var> case-sensitively matches the <var>file name field</var> of a <span>file entry</span> within the <var>widget package</var> that is a <span>folder</span>,  then return an error and terminate this
            algorithm.</p>
        </li>
        <li>
          <p>If <var>path</var> case-sensitively matches the <var>file name field</var> of a <span>file entry</span> within the <var>widget package</var> that is a <span>file</span>, let <var>file</var> be the result of applying
            the <span>rule for extracting file data from a file entry</span> to <var>path</var>.</p>
        </li>
        <li>
          <p>If <var title="">file</var> is a <span>processable file</span>, then return <var title="">file</var> and terminate this algorithm.</p>
        </li>
        <li>
          <p>If the <var>path</var> points to a <span>file entry</span> that is not a <span>processable file</span>, then return an error and terminate this
            algorithm.</p>
        </li>
      </ol>
    </li>
    <li>
      <p>If every <var>lang-range</var> in the <var>user agent locales</var> have been
        searched, then search for a <span>file entry</span> whose <var>file name
        field</var> matches <var>path</var> from the <span>root of the widget
        package</span>:</p>
      <ol>
        <li>
          <p>If <var>path</var> points to a <span>file entry</span> within the <var>widget package</var> that is a <span>folder</span>,  then return an error and terminate this
            algorithm.</p>
        </li>
        <li>
          <p>If <var>path</var> points to a <span>file entry</span> within the <var>widget package</var> that is a <span>file</span>, let <var>file</var> be the result of applying
            the <span>rule for extracting file data from a file entry</span> to <var>path</var>.</p>
        </li>
        <li>
          <p>If <var title="">file</var> is a <span>processable file</span>, then return <var title="">file</var> and terminate this algorithm.</p>
        </li>
        <li>
          <p>If the <var>path</var> points to a <span>file entry</span> that is not a <span>processable file</span>, then return an error and terminate this
            algorithm.</p>
        </li>
      </ol>
    </li>
    <li>
      <p>Otherwise, return <code>null</code>.</p>
    </li>
  </ol>
  <h4>Rule for Determining Directionality</h4>
  <p>The <dfn>rule for determining directionality</dfn> is given in the following
    algorithm. The algorithm always returns one of the <span>valid directional indicators</span> as a string. </p>
  <ol>
    <li>
      <p>Let <var>element</var> be the element to be processed.</p>
    </li>
    <li>
      <p>If <var>element</var> is the root element of the <span>configuration document</span>:</p>
      <ol>
        <li>
          <p>If  it does not contain a <code>dir</code> attribute, return &quot;<code>ltr</code>&quot; and terminate this algorithm. </p>
        </li>
        <li>
          <p>If it does contain a <code>dir</code> attribute, let <var>value</var> be value of the <var>dir</var> attribute of <var>element</var>. </p>
        </li>
        <li>
          <p>Remove any leading or trailing <span>space characters</span> from <var>value</var>. </p>
        </li>
        <li>If <var>value</var> of the attribute  case-sensitively matches one of the <span>valid directional  indicators</span>, return the value of the attribute and terminate this algorithm. if the value does not case-sensitively match one of the <span>valid directional  indicators</span>, return  &quot;<code>ltr</code>&quot; and terminate this algorithm. </li>
      </ol>
    </li>
    <li>
      <p>If <var>element</var> does not contain a <code>dir</code> attribute, recursively apply <span>rule for determining directionality</span> to the direct parent element of <var>element</var> and return the result. </p>
    </li>
    <li>
      <p>If <var>element</var> contains a <code>dir</code> attribute, let <var>direction</var> be the result of applying the <span>rule for getting a single attribute value</span> to the <var>dir</var> attribute of <var>element</var>:</p>
      <ol>
        <li>
          <p> If <var>direction</var> case-sensitively matches one of the <span>valid directional  indicators</span>, return <var>direction</var> and terminate this algorithm. </p>
        </li>
        <li>
          <p>If <var>direction</var> did not case-sensitively match  one of the <span>valid directional  indicators</span>, apply the <span>rule for determining directionality</span> to the direct parent element of <var>element</var> and return the result. </p>
        </li>
      </ol>
    </li>
  </ol>
  <h4>Rule for Getting a Single Attribute Value</h4>
  <p>The <dfn>rule for getting a single attribute value</dfn> is given in the following
    algorithm. The algorithm always returns either a string or a <span>localizable string</span>, which can be empty. </p>
  <ol>
    <li>
      <p>Let <var>attribute</var> be the attribute to be processed.</p>
    </li>
    <li>
      <p>Let <var>value</var> be the value of the attribute to be processed.</p>
    </li>
    <li>
      <p>In <var>value</var>, replace any sequences of <span>space characters</span> (in
        any order) with a single U+0020 SPACE character.</p>
    </li>
    <li>
      <p>Remove any leading or trailing U+0020 SPACE characters from <var>value</var>.</p>
    </li>
    <li>
      <p>If the attribute is not a <span>displayable-string attribute</span>, then let <var>result</var> be a string that contains the value of <var>value</var>. </p>
    </li>
    <li>
      <p>Otherwise, if and only if the attribute is a <span>displayable-string attribute</span>:</p>
      <ol>
        <li>
          <p>Let <var>result</var> be a <span>localizable string</span> that contains the value of <var>value</var>.</p>
        </li>
        <li>
          <p>Let <var>element</var> be the element that owns <var>attribute</var>. </p>
        </li>
        <li>
          <p>Let <var>direction</var> be the result of applying the <span>rule for determining directionality</span> to <var>element</var>.</p>
        </li>
        <li>
          <p>Associate <var>direction</var> with <var>result</var>.</p>
        </li>
        <li>
          <p> Let <var>lang</var> be the <span>language tag</span> derived from having processed the <code>xml:lang</code> attribute on either <var>element</var>, or in <var>element</var>'s  ancestor chain as per <span>[XML]</span>. If <var>xml:lang</var> was not used anywhere in the ancestor chain, then let <var>lang</var> be an empty string. </p>
        </li>
        <li>
          <p>Associate <var>lang</var> with <var>result</var>.</p>
        </li>
      </ol>
    </li>
    <li>Return <var>result</var>. </li>
  </ol>
  <h4>Rule for Getting a List of Keywords From an Attribute</h4>
  <p>The <dfn>rule for getting a list of keywords from an attribute</dfn> is given by the
    following algorithm. The algorithm takes a string as input, and returns a list of  strings  which can be empty.</p>
  <ol>
    <li>
      <p>Let <var>result</var> be the value of the attribute to be processed.</p>
    </li>
    <li>
      <p>In <var>result</var>, replace any sequences of <span>space characters</span> (in
        any order) with a single U+0020 SPACE character.</p>
    </li>
    <li>
      <p>In <var>result</var>, remove any leading or trailing U+0020 SPACE character.</p>
    </li>
    <li>
      <p>In <var>result</var>, split the string at each occurrence of a U+0020 character,
        removing that U+0020 character in the process.</p>
    </li>
    <li>Return <var>result.</var></li>
  </ol>
  <h4>Rule for Verifying a File Entry</h4>
  <p>The <dfn>rule for verifying a file entry</dfn> is given in the following algorithm.
    The algorithm always returns a boolean value.</p>
  <p>For the <span>file entry</span>, check the following data in the <var>local file
    header</var>.</p>
  <ol>
    <li>
      <p>If the value of the <dfn>CRC-32</dfn> field (defined in the <span>[ZIP]</span> specification) fails a CRC-32 check, return <code>false</code> and terminate this
        algorithm.</p>
    </li>
    <li>
      <p>The <var>file name field</var> is an empty string, return <code>false</code> and
        terminate this algorithm.</p>
    </li>
    <li>
      <p>The <var>file name field</var> contains <span>Zip forbidden characters</span>,
        return <code>false</code> and terminate this algorithm.</p>
    </li>
    <li>
      <p>The <var>file name field</var> is a sequence exclusively composed of (one or
        more) <span>space characters</span> or a mixed sequence of <span>space
        characters</span> and U+002E FULL STOP (&quot;.&quot;) (e.g.
        &quot;&nbsp;.&nbsp;.&nbsp;&nbsp;&nbsp;&quot;), return <code>false</code> and terminate this
        algorithm.</p>
    </li>
    <li>
      <p>The <var>file name field</var> is an invalid <span>Zip relative
        path</span>, return <code>false</code> and terminate this algorithm.</p>
    </li>
    <li>return <code>true</code>.</li>
  </ol>
  <h4>Rule for Getting Text Content</h4>
  <p>The <dfn>rule for getting text content</dfn> is given in the following algorithm.
    The algorithm always returns a list of <span>localizable string</span>s, which can be empty.</p>
  <ol>
    <li>
      <p>Let <var>input</var> be the <code>Element</code> to be processed.</p>
    </li>
    <li>
      <p>Let <var>bidi-text</var> be an empty list of <span title="localizable string">localizable strings</span>.</p>
    </li>
    <li>
      <p>If <var>input</var> has no child nodes, return an <var>bidi-text</var> and terminate this algorithm.</p>
    </li>
    <li>
      <p>Let <var>lang-strings</var> be an empty list (it will hold localizable strings). </p>
    </li>
    <li>
      <p>Let <var>lang</var> be the <span>language tag</span> derived from having processed the <code>xml:lang</code> attribute on either <var>input</var>, or in <var>input</var>'s  ancestor chain as per <span>[XML]</span>. If <var>xml:lang</var> was not used anywhere in the ancestor chain, then let <var>lang</var> be an empty string.</p>
    </li>
    <li>
      <p>Let <var>direction</var> be the result of applying the <span>rule for determining directionality</span> to <var>input</var>. </p>
    </li>
    <li>
      <p>Associate <var>lang</var> and <var>direction</var> with <var>bidi-text</var>. </p>
    </li>
    <li>
      <p>For each <var>child node</var> of <var>input</var>: </p>
      <ol>
        <li>
          <p>If <var> child node</var> is not an <code>Element</code> or <code>TextNode</code>, move onto the next child element and ignore the following sub-steps. </p>
        </li>
        <li>
          <p>If the <var> child node</var> is an <code>Element</code>, let <var>lstring</var> be the result of recursively applying the <span>rule for getting text content</span> using this <var>current child element</var> as the argument. </p>
        </li>
        <li>
          <p>If the <var> child node</var> is a <span title="text node">text node</span>, then: </p>
          <ol>
            <li>
              <p> Create a new localizable string called <var>lstring</var>, using the text content of the <var>current child node</var> as the text value, <var>direction</var> as the direction, and <var>lang</var> as the language. </p>
            </li>
          </ol>
        </li>
        <li> Append <var>lstring</var> to the <var>lang-string</var> list. </li>
      </ol>
    </li>
    <li>
      <p>Take all the text nodes, in order, from the returned <span>localizable string</span> and associate them with <var>bidi-text</var>. </p>
    </li>
    <li>return <var>bidi-text</var>.</li>
  </ol>
  <div class="example">
    <p>For example, the following configuration document: </p>
    <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot; dir=&quot;rtl&quot; xml:lang=&quot;fr&quot;&gt;
&lt;name dir=&quot;rlo&quot;&gt;
   &lt;span xml:lang=&quot;jp&quot;&gt;Hello &lt;span dir=&quot;rtl&quot;&gt;&lt;span dir=&quot;rlo&quot;/&gt;backwards&lt;/span&gt;&lt;/span&gt;
&lt;/name&gt;
&lt;/widget&gt;</pre>
    <p>When the <span>rule for getting text content</span> is applied could be logically represented as pseudo code: </p>
    <pre><code>
{dir: rlo,
 lang: fr,
 textNodes:
	[{data: &quot;Hello &quot;,
     direction: &quot;rlo&quot;,
     lang: &quot;jp&quot;},
              
     {data: &quot;backwards&quot;,
      direction: &quot;rtl&quot;,
      lang: &quot;jp&quot;}]
}</code></pre>
  </div>
  <h4>Rule for Getting Text Content with Normalized White Space</h4>
  <p class="no-toc no-num">The <dfn>rule for getting text content with normalized white
    space</dfn> is given in the following algorithm. The algorithm always returns a string,
    which can be empty.</p>
  <ol>
    <li>
      <p>Let <var>input</var> be the <code>Element</code> to be processed.</p>
    </li>
    <li>
      <p>Let <var>result</var> be the result of applying the <span>rule for getting text
        content</span> to <var>input</var>.</p>
    </li>
    <li>
      <p>In <var>result</var>, convert any sequence of one or more <span>space characters</span> into a single U+0020 SPACE.</p>
    </li>
    <li>
      <p>In <var>result</var>, remove any leading or trailing U+0020 SPACE character.</p>
    </li>
    <li>
      <p>Return <var>result</var>.</p>
    </li>
  </ol>
  <div class="example">
    <p>For example, the user agent would <span>ignore</span> the <code title="author element">author</code> and <code>blink</code> elements, but their <code>Text</code> nodes would be extracted (together with directional and language information): </p>
    <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;
 		 xmlns:x=&quot;http://x.x.example/x&quot; xml:lang=&quot;en&quot;&gt;
   &lt;name&gt;
     The &lt;blink xml:lang=&quot;en-us&quot;&gt;Awesome&lt;/blink&gt;
     &lt;author email=&quot;dude@example.com&quot;&gt;Super &lt;x:blink dir=&quot;rtl&quot;&gt;Dude&lt;/x:blink&gt;&lt;/author&gt;
     Widget&lt;/name&gt;
&lt;/widget&gt;</code></pre>
    <p>The resulting <var>widget name</var> would be &quot;<samp>The Awesome Super
      <bdo dir="rtl">Dude</bdo>
      Widget</samp>&quot; (please note that <q>Dude</q> is rendered right-to-left).</p>
  </div>
  <h4>Rule for Parsing a Non-negative Integer</h4>
  <p>The <dfn>rule for parsing a non-negative integer</dfn> is given in the following
    algorithm.  This algorithm  returns the number zero, a positive integer, or an error.</p>
  <ol>
    <li>
      <p>Let <var title="">input</var> be the string being parsed.</p>
    </li>
    <li>
      <p>Let <var title="">result</var> have the value <code>0</code>.</p>
    </li>
    <li>
      <p>If the length of <var title="">input</var> is <code>0</code>, return an
        error.</p>
    </li>
    <li>
      <p>Let <var title="">position</var> be a pointer into <var title="">input</var>,
        initially pointing at first character of the string.</p>
    </li>
    <li>
      <p>Let <var>nextchar</var> be the character in <var>input</var> at <var>position</var>.</p>
    </li>
    <li>
      <p>If the <var>nextchar</var> is one of the <span>space characters</span>,
        increment <var title="">position</var>. If <var>position</var> is past the end of <var>input</var>, return an error and terminate this algorithm. Otherwise, go to step 5 in this algorithm.</p>
    </li>
    <li>
      <p>If the <var>nextchar</var> is not one of U+0030 (<code>0</code>) .. U+0039
        (<code>9</code>), then return <var>result</var>.</p>
    </li>
    <!-- Ok. At this point we know we have a number. It might have
                           trailing garbage which we'll ignore, but it's a number, and we
                           won't return an error. -->
    <li>
      <p>If the <var>nextchar</var> is one of U+0030 (<code>0</code>) .. U+0039
        (<code>9</code>):</p>
      <ol style="list-style-type:upper-alpha">
        <li>
          <p>Multiply <var title="">result</var> by ten.</p>
        </li>
        <li>
          <p>Add the value of the <var>nextchar</var> to <var title="">result</var>.</p>
        </li>
        <li>
          <p>Increment <var title="">position</var>.</p>
        </li>
        <li>
          <p>If <var title="">position</var> is not past the end of <var title=
          "">input</var>, go to 5 in this algorithm.</p>
        </li>
      </ol>
    </li>
    <li>
      <p>Return <var title="">result</var>.</p>
    </li>
  </ol>
  <h4>Rule for Identifying the Media Type of a File</h4>
  <p>The <dfn>rule for identifying the media type of a file</dfn> is given by the
    following algorithm. The algorithm always returns a
    string.</p>
  <p class="note"><span class="notetitle">Note:</span>This rule is only to be applied
    when explicitly instructed to by the specification (e.g., during <span>Step 7</span>). There
    are situations where alternative means are defined by the specification to identify the
    media type of a file (e.g., by the presence of the <code title=
  "content element">content</code> element's <code title="content type">type</code> attribute or deriving the media type of a <span>default start file</span> from the <span>default start files table</span>).</p>
  <ol>
    <li>
      <p>Let <var title="">file</var> be the <span>file</span> to be processed. </p>
    </li>
    <li>
      <p>Let <var>content-type</var> be an empty string.</p>
    </li>
    <li>
      <p>Let <var>extension</var> be an empty string.</p>
    </li>
    <li>
      <p>Let <var>name</var> be the <code>file-name</code> component of the <span>zip relative path</span> that identifies the <var>file</var>.</p>
      <p class="example">For example, the <var>name</var> for &quot;<code>some/zip/rel/path/hello.png</code>&quot; would be &quot;<code>hello.png</code>&quot;. </p>
    </li>
    <li>
      <p>If the first character of the <var>name</var> is  a   U+002E 'FULL STOP'  character, and the file name contains no other U+002E 'FULL STOP'  character, then go to step 10 of this algorithm. </p>
      <p class="example">For example, if the name is &quot;<samp>.htaccess</samp>&quot;, jump to step 10 and derive the media type using   the <span>[SNIFF]</span> specification. </p>
    </li>
    <li>
      <p>If the first character or last character of the <var>name</var> is  not a   U+002E 'FULL STOP'  character, but <var>name</var> contains one or more U+002E 'FULL STOP'  characters, then let <var>extension</var> be the sequence of characters from the last U+002E 'FULL STOP' (inclusive) to the end of <var>name</var>. </p>
      <p class="example">The value of <var>extension</var> for the file name &quot;<samp>cat.html</samp>&quot; would be &quot;.<samp>html</samp>&quot;. The value of extension for &quot;...html&quot; would be &quot;.html&quot;. And the value of <var>extension</var> for &quot;hello.&quot; would be an empty string. </p>
    </li>
    <li>
      <p>If the first character of the <var>name</var> is  a   U+002E 'FULL STOP'  character, and the file name contains another U+002E 'FULL STOP'  character, then let <var>extension</var> be the sequence of characters from the last U+002E 'FULL STOP' (inclusive) to the end of <var>name</var> (if any). </p>
      <p class="example">For example, if the <var>name</var> is &quot;<samp>.myhidden.html</samp>&quot;, then the extension would be &quot;<samp>.html</samp>&quot;.</p>
    </li>
    <li>
      <p>If <var>extension</var> is an empty string, go to step 10 in this algorithm.</p>
    </li>
    <li>
      <p>Check that  each  character in the <var> extension</var> is either in the  U+0041-U+005A range or in the  U+0061-U+007A range (ASCII uppercase and lowercase characters, respectively) or in the U+0030-U+0039 range (ASCII numbers 0 to 9): </p>
      <ol>
        <li>
          <p>If any  character in the <var>extension</var> is outside  the    U+0041-U+005A range or  the  U+0061-U+007A range or the U+0030-U+0039 range, then go to step 10 in this algorithm. </p>
          <p class="example">For example, if the extension is &quot;<samp>.p&ntilde;g</samp>&quot;, the go to step 10 in this algorithm. </p>
        </li>
        <li>
          <p> If all characters in the <var>extension</var> are in any of the  U+0041-U+005A range or in the  U+0061-U+007A range  or the U+0030-U+0039 range (e.g., &quot;<code>Mp3</code>&quot;), then attempt to case-insensitive match
            the value of <var>extension</var> to one of the values in the file extension column in the <span>file identification table</span>. If there is a match, then return let <var>content-type</var> be the corresponding value from the <span>media type</span> column. </p>
        </li>
        <li>
          <p>Go to step 11.</p>
        </li>
      </ol>
    </li>
    <li>
      <p> Let <var>content-type</var> be the result of processing <var>file</var> through the <span>[SNIFF]</span> specification. </p>
    </li>
    <li>Return the value of <var>content-type</var>.</li>
  </ol>
  <table >
    <caption>
    <dfn>File Identification Table</dfn>
    </caption>
    <thead>
      <tr>
        <th scope="col">file extension</th>
        <th scope="col">media type</th>
      </tr>
    </thead>
    <tr>
      <td>.html</td>
      <td>text/html</td>
    </tr>
    <tr>
      <td>.htm</td>
      <td>text/html</td>
    </tr>
    <tr>
      <td>.css</td>
      <td>text/css</td>
    </tr>
    <tr>
      <td>.js</td>
      <td>application/javascript</td>
    </tr>
    <tr>
      <td>.xml</td>
      <td>application/xml</td>
    </tr>
    <tr>
      <td>.txt</td>
      <td>text/plain</td>
    </tr>
    <tr>
      <td>.wav</td>
      <td>audio/x-wav</td>
    </tr>
    <tr>
      <td>.xhtml</td>
      <td>application/xhtml+xml</td>
    </tr>
    <tr>
      <td>.xht</td>
      <td>application/xhtml+xml</td>
    </tr>
    <tr>
      <td>.gif</td>
      <td>image/gif</td>
    </tr>
    <tr>
      <td>.png</td>
      <td>image/png</td>
    </tr>
    <tr>
      <td>.ico</td>
      <td>image/vnd.microsoft.icon</td>
    </tr>
    <tr>
      <td>.svg</td>
      <td>image/svg+xml</td>
    </tr>
    <tr>
      <td>.jpg</td>
      <td>image/jpeg</td>
    </tr>
    <tr>
      <td>.mp3</td>
      <td>audio/mpeg</td>
    </tr>
  </table>
  <p>It is <em class="ct">optional</em> for a <span class="product-ua">user agent</span> to <span title=
  "supported">support</span> the <span title="media type">media types</span> given in the <span>file identification table</span>. </p>
  <h4>Rule for Deriving the <var title="">user agent locales</var></h4>
  <p>The <dfn>rule for deriving the <var>user agent locales</var></dfn> is as follows: </p>
  <ol>
    <li>
      <p>Let <var>unprocessed locales list</var> be a list that  contains the <span>end-user's language ranges</span>.</p>
    </li>
    <li>
      <p>For each <var>range</var> in the <var>unprocessed locales list</var>: </p>
      <ol>
        <li>
          <p>If this <var>range</var> begins with the <span title="subtags">subtag</span> '<code>*</code>' (e.g. &quot;<code>*-us</code>&quot; or just &quot;<code>*</code>&quot;),  or contains any <span>space characters</span>, skip
            all the steps in this algorithm below, and move onto the next <var>range</var>.</p>
        </li>
        <li>
          <p>If this <var>range</var> begins with the <span title="subtags">subtag</span> &quot;<code>i</code>&quot; or the <var>range</var> is marked as &quot;deprecated&quot; in the <a href=
        "http://www.iana.org/assignments/language-subtag-registry">IANA Language Subtag
            Registry</a>, or is or is null, skip
            all the steps in this algorithm below, and move onto the next <var>range</var>. </p>
        </li>
        <li>
          <p>If this <var>range</var> contains any <span title="subtags">subtag</span> '<code>*</code>', remove the '<code>*</code>' and its preceding hyphen
            (<code>U+002D</code>) (e.g., '<code>en-*-us</code>' becomes
            '<code>en-us</code>').</p>
        </li>
        <li>
          <p>While <var>range</var> contains <span title="subtags">subtags</span>:</p>
          <ol style="list-style:decimal">
            <li>
              <p>Add the value of the <var>range</var> to the <var>user agent
                locales</var>.</p>
            </li>
            <li>
              <p>Remove the right most <span title="subtags">subtag</span> from <var>range</var> and append the resulting value to <var>user agent
                locales</var>. Continue removing the right most <span title=
            "subtags">subtag</span> and adding the result to <var>user agent
                locales</var> until there are no <span>subtags</span> left in <var>range</var>.</p>
              <p class="example">For example, if the <var>range</var> was &quot;<code>zh-hans-cn</code>&quot;,
                then the <var>user agent locales</var> become
                &quot;<code>zh-hans-cn,zh-hans,zh</code>&quot;.</p>
            </li>
            <li>
              <p> Move onto the next <var>range</var> and go to step 1 in this
                algorithm. </p>
            </li>
          </ol>
        </li>
      </ol>
    </li>
    <li>
      <p>Append the value &quot;<code>*</code>&quot; to the end of <var>user agent
        locales</var>.</p>
    </li>
  </ol>
  <p class="example">For example, an <var>unprocessed locales list</var> that contains
    &quot;<code>en-us,en-au,en,fr-ca,zh-hans-cn</code>&quot; would result in a <var>user agent
    locales</var> that contains
    &quot;<code>en-us,en,en-au,en,en,fr-ca,fr,zh-hans-cn,zh-hans,zh,*</code>&quot;.</p>
  <p class="example">For example, an <var>unprocessed locales list</var> that contains
    &quot;<code>en-us,en,fr-ca,en,en-ca</code>&quot; would result in a <var>user agent locales</var> that contains &quot;<code>en-us,en,en,fr-ca,fr,en,en-ca,en,*</code>&quot;. </p>
  <h4>Rule for Determining if a Potential Zip Archive is a Zip
    Archive</h4>
  <p>The <dfn>rule for determining if a potential Zip archive is a Zip archive</dfn> is
    given by the following algorithm.</p>
  <ol>
    <li>
      <p>Let <var>potential archive</var> be the acquired resource.</p>
    </li>
    <li>
      <p>Check if the first four bytes of <var>potential archive</var> match the <span>magic numbers for a Zip archive</span> (<code>50 4B 03 04</code>). </p>
    </li>
    <li>
      <p>If the first four bytes do not match the <span>magic numbers for a Zip
        archive</span>, then return an error.</p>
    </li>
    <li>
      <p>Otherwise, return <code>true</code>.</p>
    </li>
  </ol>
  <p class="note"><span class="notetitle">Note:</span> A user agent can inspect the <var>potential archive</var> once it has acquired the first four bytes of the <span>potential Zip archive</span> or can wait until all the data of the <span>potential Zip archive</span> has been completely acquired.</p>
  <h3 class="no-num done"><dfn>Step 1</dfn> - Acquire a Potential Zip Archive</h3>
  <p>Step 1 involves acquiring a <span>potential Zip archive</span> and confirming that
    it is a <span>Zip archive</span> by applying the <span>rule for determining if a
    potential Zip archive is a Zip archive</span>. A user agent will acquire a <span>potential Zip archive</span> from a data transfer protocol that either labels
    resources with a <span>media type</span> (e.g. <span>[HTTP]</span>) or from a data
    transfer protocol that does not label resources with a media type (e.g., BitTorrent
    or Bluetooth).</p>
  <h4><dfn>Acquisition of a Potential Zip archive Labeled with a Media Type</dfn></h4>
  <p id="ta-GVVIvsdEUo">It is <em class="ct">recommended</em> that a user agent <span title="supported">support</span> <span title="acquisition of a potential Zip archive labeled with a media type">acquisition of a potential Zip archive from a protocol that labels resources with a media
    type</span> (e.g., getting a widget package over <span>[HTTP]</span>). If a user agent <span title="supported">supports</span> acquisition of a potential Zip archive from a protocol that labels resources with a media
    type, then the <span class="product-ua">user agent</span> needs to process resources labeled with the <span>valid widget
    media type</span> (<code>application/widget</code>), regardless of whether the
    resource contains a file extension or not, by applying the <span>rule for determining
    if a potential Zip archive is a Zip archive</span>. During the <span>acquisition of a potential Zip archive labeled with a media
    type</span>, unless the user agent <span title="supported">supports</span> legacy or
    proprietary <span title="media type">media types</span>, <span>unsupported</span> <span title=
    "media type">media types</span> are in error and the <span class="product-ua">user agent</span> <em class="ct">must</em> treat the <span>potential Zip archive</span> as an <span>invalid widget package</span>.</p>
  <p id="ta-qxLSCRCHlN">If the result of  the user agent applying the <span>rule for determining
    if a potential Zip archive is a Zip archive</span> is <code>true</code>, meaning that the <span>potential Zip archive</span> is a <span>Zip archive</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> proceed
    to <span>Step 2</span>. Otherwise, if an error is returned, the <span class="product-ua">user agent</span> <em class="ct">must</em> treat the <span>potential Zip archive</span> as an <span>invalid widget package</span>. </p>
  <p class="example">For example, in <span>[HTTP]</span>, where the <code>Content-Type</code> header matches <code>application/widget</code>.</p>
  <p>If the protocol used for acquisition of a <span>potential Zip archive</span> does
    not provide, or otherwise include, a <span>media type</span>, then a <span class="product-ua">user agent</span> <em class="ct">should</em> treat the acquired <span>potential Zip archive</span> as if
    it has been <span title="Acquisition of potential Zip archive not labeled with a media type">acquired from a protocol that does not label resources with a media
    type</span>.</p>
  <div class="example">
    <p>In this example, the <span>media type</span> of the <code>Content-Type</code> is
      not one <span>supported</span> by the user agent, so the user agent would treat the <span>potential Zip archive</span> as an <span>invalid widget package</span>:</p>
    <dl>
      <dt>Request</dt>
      <dd>
        <pre>
<code>GET /foo.wgt HTTP/1.1
Host: www.example.com
Accept: application/widget</code></pre>
      </dd>
      <dt>Response</dt>
      <dd>
        <pre>
<code>HTTP/1.1 200 OK
Date: Tue, 04 Sep 2007 00:00:38 GMT
Last-Modified: Mon, 03 Sep 2007 06:47:19 GMT
Content-Length: 1337
Content-Type: application/x-gadget</code></pre>
      </dd>
    </dl>
  </div>
  <h4><dfn>Acquisition of Potential Zip Archive not Labeled with a Media
    Type</dfn></h4>
  <p id="ta-FDGQBROtzW">When acquiring a potential Zip archive that has not been labeled with a media type (e.g., from a file system), a <span class="product-ua">user agent</span> <em class="ct">should</em> attempt to process
    the resource regardless of the file extension (including situations when the file
    extension is absent) by applying the <span>rule for determining if a potential Zip
    archive is a Zip archive</span>. If the <span>rule for determining if a potential Zip
    archive is a Zip archive</span> return <code>true</code>, proceed to <span>Step
    2</span>. Otherwise, if an error was returned, the <span class="product-ua">user agent</span> <em class="ct">must</em> treat the <span>potential Zip archive</span> as an <span>invalid widget package</span>.</p>
  <h3 class="no-num done"><dfn>Step 2</dfn> - <dfn>Verify the Zip Archive</dfn></h3>
  <p id="ta-uLHyIMvLwz">To verify that a <span>Zip archive</span> and its <span title="file entry">file
    entries</span> conform to this specification, a <span class="product-ua">user agent</span> <em class="ct">must</em> apply the <span>rule for verifying a zip archive</span>. If the <span>rule for verifying a zip archive</span> returns <code>true</code>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> go to <span>Step 3</span>. Otherwise, if the <span>rule for verifying a zip archive</span> returns an error, then  the <span class="product-ua">user agent</span> <em class="ct">must</em> treat the <span>Zip
    archive</span> as an <span>invalid widget package</span>.</p>
  <h3 class="no-num"><dfn>Step 3</dfn> - Set the Configuration Defaults</h3>
  <p>In <span>Step 3</span>, a <span class="product-ua">user agent</span> <em class="ct">must</em> set the following variables and
    default values as defined in the <span>table of configuration defaults</span>. </p>
  <p class="note"><span class="notetitle">Note:</span> When a <code>null</code> value is assigned to a variable in the <span>table of
    configuration defaults</span>, a user agent needs to treats
    the value as <code>null</code> (i.e., not as an empty string and not as the text string <code>&quot;null&quot;</code>).</p>
  <table>
    <caption>
    <dfn>Table of Configuration Defaults</dfn>
    </caption>
    <thead>
      <tr>
        <th scope="col">Variable</th>
        <th scope="col">Type</th>
        <th scope="col">Overridden in</th>
        <th scope="col">Description</th>
      </tr>
      <tr>
        <th scope="row"><dfn title="author email var"><var>author email</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td> The value of the <code title="author element">author</code> element's <code title="author email">email</code> attribute (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>author href</var></dfn></th>
        <td>IRI</td>
        <td><span>Step 7</span></td>
        <td>The value of the <code title="author element">author</code> element's <code title="author-element href">href</code> attribute (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>author name</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td>A <span>localizable string</span> that represents the content of the <code title="author element">author</code> element (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>feature list</var></dfn></th>
        <td>List</td>
        <td><span>Step 7</span></td>
        <td>A list of features that correspond to features that were requested via <code title="feature element">feature</code> elements (if any). Each item in the list corresponds to a <code title="feature element">feature</code> element's <code title=
        "name element">name</code> attribute, whether it is required, and any associated <span title="parameter'">parameters</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>icons</var></dfn></th>
        <td>List of file entries</td>
        <td><span>Step 7</span>, <span>Step 9</span></td>
        <td>The icons of the widget as they correspond to the <span title=
        "default icon">default icons</span> and to the occurrence of <span title=
        "custom icon">custom icons</span> that are <span>supported</span> by the <span>widget package</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>start file encoding</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td>The character encoding of the <span>custom start file</span>, corresponding
          to either the <code title="content element">content</code> element's <code title="content encoding">encoding</code> attribute (if any), or the <span>default encoding</span>.</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>start file content-type</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td>The <span>media type</span> of the <span>start file</span>, corresponding to the <code title="content element">content</code> element's <code title=
        "content type">type</code> attribute or to a media type derived from the <span>default start
          files table</span>.</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget config doc</var></dfn></th>
        <td><span>File</span></td>
        <td><span>Step 6</span></td>
        <td>The <span>file</span> that is the <span>configuration document</span> for the <span>widget package</span>.</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget description</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td>The text
          content of the <code title="description element">description</code> element in
          the <span>configuration document</span>.</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget height</var></dfn></th>
        <td>positive number</td>
        <td><span>Step 7</span></td>
        <td>The value of the <code title=
        "widget element">widget</code> element's <code title="widget-element height">height</code> attribute in the <span>configuration document</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn title="widget id var"><var>widget id</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td><p> The value of the <code title=
        "widget element">widget</code> element's <code>id</code> attribute in the <span>configuration document</span> (if any).</p></td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget license</var></dfn></th>
        <td>String</td>
        <td><span>Step 7</span></td>
        <td>The text content of the <code title=
        "license element">license</code> element in the <span>configuration
          document</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget license file</var></dfn></th>
        <td><span>File</span></td>
        <td>Step 7</td>
        <td>A <span>file</span> derived if the value of the <code title=
        "license element">license</code> element's <code title="license href">href</code> is a <span>Zip relative path</span> to a file within the <span>widget package</span>.</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget license href</var></dfn></th>
        <td>IRI</td>
        <td><span>Step 7</span></td>
        <td>The value of the <code title=
        "license element">license</code> element's <code title="license href">href</code> attribute in the <span>configuration
          document</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget name</var></dfn></th>
        <td><span>Localizable String</span></td>
        <td><span>Step 7</span></td>
        <td>The text content of the <code title=
        "name element">name</code> element in the <span>configuration
          document</span> (if any).</td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget preferences</var></dfn></th>
        <td>List</td>
        <td><span>Step 7</span></td>
        <td><p>The widget's <span title="preference">preferences</span>, corresponding to
            the <code title="preference element">preference</code> elements in the <span>configuration document</span> (if any). </p>
          <p>Unless an end-user explicitly requests that
            these values be reverted to the values as declared in the <span>configuration document</span>,
            a <span class="product-ua">user agent</span> <em class="ct">must not</em> reset the value of the <var>widget
            preferences</var> variable on subsequent initializations of the widget.</p></td>
      </tr>
      <tr>
        <th scope="row"><dfn><var>widget short name</var></dfn></th>
        <td><span>Localizable String</span></td>
        <td><span>Step 7</span></td>
        <td>The value of the <code title=
        "name element">name</code> element's <code title="name short">short</code> attribute in the <span>configuration document</span> (if any).</td>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th scope="col">Variable</th>
        <th scope="col">Type</th>
        <th scope="col">Overridden by</th>
        <th scope="col">Description</th>
      </tr>
    </tfoot>
    <tr>
      <th scope="row"><dfn><var>widget version</var></dfn></th>
      <td><span>Localizable String</span></td>
      <td><span>Step 7</span></td>
      <td>The value of the <code title=
      "widget element">widget</code> element's <code title="widget-element version">version</code> attribute in the <span>configuration document</span> (if any).</td>
    </tr>
    <tr>
      <th scope="row"><dfn><var>widget width</var></dfn></th>
      <td>positive number</td>
      <td><span>Step 7</span></td>
      <td>The value of the <code title=
      "widget element">widget</code> element's <code title="widget-element width">width</code> attribute in the <span>configuration document</span> (if any).</td>
    </tr>
    <tr>
      <th scope="row"><dfn><var>widget window modes</var></dfn></th>
      <td>List of strings</td>
      <td><span>Step 7</span></td>
      <td>The value of the <code title=
      "content element">widget</code> element's <code>viewmodes</code> attribute in the <span>configuration document</span> (if any).</td>
    </tr>
    <tr>
      <th scope="row"><dfn><var>widget start file</var></dfn></th>
      <td>File entry</td>
      <td><span>Step 7</span>, <span>Step 8</span></td>
      <td>The <span>start file</span> for the <span>widget package</span>, corresponding
        to either one of the <span>default start files table</span> or the <span>file</span> identified by the <code title="content element">content</code> element's <code title="content src">src</code> attribute.</td>
    </tr>
    <tr>
      <th scope="row"><dfn><var>user agent locales</var></dfn></th>
      <td><p>List of strings</p></td>
      <td><span>Step 5</span></td>
      <td>A  list of <span title=
      "language tag">language tags</span>. </td>
    </tr>
  </table>
  <h3 class="no-num done"><dfn>Step 4</dfn> - Locate and Process the Digital Signature</h3>
  <p>If the
    user agent does not <span title="supported">support</span> <span>[Widgets-DigSig]</span>,  then the user agent <em class="ct">must</em> skip <span>Step 4</span> and go to <span>Step 5</span>. Otherwise, the user agent <em class="ct">must</em> apply the algorithm to locate digital signatures, which is defined in the <span>[Widgets-DigSig]</span> specification under the section named <a href="http://www.w3.org/TR/widgets-digsig/#locating-signature-files-in-a-widget-package">Locating signature files in a widget package</a>.</p>
  <h3 class="no-num"><dfn>Step 5</dfn> - Derive the User Agent's Locales</h3>
  <p>The <dfn id="system">end-user's language ranges</dfn> represents the end-user's
    preferred languages and regional settings, which are derived from the operating
    system or directly from the user agent. As there are numerous ways a user agent can
    derive the end-user's preferred languages and regional settings, the means by which
    those values are derived are beyond the scope of this specification and left up to
    the implementation.</p>
  <p>During the <span>rule for deriving the <var>user agent locales</var></span> defined below, the user agent will need to construct a list <var>unprocessed locales</var>. Each item in the <var>unprocessed locales</var> is a  string in lowercase form, that conforms to the production of a <code>Language-Tag</code>, as defined in the <span>[BCP47]</span> specification. A
    string that conforms to the production of a <code>Language-Tag</code> is referred to
    as a <dfn class="external">language range</dfn> <span>[BCP47]</span> (e.g.
    '<code>en-au</code>', which is the range of English as spoken in Australia, and
    '<code>fr-ca</code>', which is the range of French as spoken in Canada, etc.). A
    language range is composed of one or more <dfn>subtags</dfn> that are delimited by a
    U+002D HYPHEN-MINUS (&quot;<code>-</code>&quot;).</p>
  <p>The first item of the <var>unprocessed locales</var> represents the user's most
    preferred language range (i.e., the language/region combination the user agent
    assumes the end-user most wants to see content in), followed by the next most
    preferred language range, and so forth.</p>
  <p class="example">For example, in an <var>unprocessed locales list</var> that
    contains '<code>en-us,en,fr,es</code>', English as spoken in the United States is
    preferred over English, and English is preferred over French, and French is preferred
    over Spanish, and Spanish is preferred over <span>default content</span>.</p>
  <p class="example">For example, the end-user may have specified her preferred
    languages and regional settings at install time by selecting a preferred language, or
    languages from a list, or a list of preferred languages and regional settings could
    have been dynamically derived from the end-user's geographical location, etc. </p>
  <p>In <span>Step 5</span>, the <span class="product-ua">user agent</span> <em class="ct">must</em> apply the <span>rule for deriving the <var>user agent locales</var></span>.</p>
  <h3 class="no-num done"><dfn>Step 6</dfn> - Locate the Configuration Document</h3>
  <p>This step involves searching within the Zip archive for a <span>configuration
    document</span>.</p>
  <p id="ta-ZjcdAxFMSx">In <span>Step 6</span>, a <span class="product-ua">user agent</span><em class="ct"> must</em> apply the algorithm to <span>locate the configuration document</span>.</p>
  <p>The algorithm to <dfn>locate the configuration document</dfn> is as follows: </p>
  <ol>
    <li>
      <p>Search at the <span>root of the widget package</span> for a <span>file
        entry</span> whose <var>file name field</var> case-sensitively matches the <span>valid configuration document file name</span> (<code>config.xml</code>). </p>
    </li>
    <li>If a
      match is made, then let <var>widget config doc</var> to the result of applying <span>rule for extracting file data from a file entry</span> to the matching <span>file entry</span>. If no match is made (meaning that <var>widget config doc</var> is <code>null</code>), then treat the <span>Zip
      archive</span> as an <span>invalid widget package</span>.</li>
  </ol>
  <h3 class="no-num"><dfn>Step 7</dfn> - <dfn>Process the Configuration
    Document</dfn></h3>
  <p>The purpose of processing the <span>configuration document</span> is to override the values in the <span>table of configuration defaults</span>, which are used during <span>initialization</span> and at runtime, and to select the appropriate localized
    content (if any) to be presented to the end user.</p>
  <p>In conjunction to the algorithm for processing a <span>configuration document</span> given below, this section firstly defines some terminology used by the processing algorithm
    and describes how localized elements are processed.</p>
  <p>During <span>Step 7</span>, a <span class="product-ua">user agent</span> <em class="ct">must</em> apply the <span>algorithm to process a configuration document</span>.</p>
  <h4>Terminology Used in Processing Algorithm</h4>
  <p>In the <span>algorithm to process a configuration document</span>, the term <dfn>in error</dfn> is used to mean that an element, or
    attribute, or <span>file</span> in a <span>configuration document</span> is
    non-conforming to the rules of this specification. How an element or an attribute is to
    be treated when it is in error is always given when the term is used; but will
    generally require the user agent to <span>ignore</span> any element, attribute, or <span>file</span> that is in error.</p>
  <p> To <dfn>ignore</dfn> means to act as if the element, attribute, or file that is <span>in error</span> is
    absent (i.e., not declared or included by the author) in the widget package or configuration document. A user agent <em class="ct">must</em>, however, keep a record of all element types it has attempted to process even if they were ignored (this is to determine if the user agent has attempted to process an element of a given type already). </p>
  <p>In the case the user agent is asked to <span>ignore</span> an <span>[XML]</span> element or node,  a <span class="product-ua">user agent</span> <em class="ct">must</em> :</p>
  <ol>
    <li>
      <p>Stop processing the current <var>element</var>, <span title="ignore">ignoring</span> all of the <var>element</var>'s attributes and child nodes (if any), and proceed to the next <var>element</var> in the <var>elements list</var>.</p>
    </li>
    <li>
      <p>Make a record  that it has attempted to process an element of that type.</p>
    </li>
  </ol>
  <div class="example">
    <p >In the following example, the user agent ignores both <code title="content element">content</code> elements. The user agent ignores the first  because it lacks a <code title="content src">src</code> attribute. The user agent ignores the second  because  it is not the first content element to be encountered by the user agent. </p>
    <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
	&lt;!-- User agent ignores the first, but records 
       that it has attempted to process a content element 
   --&gt;

  &lt;content/&gt;
  
  &lt;!-- The use agent knows that it has previously attempted 
       to process a content element, hence this content element 
       is ignored. 
   --&gt;
 
  &lt;content src=&quot;cats.html&quot;/&gt;
&lt;/widget&gt; </code></pre>
  </div>
  <p>To <dfn>associate</dfn> means that two or more pieces of information are bound and
    stored together for the purpose of later processing (e.g., the name of a <span>feature</span>, and if it is <code title="feature required">required</code>, and any associated <span title="parameter">parameters</span>). How associated data is represented is left
    up-to the implementation (e.g., a user agent could use an array, an object, a hash map,
    etc.).</p>
  <p>The <dfn class="external"><a href="http://tools.ietf.org/html/bcp47#page-2-12">lookup</a></dfn> algorithm is defined in <span>[BCP47]</span>. It is used in this Step  to
    match <span>localized content</span> in the <span>configuration document</span> to the
    language ranges held by the <var>user agent locales</var> (if any).</p>
  <h4>Algorithm to Process a Configuration Document</h4>
  <p>The <dfn>algorithm to process a configuration document</dfn> is as follows:</p>
  <ol>
    <li>
      <p>Let <var>doc</var> be the result of loading the <var>widget config doc</var> as
        a <span>[DOMCore]</span> <code>Document</code> using an <span>[XML]</span> parser that is both <span>[XMLNS]</span>-aware      and <code>xml:lang</code> aware. </p>
    </li>
    <li>
      <p id="ta-klLDaEgJeU">If <var>doc</var> is not namespace well-formed <span>[XML]</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> terminate this
        algorithm and treat this <span>widget package</span> as an <span>invalid widget package</span>.</p>
    </li>
    <li>
      <p>Let <var>root element</var> be the <code>documentElement</code> of <var>doc</var>.</p>
    </li>
    <li>
      <p id="ta-ACCJfDGwDQ">If the <var>root element</var> is not a <code title=
      "widget element">widget</code> element in the <span>widget namespace</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> terminate this
        algorithm and  treat this <span>widget package</span> as an <span>invalid widget package</span>.</p>
    </li>
    <li>
      <p>Otherwise, the <var>element</var> is a <code title="widget element">widget</code> element:</p>
      <ol>
        <li>
          <p>If the <code>defaultlocale</code> attribute is used, then let <var> default locale </var> be the result of
            applying the <span>rule for getting a single attribute value</span> to the <code>defaultlocale</code> attribute:</p>
          <ol>
            <li>
              <p id="ta-defaultlocale-ignore">If the<var> default locale </var>is <span>in error</span> or an empty string or already contained by the <var>user agent locales</var> list, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the <code>defaultlocale</code> attribute. </p>
            </li>
            <li>
              <p id="ta-defaultlocale-process">If <var>potential default locale </var> is a <span>valid language tag</span> and the <var>user agent locales</var> does not contain the value of <var> default locale</var>, the <span class="product-ua">user agent</span> <em class="ct">must</em> prepend the value of <var> potential default locale </var>into the the <var>user agent locales</var> list as the second-last item (i.e., at position length - 1). </p>
              <div class="example">
                <p> For example,         
                  
                  if the <var> default locale </var>is the value &quot;<code>fr</code>&quot;, and the <var>user agent locales</var> contains the values &quot;<code>jp,us,*</code>&quot;, then the <var>user agent locales</var> list becomes &quot;<code>jp,us,fr,*</code>&quot;. </p>
                <p> For example,         
                  
                  if the <var> default locale </var>is the value &quot;<code>en</code>&quot;, and the <var>user agent locales</var> only contains the value &quot;<code>*</code>&quot;, then the <var>user agent locales</var> list becomes &quot;<code>en,*</code>&quot;. </p>
                <p> For example,         
                  
                  if the <var> default locale </var>is the value &quot;<code>en</code>&quot;, and the <var>user agent locales</var> already contains the values &quot;<code>en,*</code>&quot;, then the user agent would ignore the <var> default locale </var>because it is already contained by the <var>user agent locales</var> list. </p>
              </div>
            </li>
          </ol>
        </li>
        <li>
          <p id="ta-RawAIWHoMs">If the <code>id</code> attribute is used, then let <var>id</var> be the result of
            applying the <span>rule for getting a single attribute value</span> to the <code>id</code> attribute. If <var>id</var> is a <span>valid IRI</span>, then
            let <var title="widget id var">widget id</var> be the value of the <var>id</var>. If the <var>id</var> is not a <span>valid IRI</span> or is an empty string, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute.</p>
        </li>
        <li>
          <p id="ta-VerEfVGeTc">If the <code>version</code> attribute is used, then let <var> version value</var> be the result of applying the <span>rule for getting a single
            attribute value</span> to the <code>version</code> attribute. If the <var>version</var> is an empty string, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute; otherwise, let <var>widget version</var> be the value of <var>version value</var>.</p>
        </li>
        <li>
          <p id="ta-BxjoiWHaMr">If the <code>height</code> attribute is used, then let <var>normalized
            height</var> be the result of applying the <span>rule for parsing a
            non-negative integer</span> to the value of the attribute. If the <var>normalized height</var> is not <span>in error</span> and greater than <code>0</code>, then let <var>widget height</var> be the value of <var>normalized
            height</var>. If the <code>height</code> attribute is <span>in error</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute.</p>
        </li>
        <li>
          <p id="ta-UScJfQHPPy">If the <code>width</code> attribute is used, then let <var>normalized
            width</var> be the result of applying the <span>rule for parsing a non-negative
            integer</span> to the value of the attribute. If the <var>normalized
            width</var> is not <span>in error</span> and greater than <code>0</code>, then let <var>widget width</var> be the value of <var>normalized width</var>. If the <code>width</code> attribute is <span>in error</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute.</p>
        </li>
        <li>
          <p id="ta-viewmodes">If the <code>viewmodes</code> attribute is used, then the <span class="product-ua">user agent</span> <em class="ct">must</em> let <var>viewmodes
            list</var> be the result of applying the <span>rule for getting a list of
            keywords from an attribute</span>:</p>
          <ol>
            <li>
              <p>From the <var>viewmode list</var>, remove
                any <span>unsupported</span> items. </p>
            </li>
            <li>
              <p>From the <var>viewmode list</var>, remove
                any duplicated items from right to left.</p>
              <p class="example">For example, <var>viewmode list</var> with a value of &quot;<code>windowed  fullscreen windowed floating fullscreen windowed</code>&quot; would become &quot;<code>windowed  fullscreen floating</code>&quot;.</p>
            </li>
            <li>
              <p>Let <var>widget window
                modes</var> be the value of <var>viewmodes list</var>.</p>
            </li>
          </ol>
        </li>
      </ol>
    </li>
    <li>
      <p id="ta-MFcsScFEaC">If the <code title="widget element">widget</code> element does not contain
        any child elements, then the <span class="product-ua">user agent</span> <em class="ct">must</em> terminate this
        algorithm and go to <span>Step
        8</span>.</p>
    </li>
    <li>
      <p>Otherwise, let <dfn><var>element list</var></dfn> be an empty list. </p>
    </li>
    <li>
      <p>For each <var>range</var> in the <var>user agent locales</var>, starting from
        the first and moving to the last:</p>
      <ol>
        <li>
          <p>If the value of <var>range</var> is not &quot;*&quot;, then retaining <a href=
          "http://www.w3.org/TR/xpath/#dt-document-order">document order</a>, let <var>matching elements</var> be the result of applying <span>lookup</span> to the  child  elements that are defined as being <span>localizable via <code>xml:lang</code></span> (i.e., the <code title="name element">name</code>, <code title="description element">description</code>, and <code title="license element">license</code> elements) that are direct descendants of the <var>root
            element</var> and whose <code>xml:lang</code> attribute matches the current <var>range</var>. Append <var>matching elements</var> to the <var>element list</var>.</p>
          <p class="note"><span class="notetitle">Note:</span> In the context of this specification, the above conformance requirement is intended to match the <code title="name element">name</code>, <code title="description element">description</code>, and <code title="license element">license</code> elements. However, it is written in an abstract manner to provide a hook for future specifications that want to define elements that also support being <span>localizable via xml:lang</span>.</p>
        </li>
        <li>If the value of  range is &quot;*&quot;, retaining <a href=
          "http://www.w3.org/TR/xpath/#dt-document-order">document order</a>, let <var>unlocalized elements</var> be all child elements that are direct
          descendants of the <var>root element</var> that do not have an implicit or explicit <var>xml:lang</var> attribute (i.e., match <span>default content</span>). Append <var>unlocalized elements</var> to the <var>element list</var>.
          <div class="example">
            <p>For example, consider the following configuration document.</p>
            <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
&lt;name&gt;El Widget!&lt;/name&gt;
&lt;name xml:lang=&quot;fr&quot;&gt;Le Widget&lt;/name&gt;
&lt;name xml:lang=&quot;en&quot;&gt;The Widget&lt;/name&gt;
&lt;/widget&gt; </code></pre>
            <p>For a use agent whose <var>user agent locales</var> contains &quot;<code>en,fr,*</code>&quot;, the <var>matching elements</var> would be in the following order: </p>
            <ol>
              <li><code>&lt;name xml:lang=&quot;en&quot;&gt;The Widget&lt;/name&gt;</code></li>
              <li><code>&lt;name xml:lang=&quot;fr&quot;&gt;Le Widget&lt;/name&gt;</code></li>
              <li><code>&lt;name&gt;El Widget!&lt;/name&gt;</code></li>
            </ol>
            <p>For a use agent whose <var>user agent locales</var> contains &quot;<code>en,*</code>&quot;, the <var>matching elements</var> would be in the following order: </p>
            <ol>
              <li><code>&lt;name xml:lang=&quot;en&quot;&gt;The Widget&lt;/name&gt;</code></li>
              <li><code>&lt;name&gt;El Widget!&lt;/name&gt;</code></li>
            </ol>
            <p>For a use agent whose <var>user agent locales</var> contains &quot;<code>jp,*</code>&quot;, the <var>matching elements</var> would be in the following order: </p>
            <ol>
              <li><code>&lt;name&gt;El Widget!&lt;/name&gt;</code></li>
            </ol>
          </div>
        </li>
      </ol>
    </li>
    <li>
      <p>For each <var>element</var> in the <var>elements list</var>, if the <var>element</var> is one of the following:</p>
      <dl class="procedure">
        <dt>A <code title="name element">name</code> element:</dt>
        <dd>
          <p id="ta-LYLMhryBBT">If this is not the first <code title="name element">name</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>. </p>
        </dd>
        <dd>
          <p id="ta-AYLMhryBnD">If this is the first <code title="name element">name</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em>:</p>
          <ol>
            <li>
              <p>Record that an attempt has been made by the user agent to process a <code title="name element">name</code> element.</p>
            </li>
            <li>
              <p>Let <var>widget name</var> be the result of applying the <span>rule for
                getting text content with normalized white space</span> to this
                element.</p>
            </li>
            <li>
              <p>If the <code title="name short">short</code> attribute is used, then let <var>widget short
                name</var> be the result of applying the <span>rule for getting a single
                attribute value</span> to the <code title="name short">short</code> attribute.</p>
            </li>
          </ol>
        </dd>
        <dt>A <code title="description element">description</code> element:</dt>
        <dd>
          <p id="ta-UEMbyHERkI">If this is not the first <code title=
          "description element">description</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
        </dd>
        <dd>
          <p id="ta-VdCEyDVSA">If this is the first <code title="description element">description</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em>: </p>
          <ol>
            <li>
              <p>Record that an attempt has been made by the user agent to process a <code title="description element">description</code> element. </p>
            </li>
            <li>
              <p>Let <var>widget description</var> be the result of applying the <span>rule for getting text content</span> to this element.</p>
            </li>
          </ol>
        </dd>
        <dt>A <code title="license element">license</code> element:</dt>
        <dd>
          <p id="ta-vcYJAPVEym">If this is not the first <code title="license element">license</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
        </dd>
        <dd>
          <p id="ta-YUMJAPVEgI">If this is the first <code title="license element">license</code> element
            used,  then the <span class="product-ua">user agent</span> <em class="ct">must</em>:</p>
          <ol>
            <li>
              <p> Record that an attempt has been made by the user agent to process a <code title="license element">license</code> element. </p>
            </li>
            <li>
              <p>Let <var>license text</var> be the result of applying the <span>rule for
                getting text content</span> to this element. <span>Associate</span> <var>license text</var> with <var>widget license</var>. </p>
            </li>
            <li>
              <p>If the <code title="license href">href</code> attribute is used, then let <var>potential license href</var> be the result of applying the <span>rule for getting a
                single attribute value</span> to the <code title="license href">href</code> attribute.</p>
            </li>
            <li>
              <p> If <var>potential license href</var> is not a <span>valid IRI</span> or a <span>valid
                path</span>, then the <code title="license href">href</code> attribute is <span>in error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute. </p>
            </li>
            <li>
              <p>If <var>potential license href</var> is a <span>valid IRI</span>, then let <var>widget license href</var> be the value of <var>potential license href</var>. </p>
            </li>
            <li>
              <p>If <var>license href</var> is a <span>valid path</span>, then let <var title=""> file</var> be the result of applying the <span>rule for
                finding a file within a widget package</span> to <var>license href</var>. </p>
            </li>
            <li>
              <p>If <var title="">file</var> is not a <span>processable file</span>,
                as determined by applying the <span>rule for identifying the media type of a
                file</span>, then <span>ignore</span> this <var>element</var>. </p>
            </li>
            <li>
              <p>Otherwise, let <var title="">widget license</var> <var>file</var> be the value of <var>file</var>. </p>
            </li>
          </ol>
        </dd>
        <dt>An <code title="icon element">icon</code> element:</dt>
        <dd>
          <p id="ta-iipTwNshRg">If the <code title="icon src">src</code> attribute of this <code title=
          "icon element">icon</code> element is absent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
        </dd>
        <dd>
          <p id="ta-roCaKRxZhS">Let <var>path</var> be the result of applying the <span>rule for getting a
            single attribute value</span> to the <code title="icon src">src</code> attribute of this <code title="icon element">icon</code> element. If path is
            not a <span>valid path</span> or is an empty string, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>. </p>
        </dd>
        <dd>
          <p  id="ta-iuJHnskSHq">Let <var title="">file</var> be the result of applying the <span>rule for
            
            finding a file within a widget package</span> to <var>path</var>. If <var title="">file</var> is not a <span>processable file</span>, as
            determined by applying the <span>rule for identifying the media type of a
            file</span>, or already exists in the <var>icons</var> list, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this element. </p>
        </dd>
        <dd>
          <p>Otherwise,</p>
          <ol>
            <li>
              <p id="ta-eHUaPbgfKg">If the <code title="icon height">height</code> attribute is used, then let <var>potential <code>height</code></var> be the result of applying the <span>rule for parsing a non-negative integer</span> to the attribute's
                value. If the <var>potential <code>height</code></var> is not <span>in
                error</span> and greater than <code>0</code>, then <span>associate</span> the <var>potential <code>height</code></var> with <var title="">file</var>.
                Otherwise, the <code title="icon height">height</code> attribute is <span>in error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute.</p>
            </li>
            <li>
              <p id="ta-nYAcofihvj">If the <code title="icon width">width</code> attribute is used, then let <var>potential width</var> be the result of applying the <span>rule for
                parsing a non-negative integer</span> to the attribute's value. If the <var>potential width</var> is not <span>in error</span> and greater than <code>0</code>, then <span>associate</span> the <var>potential width</var> with <var title="">file</var>. Otherwise, the <code title="icon width">width</code> attribute is <span>in
                error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the attribute.</p>
            </li>
            <li>
              <p>Add <var title="">file</var> and any <span title=
              "associate">associated</span> <var>potential width</var> and/or <var>potential height</var> to the list of <var>icons</var>.</p>
            </li>
          </ol>
        </dd>
        <dt>An <code title="author element">author</code> element:</dt>
        <dd>
          <p  id="ta-sdwhMozwIc">If this is not the first <code title="author element">author</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
        </dd>
        <dd>
          <p id="ta-argMozRiC">If this is the first <code title="author element">author</code> element
            used,  then the <span class="product-ua">user agent</span> <em class="ct">must</em>: </p>
          <ol>
            <li>
              <p> Record that an attempt has been made by the user agent to process a <code title="author element">author</code> element. </p>
            </li>
            <li>
              <p>If the <code title="author-element href">href</code> attribute is used,
                then let <var>href-value</var> be the value of applying the <span>rule for
                getting a single attribute value</span> to the <code title=
              "author-element href">href</code> attribute.</p>
            </li>
            <li>
              <p>If <var>href-value</var> is a <span>valid IRI</span>, then let <var>author href</var> be the value of the <code title=
              "author-element href">href</code> attribute. Otherwise, if <var>href-value</var> is not a <span>valid IRI</span>, then <span>ignore</span> the <code title="author-element href">href</code> attribute.</p>
            </li>
            <li>
              <p>If the <code title="author email">email</code> attribute is used, then let <var title="author email var">author
                email</var> be the result of applying the <span>rule for getting a single attribute value</span> to the <code title="author email">email</code> attribute.</p>
            </li>
            <li>
              <p>Let <var>author name</var> be the result of applying the <span>rule for
                getting text content with normalized white space</span> to this
                element.</p>
            </li>
          </ol>
        </dd>
        <dt>A <code title="preference element">preference</code> element:</dt>
        <dd>
          <p id="ta-DwhJBIJRQN">If a <code title="preference value">value</code> attribute of the <code title="preference element">preference</code> element is used, but the <code title="preference name">name</code> attribute is absent, then this <code title="preference element">preference</code> element is <span>in error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>. Otherwise, the user agent <em class="ct">must</em>: </p>
        </dd>
        <dd>
          <ol>
            <li>
              <p>Let <var>name</var> be the result of applying the <span>rule
                for getting a single attribute value</span> to the <code title=
              "preference name">name</code> attribute.</p>
            </li>
            <li>
              <p>If the <var>name</var> is an empty string, then this <var>element</var> is <span>in error</span>; <span>ignore</span> this <var>element</var>. </p>
            </li>
            <li>
              <p>If <var>widget preferences</var> already contains a preference whose name case-sensitively matches the value of <var>name</var>,  then this <var>element</var> is <span>in error</span>; <span>ignore</span> this <var>element</var>. </p>
            </li>
            <li>
              <p>If <var>name</var> was not <span>in error</span>, let <var>preference</var> be an empty object.</p>
            </li>
            <li>
              <p>Associate <var>name</var> with <var>preference</var>. </p>
            </li>
            <li>
              <p>Let <var>value</var> be the result of applying the <span>rule
                for getting a single attribute value</span> to the <code title=
              "preference value">value</code> attribute.</p>
            </li>
            <li>
              <p><span>Associate</span> <var>value</var> with <var>preference</var>.</p>
            </li>
            <li>
              <p>If a <code title="preference readonly">readonly</code> attribute is used, then let <var>readonly</var> be the result of applying the <span>rule for
                getting a single attribute value</span> to the <code title="preference readonly">readonly</code> attribute. If <var>readonly</var> is not a <span>valid boolean
                value</span>, then let the value of <var>readonly</var> be the value
                '<code>false</code>'. </p>
            </li>
            <li>
              <p><span>Associate</span> <var>readonly</var> with
                the <var>preference</var>.</p>
            </li>
            <li>
              <p>Add the <var>preference</var> and the <span title=
              "associate">associated</span> <var>name</var>, <var>value</var> and <var>readonly</var> variables the list of <var>widget preferences</var>.</p>
            </li>
          </ol>
        </dd>
      </dl>
      <dl class="procedure">
        <dt id="process-content-elemenent">A <code title="content element">content</code> element:</dt>
        <dd>
          <p id="ta-hkWmGJgfve">If this is not the first <code title="content element">content</code> element encountered by the user agent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
        </dd>
        <dd>
          <p>If this is the first <code title="content element">content</code> element,  then the <span class="product-ua">user agent</span> <em class="ct">must</em>:</p>
        </dd>
        <dd>
          <ol>
            <li>
              <p> Record that an attempt has been made by the user agent to process a <code title="content element">content</code> element. </p>
            </li>
            <li>
              <p id="ta-LTUJGJFCOU">If the <code title="content src">src</code> attribute of the <code title="content element">content</code> element is absent or an empty string, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
            </li>
            <li>
              <p>Let <var>path</var> be the result of applying the <span>rule for getting
                a single attribute value</span> to the value of the <code>src</code> attribute.</p>
            </li>
            <li>
              <p id="ta-pIffQywZin">If <var>path</var> is not a <span>valid path</span>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
            </li>
            <li>
              <p id="ta-LQcjNKBLUZ">If <var>path</var> is a <span>valid path</span>, then let <var title=
              "">file</var> be the result of applying the <span>rule for finding a file
                within a widget package</span> to <var>path</var>. If <var>file</var> is <code>null</code> or in error, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
            </li>
            <li>
              <p>If the <code title="content type">type</code> attribute of the <code title="content element">content</code> element is absent, then check
                if <var title="">file</var> is <span>supported</span> by the user agent by
                applying the <span>rule for identifying the media type of a file</span>. If
                the <var title="">file</var> is <span>supported</span>, then let the <var>widget
                start file</var> be the <span>file</span> referenced by the <code title=
              "content src">src</code> attribute and let <var>start file
                content-type</var> be the <span>supported</span> <span>media type</span> as
                was derived by applying the <span>rule for identifying the media type of a
                file</span>.</p>
            </li>
            <li>
              <p id="ta-dPOgiLQKNK">If the <code title="content encoding">encoding</code> attribute is used, then let <var>content-encoding</var> be the result of applying the <span>rule for
                getting a single attribute value</span> to the value of the <code>encoding</code> attribute. If the character encoding  represented by the value of <var>content-encoding</var> is <span>supported</span> by the user agent, then let the <var>start file
                encoding</var> be the value of <var>content-encoding</var>. If <var>content-encoding</var> is an empty string or <span>unsupported</span> by the user agent,
                then a <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the <code title="content encoding">encoding</code> attribute.</p>
            </li>
            <li>
              <p id="ta-paIabGIIMC">If the <code title="content type">type</code> attribute is used, then let <var>content-type</var> be the result of applying the <span>rule for
                getting a single attribute value</span> to the value of the <code title=
              "content type">type</code> attribute. If the value of <var>content-type</var> is a <span>media type</span> <span>supported</span> by the user agent, then
                let the <var>start file content-type</var> be the value of <var>content
                type</var>. If value of <var>content-type</var> is <span>invalid</span> or <span>unsupported</span> by the user agent, then a <span class="product-ua">user agent</span> <em class="ct">must</em> treat the <span>widget package</span> as an <span>invalid widget package</span>. </p>
            </li>
            <li>
              <p id="ta-aaaaaaaaaa"> If the <var>start file encoding</var> was set in step 7 of this algorithm as a result of processing a valid and <span>supported</span> value for the <code title="content element">content</code> element's <code title="content encoding">encoding</code> attribute, then the <span class="product-ua">user agent</span> <em class="ct">must</em> skip this step in this algorithm. Otherwise, if the value of <var>content-type</var> is a <span>media type</span> <span>supported</span> by the user agent and if <var>content-type</var> contains one or more <span>[MIME]</span> <code title="mime parameter">parameter</code> components whose purpose is to  declare the character encoding of the <span>start file</span> (e.g., the value &quot;<samp>text/html;charset=Windows-1252</samp>&quot;,  where <samp>charset</samp> is a parameter component whose purpose is to declare the character encoding of the start file), then let <var>start file encoding</var> be the value of the last <span>supported</span> <code title="mime parameter">parameter</code> components whose purpose is to  declare the character encoding of the <span>start file</span>. </p>
              <div class="example">
                <p>In the following example, the user agent would set the start file encoding to ISO-8859-1 and would ignore the charset parameter used in the type attribute. </p>
                <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt; <br />  &lt;content src      = &quot;start.php&quot; 
           type     = &quot;text/html;charset=Windows-1252&quot; 
           encoding = &quot;ISO-8859-1&quot; /&gt;<br />&lt;/widget&gt;</code></pre>
                <p>In the following example the user agent would set the <var>start file encoding</var> to <code>Windows-1252</code>, if the user agent <span title="supported">supports</span> that character encoding. </p>
                <pre><code>&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt; 
  &lt;content src  = &quot;start.php&quot; 
           type = &quot;text/html;charset=Windows-1252&quot;/&gt;
&lt;/widget&gt;</code></pre>
              </div>
            </li>
          </ol>
        </dd>
      </dl>
      <dl class="procedure">
        <dt>A <code title="feature element">param</code> element:</dt>
        <dd>
          <p id="ta-KNiLPOKdgQ"> If this <code title=
        "param elemement">param</code> element  is not a direct child of a <code title="feature element">feature</code> element, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <code title="param element">param</code> <var>element</var>.</p>
        </dd>
        <dd>
          <p class="note"><span class="notetitle">Note:</span> How a param element is to be processed when it is inside a feature element is defined below.</p>
        </dd>
      </dl>
      <dl class="procedure">
        <dt>A <code title="feature element">feature</code> element:</dt>
        <dd>
          <p id="ta-rZdcMBExBX">The <span class="product-ua">user agent</span> <em class="ct">must</em> process a feature element in the following manner: </p>
        </dd>
        <dd>
          <ol>
            <li>
              <p>If the <code title="feature name">name</code> attribute of this <code title=
          "feature element">feature</code> element is absent, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
            </li>
            <li>
              <p>Let <var>required-feature</var> be the value <code>true</code>. </p>
            </li>
            <li>
              <p>If a <code title="feature required">required</code> attribute is used, then let <var>potentialy-required-feature</var> be the result of applying the <span>rule for
                getting a single attribute value</span> to the <code title="feature required">required</code> attribute. If the value of <var>potentialy-required-feature</var> is the value &quot;<code>false</code>&quot;, then let <var>required-feature</var> be the value
                '<code>false</code>'. </p>
            </li>
            <li>
              <p>Let <var>feature-name</var> be the result of applying the <span>rule for
                getting a single attribute value</span> to the value of the <code title=
              "feature name">name</code> attribute.</p>
              <p class="note"><span class="notetitle">Note:</span> This specification allows <code title="feature element">feature</code> elements with the same <code title="feature name">name</code> attribute value to be declared more than once. Handling of duplicate <span title="feature request">feature requests</span> is left up to the implementation or the specification that defines the feature. </p>
            </li>
            <li>
              <p id="ta-paWbGHyVrG">If <var>feature-name</var> is not a <span>valid IRI</span>, and <var>required-feature</var> is <code>true</code>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> treat this widget as
                an <span>invalid widget package</span>. </p>
            </li>
            <li>
              <p id="ta-ignore-unrequired-feature-with-invalid-name">If <var>feature-name</var> is not a <span>valid IRI</span>, and <var>required-feature</var> is <code>false</code>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this element. </p>
            </li>
            <li>
              <p id="ta-vOBaOcWfll">If <var>feature-name</var> is not <span>supported</span> by the user
                agent, and <var>required-feature</var> is <code>true</code>, then the <span class="product-ua">user agent</span> <em class="ct">must</em> treat this widget as
                an <span>invalid widget package</span>.</p>
            </li>
            <li>
              <p id="ta-luyKMFABLX">If <var>feature-name</var> is not <span>supported</span> by the user
                agent, and <var>required-feature</var> is <code>false</code>, then  the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
            </li>
            <li>
              <p>Let <var>feature</var> be an object that represents this <span>feature</span>. <span>Associate</span> <var>required-feature</var> and <var>feature-name</var> with the <var>feature</var> object.</p>
            </li>
            <li>
              <p>If the <code title="feature element">feature</code> element contains any <code title="param element">param</code> elements as direct descendants, then, for each child <code title="param element">param</code> element that is a direct descendants of this <code title=
              "feature element">feature</code> element, starting from the first moving to
                the last in <a href="http://www.w3.org/TR/xpath/#dt-document-order">document
                order</a>:</p>
              <ol style="list-style-type:upper-alpha">
                <li>
                  <p id="ta-EGkPfzCBOz">If  either the a <code title="param name">name</code> attribute or  the <code title="param value">value</code> attribute is missing, then this <code title="param element">param</code> element is <span>in error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>.</p>
                </li>
                <li>
                  <p>Let <var>param-name</var> be the result of applying the <span>rule
                    for getting a single attribute value</span> to the <code title=
                  "param name">name</code> attribute. </p>
                </li>
                <li>
                  <p id="ta-CEGwkNQcWo">If <var>param-name</var> is an
                    empty string, then this <code title="param element">param</code> element is <span>in
                    error</span> and the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> this <var>element</var>. </p>
                </li>
                <li>
                  <p>Let <var>param-value</var> be the result of
                    applying the <span>rule for getting a single attribute value</span> to
                    the <code title="param value">value</code> attribute.</p>
                </li>
                <li>
                  <p>L:et <var>param</var> be an object that represents this paramenter. </p>
                </li>
                <li>
                  <p><span>Associate</span> <var>param-name</var> and <var>param-value</var> with <var>param</var>.</p>
                </li>
                <li>
                  <p><span>Associate</span> <var>param</var> with <var>feature</var>.</p>
                </li>
              </ol>
            </li>
            <li>
              <p>Append <var>feature</var>, to the <var>feature list</var>.</p>
            </li>
          </ol>
        </dd>
        <dt><dfn id="process-any-element">Any other type of element</dfn>:</dt>
        <dd>
          <p id="ta-bbbbbbbbbb">If the user agent <span title="supported">supports</span> the element, then the <span class="product-ua">user agent</span> <em class="ct">must</em> process it in accordance with whatever specification defines that element (if any). Otherwise, the <span class="product-ua">user agent</span> <em class="ct">must</em> <span>ignore</span> the element.</p>
        </dd>
      </dl>
    </li>
  </ol>
  <h3 class="no-num done"><dfn>Step 8</dfn> - Locate the Start File</h3>
  <p id="ta-BnWPqNvNVo">If <var>widget start file</var> of the <span>table of configuration defaults</span> contains a <span>file</span> (i.e. <var>widget start file</var> is not <code>null</code>), then a <span class="product-ua">user agent</span> <em class="ct">must</em> skip <span>Step 8</span> and go
    to <span>Step 9</span>. </p>
  <p id="ta-RGNHRBWNZV">If <var>widget start file</var> does not contain a <span>file</span>, the <span class="product-ua">user agent</span> <em class="ct">must</em> apply the <span>algorithm to locate a default start file</span>.</p>
  <p>The <dfn>algorithm to locate a default start file</dfn> is as follows: </p>
  <ol>
    <li>
      <p>For each <var>file name</var> in the <span>default start files table</span> (from
        top to bottom) that has a <span>media type</span> that is <span>supported</span> by
        the user agent:</p>
      <ol>
        <li>
          <p>Let <var>potential-start-file</var> be the result of applying the <span>rule
            for finding a file within a widget package</span> to <var>file name</var>.</p>
        </li>
        <li>
          <p>If <var>potential-start-file</var> is <code>null</code> or <span>in
            error</span>, <span>ignore</span> this <var>file name</var> and move onto the
            next <var>file name</var> in the <span>default start files table</span>.</p>
        </li>
        <li>
          <p>If <var>potential</var><var>-start-file</var> is a <span>file</span>, then:</p>
          <ol>
            <li>
              <p>Let <var>widget start file</var> be the value of <var>potential-</var><var>start-file</var>.</p>
            </li>
            <li>
              <p>Let <var>start file content-type</var> be the <span>media type</span> given in the media type column of the <span>default start files
                table</span>.</p>
            </li>
            <li>
              <p>Terminate this algorithm and go to <span>Step 9</span>.</p>
            </li>
          </ol>
        </li>
      </ol>
    </li>
    <li>
      <p>If after searching for every <var title="">file</var> in the <span>default start
        files table</span> no default start file is found, then treat this widget as an <span>invalid widget package</span>.</p>
    </li>
  </ol>
  <h3 class="no-num done"><dfn>Step 9</dfn> - Process the Default Icons</h3>
  <p>This step describes how to locate the <span title="default icons table">default
    icons</span>.</p>
  <p id="ta-FAFYMEGELU">In <span>Step 9</span>, a <span class="product-ua">user agent</span> <em class="ct">must</em> apply the <span>algorithm to locate the default icons</span>.</p>
  <p>The <dfn>algorithm to locate the default icons</dfn> is as follows:</p>
  <ol>
    <li>
      <p>For each <var>file name</var> in the <span>default icons table</span> (from top to
        bottom) that has a <span>media type</span> that is <span>supported</span> by the user
        agent:</p>
      <ol>
        <li>
          <p>Let <var>potential-icon</var> be the result of applying the <span>rule for
            finding a file within a widget package</span> to <var>file name</var>.</p>
        </li>
        <li>
          <p>If the <var>potential-icon</var> is a <span>processable file</span>, determined
            by the <span>media type</span> given in the media type column of the <span>default icons table</span>, and the <var>potential-icon</var> does not already exist in the <var>icons</var> list of the <span>table of configuration defaults</span>, then append the value of <var>potential-icon</var> to the <var>icons</var> list of the <span>table of
            configuration defaults</span>. </p>
        </li>
        <li>
          <p>Move onto the next <var>file name</var> in the <span>default icons
            table</span>.</p>
        </li>
      </ol>
    </li>
  </ol>
  <h2 class="no-num">Appendix</h2>
  <h3 class="no-num">Media Type Registration for <code>application/widget</code></h3>
  <p>This appendix is the MIME media type registration for &quot;<code>application/widget</code>&quot;. This registration has been <a href="http://www.iana.org/assignments/media-types/application/">approved</a> by the Internet Assigned Numbers Authority (<abbr title="Internet Assigned Numbers Authority">IANA</abbr>) . </p>
  <p>Registration with <abbr title="Internet Assigned Numbers Authority">IANA</abbr> was conducted in conformance with <a href="http://www.ietf.org/rfc/rfc4288.txt">BCP 13</a> and <a href="http://www.w3.org/2002/06/registering-mediatype.html">W3CRegMedia</a>. </p>
  <dl>
    <dt>Type name: </dt>
    <dd>
      <p><code>application</code></p>
    </dd>
    <dt>subtype name:</dt>
    <dd>
      <p><code>widget</code></p>
    </dd>
    <dt>Required parameters:</dt>
    <dd>
      <p>None.</p>
    </dd>
    <dt> Optional parameters:</dt>
    <dd>
      <p> None.</p>
    </dd>
    <dt>Encoding considerations:</dt>
    <dd>
      <p>Widget packages are binary data and thus are encoded for MIME 
        transmission. As a widget package is binary, it requires encoding on transports not capable of
        handling binary. The same guidelines that apply to <code>application/octet-stream</code> apply to widget packages (see <span>[MIME]</span>). </p>
    </dd>
    <dt>Security  considerations:</dt>
    <dd>
      <p>In addition to the security considerations specified for Zip files in the <span>[Zip-MIME]</span> registration, there are a number of security considerations that need to be taken into account when dealing with <span title="widget package">widget packages</span> and <span title="configuration document">configuration documents</span>. </p>
      <p>As the <span> configuration document</span> format is <span>[XML]</span> and will commonly be encoded using <span>[Unicode]</span>, the security considerations described in <span>[XML-MIME]</span> and <span>[UTR36]</span> apply. In addition, implementers need to impose their own implementation-specific limits on the values of otherwise unconstrained attribute types, e.g. to prevent denial of service attacks, to guard against running out of memory, or to work around platform-specific limitations.</p>
      <p>The configuration document allows authors, through the <code title="feature element">feature</code> element, to request permission to enable  third-party runtime components and APIs. As these features are outside the scope of this specification, significant caution needs to be taken when granting a widget the capability to use a feature. Features themselves  define their own security considerations. </p>
      <p><span class="widget package">Widget packages</span> will generally contain ECMAscript, HTML, CSS files, and other media, which are executed in a sand boxed environment. As such, implementers need to be aware of the security implications for the types they <span title="supported">support</span>. Specifically, implementers need to consider the security implications outlined in the [CSS-MIME] specification, the <span>[ECMAScript-MIME]</span> specification, and the <span>[HTML-MIME]</span> specification. </p>
      <p>As widget packages can contain content that is able to simultaneously interact with the local device and  a remote host, implementers need to consider the privacy implications resulting from  exposing private information to a remote host.  Mitigation and in-depth defensive measures are an implementation responsibility and not prescribed by this specification. However, in designing these measures, implementers are advised to enable user awareness of information sharing, and to provide easy access to interfaces that enable revocation of permissions. </p>
      <p> As this specification relies on the standardized heuristics for determining the content type of files defined in the <span>[SNIFF]</span> specification, implementers need to consider  the security considerations discussed in the <span>[SNIFF]</span> specification.</p>
      <p>As this specification allows for the declaration of IRIs within certain elements of a configuration documents, implementers need to consider  the security considerations discussed in the <span>[IRI]</span> specification. Implementations intending to display <abbr title="Internationalized Resource Identifiers">IRIs</abbr> and <abbr title="Internationalized domain name">IDNA</abbr> addresses found in the <span>configuration document</span> are strongly encouraged to follow the security advice given in <span>[UTR36]</span>. This could include, for example,  behaving as if the <code>dir</code> attribute had no effect on any <span title="IRI attribute">IRI attributes</span>,, <span title="path attribute">path attributes</span>, and the <code title="author element">author</code> element's <code title="author email">email</code> attribute.</p>
      <p>In addition, user agents  need to be careful about trusting path components  
        found in the widget package. Such path components might be interpreted  
        by operating systems as pointing at security critical files outside  
        the widget environment proper, and naive unpacking of widget  
        packages into the file system might lead to undesirable and security  
        relevant effects, such as overwriting of  system files. </p>
    </dd>
    <dt>Interoperability considerations:</dt>
    <dd>
      <p>Some issues can arise with regards to character encodings of file names, the length of zip relative paths, and the use of certain strings as file names. </p>
      <p>This specification does not put a restriction on the byte length of a <span>Zip
        relative path</span>, so a user agent <em class="ct">should</em> to be able to deal with <span title="Zip relative path">Zip relative paths</span> that have lengths longer than 250 bytes. As some operating systems have restrictions on how long a path length can be, authors need to keep the lengths of relative paths at less than 250 bytes. Unicode code points may
        require more than one byte to encode a character, which can result in a path whose
        length is less than 250 characters but whose size is greater than 250 bytes. </p>
      <p>Authors need to be aware that, at the time of publication, there are
        interoperability issues with regards to using characters outside the <code>safe-chars</code> range for file or folder names in a Zip archive when using
        Zipping tools bundled with operating systems. The interoperability issues have
        arisen from non-conforming implementations of the <span>[ZIP]</span> specification
        across operating systems: very few, if any, correctly support encoding file names
        in Unicode.</p>
      <p>In the case where the Zip relative path is encoded using <span>[UTF-8]</span>, the <dfn class="external">language encoding flag (EFS)</dfn> needs to be set.</p>
      <p>If an author chooses to use the <code>utf8-chars</code>, they need to thoroughly
        test their widgets on various platforms prior to distribution; otherwise it is
        suggested that authors restrict file and folder names to the <code>safe-chars</code> (characters in the US-ASCII range). In addition, having
        excessively long path names (e.g. over 120 characters) can also result in
        interoperability issues on some operating systems. </p>
      <p> Authors need to avoid using <span>Zip forbidden
        characters</span> when naming the files used by a widget. These characters are reserved to
        maintain interoperability across various file systems and with <span>[URI]</span>s.</p>
      <p>Authors need to avoid using the following words as either a <span><code>folder</code></span> or
        a <span><code>file-name</code></span> in a <span>Zip relative path</span> as they
        are reserved by some operating systems (case-insensitive): CON, PRN, AUX, NUL,
        COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5,
        LPT6, LPT7, LPT8, LPT9, CLOCKS$. For example, the following names are ok:
        &quot;CON-tact.txt&quot;, &quot;printer.lpt1&quot;, &quot;DCOM1.pdf&quot;. However, &quot;com3.txt&quot; &quot;Lpt1&quot;, &quot;CoM9.gif&quot;
        
        would not be.</p>
      <p>In addition,  authors need to avoid having a &quot;.&quot; U+002E FULL STOP as the last character of a
        file or folder name as some operating systems will remove the character when the
        file is extracted from the Zip archive onto the device. Furthermore, avoid having
        the space character (<span>SP</span>) at the start or end of a file name; and take
        caution when using the &quot;+&quot; U+002B PLUS SIGN, as it might cause issues on some
        operating systems.</p>
    </dd>
    <dt>Published specification:</dt>
    <dd>
      <p><a href="http://www.w3.org/TR/widgets/">http://www.w3.org/TR/widgets/</a></p>
    </dd>
    <dt>Applications that use this media type:</dt>
    <dd>
      <p>User agents that claim conformance to this specification. </p>
    </dd>
    <dt>Magic number(s):</dt>
    <dd>
      <p><code>50 4B 03 04</code></p>
    </dd>
    <dt> File extension(s):</dt>
    <dd>
      <p>wgt</p>
    </dd>
    <dt>Macintosh file type code(s):</dt>
    <dd>
      <p>None. </p>
    </dd>
    <dt>Person &amp; email address to contact for further information:</dt>
    <dd>
      <p>Steven Pemberton, <a href="mailto:member-webapps@w3.org">member-webapps@w3.org</a></p>
    </dd>
    <dt>Intended usage: </dt>
    <dd>
      <p>Common. </p>
    </dd>
    <dt>Restrictions on usage: </dt>
    <dd>
      <p>None.</p>
    </dd>
    <dt>Author:</dt>
    <dd>
      <p><a href="http://www.w3.org/2008/webapps/">The W3C's Web Applications Working Group</a></p>
    </dd>
  </dl>
  <h3 class="no-num">Linking To a Widget Package From a HTML Document</h3>
  <p><em>This section is non-normative.</em></p>
  <p><em>This section only applies to HTML user agents <span>[HTML]</span>.</em></p>
  <p><dfn>Auto-discovery</dfn> enables a user agent to identify and install a <span>widget package</span> that is associated with an HTML page. When a page points to
    a <span>widget package</span>, user agents <em class="ct">should</em> expose the presence of the <span>widget package</span> to the end-user and allow the end-user to install the <span>widget</span>.</p>
  <p>The link type &quot;<code title="">widget</code>&quot; indicates that a link of this type
    references a document that is a <span>widget package</span>. In HTML, it may be
    specified for the <code title="">a</code>, <code title="">area</code> and <code title=
  "">link</code> elements to create a hyperlink.</p>
  <div class="example">
    <p>For example:</p>
    <pre>
<code>&lt;a rel=&quot;widget&quot;
   href=&quot;http://example.org/exampleWidget&quot;&gt;
   The Example Widget
&lt;/a&gt;</code>
</pre>
  </div>
  <h3 class="no-num">Table of Elements and Their Attributes</h3>
  <p><em>This section is non-normative.</em></p>
  <p>This table lists all elements and respective attributes, as well as child-parent relationships, that make up the language of the <span>configuration document</span> format defined in this specification. </p>
  <table>
    <tr>
      <th scope="col">Element</th>
      <th scope="col">Description</th>
      <th scope="col">Parent</th>
      <th scope="col">Expected Children</th>
      <th scope="col">Attributes</th>
      <th scope="col">Type</th>
    </tr>
    <tr>
      <td rowspan="8"><code title="widget element">widget</code></td>
      <td rowspan="8">The root element of a <span>configuration document</span>.</td>
      <td rowspan="8">none. </td>
      <td rowspan="8"><ul>
          <li><code title="name element">name</code></li>
          <li><code title="description element">description</code></li>
          <li><code title="author element">author </code></li>
          <li><code title="license element">license </code></li>
          <li><code title="icon element">icon</code></li>
          <li><code title="content element">content</code></li>
          <li><code title="feature element">feature</code></li>
          <li><code title="preference element">preference</code></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="widget id">id</code></td>
      <td><span title="IRI attribute">IRI</span></td>
    </tr>
    <tr>
      <td><code title="widget version">version</code></td>
      <td><span title="version attribute">version</span></td>
    </tr>
    <tr>
      <td><code title="widget height">height</code></td>
      <td><span title="numeric attribute">numeric</span></td>
    </tr>
    <tr>
      <td><code title="widget width">width</code></td>
      <td><span title="numeric attribute">numeric</span></td>
    </tr>
    <tr>
      <td><code title="widget viewmodes">viewmodes</code></td>
      <td><span title="keyword list attribute">Keyword list</span></td>
    </tr>
    <tr>
      <td><code title="widget defaultlocale">defaultlocale</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td rowspan="3"><code title="name element">name</code></td>
      <td rowspan="3">The name of the widget. </td>
      <td rowspan="3"><code title="widget element">widget</code></td>
      <td rowspan="3"><ul>
          <li><code title="span element">span</code>, </li>
          <li><span>text node</span></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="name short">short</code></td>
      <td><span title="displayable-string attribute">displayable-string</span></td>
    </tr>
    <tr>
      <td rowspan="2"><code title="description element">description</code></td>
      <td rowspan="2">Some text that describes the purpose of the widget.</td>
      <td rowspan="2"><code title="widget element">widget</code></td>
      <td rowspan="2"><ul>
          <li><code title="span element">span</code></li>
          <li> <span>text node</span></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td rowspan="4"><code title="author element">author</code></td>
      <td rowspan="4">The person or person that created the widget.</td>
      <td rowspan="4"><code title="widget element">widget</code></td>
      <td rowspan="4"><ul>
          <li><code title="span element">span</code></li>
          <li><span>text node</span></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="author-element href">href</code></td>
      <td><span title="IRI attribute">IRI</span></td>
    </tr>
    <tr>
      <td><code title="author email">email</code></td>
      <td><span title="string attribute">string</span></td>
    </tr>
    <tr>
      <td rowspan="3"><code title="license element">license</code></td>
      <td rowspan="3">The license under which the widget is distributed.</td>
      <td rowspan="3"><code title="widget element">widget</code></td>
      <td rowspan="3"><ul>
          <li><code title="span element">span</code></li>
          <li><span>text node</span></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="license href">href</code></td>
      <td><span title="IRI attribute">IRI</span> or <span title="path attribute">path</span></td>
    </tr>
    <tr>
      <td rowspan="5"><code title="icon element">icon</code></td>
      <td rowspan="5">An iconic representation of the widget.</td>
      <td rowspan="5"><code title="widget element">widget</code></td>
      <td rowspan="5">none.</td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="icon src">src</code></td>
      <td><span title="path attribute">path</span></td>
    </tr>
    <tr>
      <td><code title="icon width">width</code></td>
      <td><span title="numeric attribute">numeric</span></td>
    </tr>
    <tr>
      <td><code title="icon height">height</code></td>
      <td><span title="numeric attribute">numeric</span></td>
    </tr>
    <tr>
      <td rowspan="5"><code title="content element">content</code></td>
      <td rowspan="5">The means to point to the &quot;main file&quot; of a widget; serves as a boot-strapping mechanism. </td>
      <td rowspan="5"><code title="widget element">widget</code></td>
      <td rowspan="5">none.</td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="content src">src</code></td>
      <td><span title="numeric attribute">numeric</span></td>
    </tr>
    <tr>
      <td><code title="content type">type</code></td>
      <td><span title="Media type attribute">media type</span></td>
    </tr>
    <tr>
      <td><code title="content encoding">encoding</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td rowspan="4"><code title="feature element">feature</code></td>
      <td rowspan="4">A means  to request the availability of a <span>feature</span>, such as an API, that would not normally be part of the default set of features provided by the user agent at runtime. </td>
      <td rowspan="4"><code title="widget element">widget</code></td>
      <td rowspan="4"><ul>
          <li><code title="param element">param</code>.</li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="feature name">name</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="feature required">required</code></td>
      <td><span title="boolean attribute">boolean</span></td>
    </tr>
    <tr>
      <td rowspan="5"><code title="preference element">preference</code></td>
      <td rowspan="5">A means to declare a name-value pair that is made available to the widget at runtime.</td>
      <td rowspan="5"><code title="widget element">widget</code></td>
      <td rowspan="5">none.</td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="preference name">name</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="preference value">value</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="preference readonly">readonly</code></td>
      <td><span title="boolean attribute">boolean</span></td>
    </tr>
    <tr>
      <td rowspan="4"><code title="param element">param</code></td>
      <td rowspan="4">A means of declaring a <span>parameter</span> that can be used with a <span>feature</span>. </td>
      <td rowspan="4"><code title="preference element">feature</code></td>
      <td rowspan="4">none.</td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
    <tr>
      <td><code title="param name">name</code></td>
      <td><span title="string attribute">string</span></td>
    </tr>
    <tr>
      <td><code title="param value">value</code></td>
      <td><span title="string attribute">string</span></td>
    </tr>
    <tr>
      <td rowspan="2"><code title="span element">span</code></td>
      <td rowspan="2">A generic text container which is mainly used for internationalization purposes. </td>
      <td rowspan="2"><ul>
          <li><code title="name element">name</code></li>
          <li><code title="description element">description</code></li>
          <li><code title="author element">author</code></li>
          <li><code title="license element">license</code></li>
        </ul></td>
      <td rowspan="2"><ul>
          <li><code title="span element">span</code></li>
          <li> <span>text node</span></li>
        </ul></td>
      <td><code>xml:lang</code></td>
      <td><span title="language attribute">language</span></td>
    </tr>
    <tr>
      <td><code>dir</code></td>
      <td><span title="keyword attribute">keyword</span></td>
    </tr>
  </table>
  <h2 class="no-num">Acknowledgements</h2>
  <p>Huge thanks to everyone who contributed their time and sent feedback to our public mailing, particularly the i18n WG. </p>
  <p>This specification would not exist without the contribution of the following individuals:</p>
  <p>Aaron Boodman,  Adam Barth, Addison Phillips, Alexander Dreiling, Andrew Sledd, Andrew Welch, Arun Ranganathan, Arthur Barstow, B&aacute;rbara
    Barbosa Neves, Bil Corry, Brian Wilson, Bjoern Hoehrmann, Benoit Suzanne, Bert Bos, Boris Zbarsky,
    Bradford Lassey, Bryan Sullivan,  Cameron McCormack, Cliff Schmidt, Claudio Venezia, Coach Wei, Corin
    Edwards, Cynthia Shelly, Cyril Concolato,  Dan Brickley, Dan Connolly, Daniel Silva, David Clarke, Dean Jackson, David Poehlman, David Pollington, David Rogers, Dominique Hazael-Massieux, Doug Schepers, Ed 
    Voas, Felix Sasaki, Francois Daoust, Frederick Hirsch, Gautam Chandna, Geir Pedersen, Gene Vayngrib, Gorm
    Haug Eriksen, Guido Grassel, Guenter Klas, Hans S. T&oslash;mmerholt, Hari Kumar G, Henri Sivonen, Henry Story, Ian Hickson, Ivan Demarino,  Jay Sweeney, Jean-Claude Dufourd, Jeff Decker, Jere K&auml;pyaho,  Jim
    Ley, Jo Rabin, Jon Ferraiolo, Jonas Sicking, Jose Manuel Cantera Fonseca, Josh Soref, Jouni Hakala, Joey
    Bacalhau, Julian Reschke, Kevin Lawver, Kai Hendry, Krzysztof Maczyński, Lachlan Hunt, Larry Masinter, Laurens Holst, Mark Priestley, Marc Silbey,
    Marcin Hanclik, Mark Baker, Martin J. D&uuml;rst, Michael Cooper, Max Froumentin, Mikko Pohja, Mohamed Zergaoui, Ms2ger, Najib Tounsi, Noah Mendelsohn, Oguz Kupusoglu, Ola Andersson, Olli Immonen, Paddy Byers, Paul Libbrecht , Philipp
    Heltewig, Philip Taylor, Rainer Hillebrand, Robert Sayre, Rune <abbr title="Fabulous">F.</abbr> Halvorsen,  Samuel Santos, Scott Wilson, Sean Mullan, Sigbjorn Finne, Simon Pieters, Stephen Paul Weber, Stephen Jolly, Stephane Sire, Steven Faulkner, Thomas Landspurg, Thomas Roessler, Tiago Neves, William Edney, Yoan Blanc, Yves Savourel.</p>
  <p>Special thanks go to Arve Bersvendsen, Robin Berjon, Anne van Kesteren, and Charles
    McCathieNevile who helped edit various versions of this specification. Big thanks also to Richard Tibbett.  </p>
  <p>Special thanks also to <a href="http://hasather.net/">David H&aring;s&auml;ther</a> for
    creating and maintaining the <span>[Widgets-Relax NG Schema]</span> for the configuration document format.</p>
  <p>Parts of this document reproduce text and behavior from the <span>[HTML]</span> specification and from the <a href="http://www.w3.org/TR/xbl/">XBL 2.0
    specification</a> (as permitted by both specifications by their copyright
    statements).</p>
  <p>Graphic icons used some examples of this specification were created by <a href=
  "http://www.pinvoke.com/">Yusuke Kamiyamane</a> and are available for use under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
    license</a>.</p>
  <p>This specification is dedicated to the children of India.</p>
  <h2 class="no-num">Normative References</h2>
<dl><dt><dfn id="abnf">[ABNF]</dfn></dt>
    <dd><a href="http://www.ietf.org/rfc/rfc5234.txt"><cite>Augmented BNF for Syntax
      Specifications: <abbr title="Augmented Backus-Naur Form">ABNF</abbr></cite></a>.
      RFC5234. D. Crocker and P. Overell. January 2008.</dd>
    <dt><dfn id="bidi">[BIDI]</dfn></dt>
    <dd><cite><a href="http://unicode.org/reports/tr9/">Unicode Standard Annex #9: Unicode Bidirectional Algorithm</a></cite>. M. Davis.</dd>
    <dt><dfn id="bcp47">[BCP47]</dfn></dt>
    <dd><cite><a href="http://www.rfc-editor.org/rfc/bcp/bcp47.txt">Tags for Identifying Languages</a></cite>, A. Phillips and M. Davis. September 2009.</dd>
    <dt><dfn id="cp437">[CP437]</dfn></dt>
    <dd><cite><a href="ftp://ftp.software.ibm.com/software/globalization/gcoc/attachments/CP00437.txt">IBM CPGID 00437</a></cite>. Code Page 47, Character Encoding Scheme. 1984. </dd>
    <dt><dfn id="css2">[CSS]</dfn></dt>
    <dd><cite><a href="http://www.w3.org/TR/CSS21/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>.</cite> B. Bos, I. Hickson, T.
      Çelik, H. Wium Lie.  W3C Recommendation 07 June 2011.</dd>
    <dt><dfn id="css-mime">[CSS-MIME]</dfn></dt>
    <dd><cite><a href="http://www.rfc-editor.org/rfc/rfc2318.txt">The text/css Media Type </a></cite>. RFC 2318. H. Lie,  B. Bos, and C. Lilley. IETF. March 1998.</dd>
    <dt><dfn id="deflate">[Deflate]</dfn></dt>
    <dd><a href="http://www.faqs.org/rfcs/rfc1951.html"><cite>DEFLATE Compressed Data
      Format Specification version 1.3</cite></a>. P. Deutsch, The Internet Society, May
      1996.</dd>
    <dt><dfn id="dom3core">[DOMCore]</dfn></dt>
    <dd><a href="http://www.w3.org/TR/DOM-Level-3-Core/"><cite>Document Object Model
      (DOM) Level 3 Core Specification</cite></a>. A. Le Hors, P. Le Hégaret, L. Wood, G.
      Nicol, J. Robie, M. Champion, S. Byrne, editors. W3C Recommendation 07 April 2004.</dd>
    <dt><dfn id="iana-charsets">[IANA-Charsets]</dfn></dt>
    <dd><a href="http://www.iana.org/assignments/character-sets"><cite>IANA Character Set
      Registry</cite></a>.</dd>
    <dt><dfn id="iri">[IRI]</dfn></dt>
    <dd><cite><a href="http://www.ietf.org/rfc/rfc3987">Internationalized Resource
      Identifiers (IRIs)</a></cite>. RFC3987, M. Duerst, M. Suignard. January 2005.</dd>
    <dt><dfn id="mime">[MIME]</dfn></dt>
    <dd><a href="http://www.ietf.org/rfc/rfc2045.txt"><cite>Multipurpose Internet Mail
      Extensions (MIME) Part One: Format of Internet Message Bodies</cite></a>. RFC2045, N.
      Freed and N. Borenstein, IETF, November 1996.</dd>
    <dd><a href="http://www.ietf.org/rfc/rfc2046.txt"><cite>Multipurpose Internet Mail
      Extensions(MIME) Part Two: Media Types</cite></a>. RFC2046, N. Freed and N.
      Borenstein, IETF, November 1996.</dd>
    <dt><dfn id="rfc2119">[RFC2119]</dfn></dt>
    <dd><a href="http://www.ietf.org/rfc/rfc2119"><cite>Key words for use in RFCs to
      Indicate Requirement Levels</cite></a>. RFC2119, S. Bradner. March 1997.</dd>
    <dt><dfn id="sniff">[SNIFF]</dfn></dt>
    <dd><a href="http://tools.ietf.org/html/draft-ietf-websec-mime-sniff"><cite>Media Type Sniffing</cite></a>. A. Barth and I. Hickson. IETF (Work in Progress).</dd>
   
    <dt><dfn id="unicode">[Unicode]</dfn></dt>
    <dd> <cite><a href="http://www.unicode.org/versions/latest/">The Unicode Standard</a></cite>. Unicode Consortium.</dd>
    <dt><dfn id="uri">[URI]</dfn></dt>
    <dd><a href="http://www.ietf.org/rfc/rfc3986.txt"><cite>Uniform Resource Identifier
      (URI): Generic Syntax</cite></a>. RFC 3986, T. Berners-Lee, R. Fielding and L.
      Masinter. January 2005.</dd>
    <dt><dfn id="utf-8">[UTF-8]</dfn></dt>
    <dd><cite><a href="http://www.ietf.org/rfc/rfc3629.txt">UTF-8: A Transformation
      format of ISO 1064</a></cite>. RFC 3629, F. Yergeau. IETF, November 2003.</dd>
  
    <dt><dfn id="widgets-digsig">[Widgets-DigSig]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-digsig/"><cite>XML Digital
      Signatures for Widgets</cite></a>. M. Cáceres, Paddy Byers, Stuart Knightley, F. Hirsch, and M. Priestley. W3C  Proposed Recommendation.</dd>
    <dt><dfn id="view-modes">[View-Modes]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-vmmf/"><cite>The 'view-mode' Media Feature</cite></a>.  R. Berjon and M. Cáceres.   W3C Recommendation. </dd>
    <dt><dfn id="xml">[XML]</dfn></dt>
    <dd><cite><a href="http://www.w3.org/TR/2008/REC-xml-20081126/">Extensible Markup
      Language (XML) 1.0 (Fifth Edition)</a></cite>. T. Bray, J. Paoli, C. M.
      Sperberg-McQueen, E. Maler, F. Yergeau. W3C Recommendation 26 November 2008.</dd>
    <dt><dfn id="xml-mime">[XML-MIME]</dfn></dt>
    <dd><a href="http://www.rfc-editor.org/rfc/rfc3023.txt"><cite>XML Media Types</cite></a>. RFC3023. M. Murata, S. St. Laurent,  D. Kohn. IETF. January 2001. </dd>
    <dt><dfn id="xmlns">[XMLNS]</dfn></dt>
    <dd><a href="http://www.w3.org/TR/2006/REC-xml-names-20060816/"><cite>Namespaces in
      XML (Second Edition)</cite></a>. T. Bray, D. Hollander, A. Layman, R. Tobin. W3C Recommendation,
      August 2006.</dd>
    <dt><dfn id="zip">[ZIP]</dfn> </dt>
    <dd><a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT"><cite>.Zip File
      Format Specification</cite></a>. PKWare Inc.</dd>
    <dt><dfn id="zip-mime">[ZIP-MIME]</dfn></dt>
    <dd><a href="http://www.iana.org/assignments/media-types/application/zip">IANA Media Type
      Assignment.</a></dd>
  </dl>
  <h2 class="no-num">Informative References</h2>
 <dl><dt><dfn id="ecmascript-mime">[ECMAScript-MIME]</dfn></dt>
    <dd><a href="http://www.rfc-editor.org/rfc/rfc4329.txt"><cite>Scripting Media Types</cite></a>. RFC4329. B. Hoehrmann. IETF. April 2006.</dd>
    <dt><dfn id="html">[HTML]</dfn></dt>
 	  <dd><cite><a href="http://www.w3.org/TR/html5/">HTML5</a></cite>. Ian Hickson. W3C Working Draft 25 May 2011.</dd>     
      <dd><cite><a href="http://www.whatwg.org/specs/web-apps/current-work/">HTML - Living Standard</a></cite>.  I. Hickson. WHATWG. </dd>
    <dt><dfn id="html-mime">[HTML-MIME]</dfn></dt>
    <dd><a href="http://www.rfc-editor.org/rfc/rfc2854.txt">The 'text/html' Media Type</a>. D. Connolly and L. Masinter. IETF. June 2000.</dd>
    <dt><dfn id="http">[HTTP]</dfn></dt>
    <dd><a href="http://www.ietf.org/rfc/rfc2616.txt"><cite>Hypertext Transfer Protocol
      -- HTTP/1.1</cite></a>. RFC 2616, R. Fielding, et al. June 1999.</dd>
    <dt><dfn id="svgtiny">[SVGTiny]</dfn></dt>
    <dd><cite><a href="http://www.w3.org/TR/2008/REC-SVGTiny12-20081222/">Scalable Vector
      Graphics (SVG) Tiny 1.2 Specification</a></cite>. O. Andersson, R. Berjon, E.
      Dahlström, A. Emmons, J. Ferraiolo, A. Grasso, V. Hardy, S. Hayman, D. Jackson, C.
      Lilley, C. McCormack, A. Neumann, C. Northway, A. Quint, N. Ramani, D. Schepers, A.
      Shellshear. W3C Recommendation, 22 December 2008.</dd>
    <dt><dfn id="refsUTR">[UTR36]</dfn></dt>
    <dd><cite><a href="http://unicode.org/reports/tr36/">UTR #36: Unicode
      Security Considerations</a></cite>, M. Davis, M. Suignard. Unicode
      Consortium.</dd>
    <dt><dfn id="widgets-landscape">[Widgets-Landscape]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-land/"><cite>The Widget
      Landscape (Q1 2008)</cite></a>. M. Cáceres. W3C Note.</dd>
    <dt><dfn id="widgets-requirements">[Widgets-Requirements]</dfn></dt>
    <dd><cite><a href="http://dev.w3.org/2006/waf/widgets-reqs/">Widgets Requirements</a></cite>, M. Cáceres and M. Priestley. W3C Note.</dd>
    <dt><dfn id="widgets-relax-ng-schema">[Widgets-Relax NG Schema]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-schema/widgets.rnc"><cite>Relax NG Schema for the Widgets Family of Specifications</cite></a>. D. Håsäther, R. Berjon, and M. Cáceres.</dd>
    <dt><dfn id="widgets-test-suite">[P&amp;C-Test-Suite]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets/test-suite/"><cite>Test Suite for Widget Packaging and XML Configuration</cite></a>. M. Cáceres. </dd>
    <dt><dfn id="widgets-apis">[Widgets-APIs]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-api/"><cite>The Widget Interface</cite></a>.  M. Cáceres.  
      (Work in progress).</dd>
    <dt><dfn id="widgets-uri">[Widgets-URI]</dfn></dt>
    <dd><a href="http://dev.w3.org/2006/waf/widgets-uri/"><cite>Widget URI Scheme</cite></a>. M. Cáceres.  W3C Note.</dd>
  </dl>
</div>
<!-- script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="../widgets-shared/javascript/viewTests.js"></script-->
</body>
</html>
